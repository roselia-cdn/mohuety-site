(function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],l=0,d=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);h&&h(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,a=1;a<n.length;a++){var s=n[a];0!==o[s]&&(r=!1)}r&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},o={app:0},i=[];function s(t){return c.p+"static/js/"+({"fire-bird":"fire-bird","ringing-bloom":"ringing-bloom"}[t]||t)+"."+{"fire-bird":"01285a73","ringing-bloom":"a9fa0c97"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"fire-bird":1,"ringing-bloom":1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="static/css/"+({"fire-bird":"fire-bird","ringing-bloom":"ringing-bloom"}[t]||t)+"."+{"fire-bird":"104b28a1","ringing-bloom":"32be7de2"}[t]+".css",o=c.p+r,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===r||l===o)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var r=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[t],h.parentNode.removeChild(h),n(i)},h.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(h)})).then((function(){a[t]=0})));var r=o[t];if(0!==r)if(r)e.push(r[2]);else{var i=new Promise((function(e,n){r=o[t]=[e,n]}));e.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(h);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[t]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var h=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"034f":function(t,e,n){"use strict";var r=n("19b3"),a=n.n(r);a.a},1:function(t,e){},"19b3":function(t,e,n){},3266:function(t,e,n){},"431e":function(t,e,n){"use strict";var r=n("71a2"),a=n.n(r);a.a},"45ea":function(t,e,n){"use strict";n("d81d");var r=n("62ad"),a=n("8414"),o=n("0789"),i=n("1e06"),s=n("8212"),c=n("adda"),u=n("0fd9"),l=n("8336"),d=n("132d"),h=n("cc20"),m=n("48d3"),f=n("90b9"),p=n("f704");function v(t){return g(t)?t.author.nickname:t.nickname}function g(t){return!!t.author}e["a"]=m["componentFactoryOf"]().create({name:"recursive-comment",props:{comments:{type:Array,required:!0},canAddComment:{type:Boolean,default:!0},canDeleteComment:{type:Function},postAuthorUsername:String,myUsername:String},render:function(){var t=arguments[0];return t(r["a"],{attrs:{cols:10,sm:7,"offset-sm":2}},[this.renderComments(this.comments)])},methods:{renderComments:function(t){var e=this,n=this.$createElement;return n(a["a"],{attrs:{dense:!0,"align-top":!0}},[n(o["f"],{attrs:{group:!0}},[t.map((function(t){return n(i["a"],{key:t.id,class:"mb-3",attrs:{"fill-dot":!0,color:t.color||(t.author?"accent":"#bbbbbb"),id:"comment-".concat(t.id)}},[t.author&&t.author.avatar?n(s["a"],{slot:"icon"},[n(c["a"],{attrs:{src:t.author.avatar}})]):null,n(u["a"],{attrs:{justify:"space-between"}},[n(r["a"],{attrs:{cols:7}},[e.infoLabel(v(t),t.color||(t.author?"secondary":"#bbbbbb"),!1,e.getUsername(t)?{name:"userTimeline",params:{username:e.getUsername(t)}}:void 0),e.myUsername&&Object(p["a"])(e.getUsername(t),e.myUsername)?e.infoLabel("You","accent",!0):e.postAuthorUsername&&Object(p["a"])(e.getUsername(t),e.postAuthorUsername)?e.infoLabel("Author","accent",!0):null,n("div",{domProps:{innerHTML:t.content}}),e.canAddComment&&n(l["a"],{attrs:{text:!0,icon:!0},on:{click:function(){return e.$emit("reply-comment",t.id)}}},[n(d["a"],["reply"])]),e.canDeleteComment(t)?n(l["a"],{attrs:{text:!0,icon:!0,color:"error",small:!0},on:{click:function(){return e.$emit("delete-comment",t.id)}}},[n(d["a"],["delete"])]):null]),n(r["a"],{attrs:{cols:5},class:"text-right"},[f["a"].formatDate(t.createdAt)])]),n(u["a"],{attrs:{"no-gutters":!0,dense:!0,justify:"start"}},[n(r["a"],{attrs:{cols:12}},[t.replies.length?n("div",[e.renderComments(t.replies)]):null])])])}))])])},getUsername:function(t){return function(t){return t.author&&t.author.username}(t)},infoLabel:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=this.$createElement,o=this.$vuetify.theme.currentTheme[e]||e,i=a(h["a"],{attrs:{small:!0,color:e,outlined:n,to:r},class:{"ml-0":!0,"white--text":!n&&Object(p["f"])(o,!1,!0,!0)}},[t]);return r?a("router-link",{attrs:{to:r}},[i]):i}}})},"4bdc":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.shouldHide?t._e():n("v-app-bar",{attrs:{color:"primary","scroll-off-screen":""}},[t.shouldHaveToolbar?n("v-app-bar-nav-icon",{attrs:{dark:""},nativeOn:{click:function(e){t.drawer=!t.drawer}}}):t._e(),t._t("default"),n("v-toolbar-title",[n("router-link",{staticClass:"themed-text no-deco",attrs:{to:{name:"index"}}},[t._v(t._s(t.title))])],1),n("v-spacer"),t.shouldHaveToolbar?t._e():n("v-toolbar-items",[t.canAskYukina?n("v-btn",{attrs:{dark:"",text:""},on:{click:function(e){t.dialog=!0}}},[n("v-icon",[t._v("question_answer")])],1):t._e(),n("v-btn",{attrs:{dark:"",text:"",to:"/"}},[t._v("Index")]),n("v-btn",{attrs:{dark:"",text:"",to:"/timeline"}},[t._v("Timeline")]),t.userData?n("v-btn",{attrs:{dark:"",text:"",to:"/userspace"}},[t._v(t._s(t.userData.nickname))]):n("v-btn",{attrs:{dark:"",text:"",tag:"a",to:{name:"login"}},on:{contextmenu:function(e){return t.portedLogin(e)}},nativeOn:{click:function(e){return t.setRedirect(e)}}},[t._v("Login ")])],1)],2),t.shouldHaveToolbar&&!t.shouldHide?n("v-navigation-drawer",{attrs:{fixed:"",clipped:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-toolbar",{attrs:{flat:""}},[n("v-list",[n("v-list-item",[n("v-list-item-title",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")])],1)],1)],1),n("v-divider"),n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/"}},[n("v-list-item-action",[n("v-icon",[t._v("home")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Index")])],1)],1)],1),n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/timeline"}},[n("v-list-item-action",[n("v-icon",[t._v("list_alt")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Timeline")])],1)],1)],1),t.userData?n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/userspace"}},[n("v-list-item-action",[n("v-icon",[t._v("account_circle")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.userData.nickname))])],1)],1)],1):n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/login"},on:{click:t.setRedirect}},[n("v-list-item-action",[n("v-icon",[t._v("person")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Login")])],1)],1)],1),t.canAskYukina?n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{on:{click:function(e){t.dialog=!0}}},[n("v-list-item-action",[n("v-icon",[t._v("question_answer")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Ask Yukina for Help")])],1)],1)],1):t._e()],1):t._e(),t.canAskYukina?n("v-dialog",{attrs:{width:t.responseList.length?1e3:500},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[t._v(" What do you want to do? ("),n("v-icon",[t._v("fa-flask")]),t._v(" Experimental) ")],1),n("v-container",{attrs:{"grid-list-md":""}},[n("v-row",{attrs:{wrap:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-alert",{attrs:{type:"error",transition:"scale-transition",dismissible:""},model:{value:t.notUnderstand,callback:function(e){t.notUnderstand=e},expression:"notUnderstand"}},[t._v(" Sorry, I don't understand. ")]),t.responseList.length?n("recursive-comments",{ref:"comments",attrs:{comments:t.responseList,canAddComment:!1,canDeleteComment:function(){return!1},myUsername:t.userData&&t.userData.username}}):t._e(),t.loading?n("div",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v(" Practice like you perform, perform like you practice. ")],1):n("v-text-field",{ref:"command",attrs:{"hide-details":"","prepend-icon":"question_answer",label:"Ask Yukina for Help","single-line":"",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.runCommand(e)}},model:{value:t.command,callback:function(e){t.command=e},expression:"command"}})],1)],1)],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Close ")])],1)],1)],1):t._e(),t.canAskYukina?n("GlobalEvents",{on:{keyup:[function(e){return(e.type.indexOf("key")||89===e.keyCode)&&e.ctrlKey?void(t.dialog=!t.dialog):null},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}]}}):t._e()],1)},a=[],o=(n("99af"),n("0d03"),n("d3b7"),n("284c")),i=n("a49b"),s=n("90b9"),c=n("d569"),u=n("f704"),l=n("17d3"),d=n("45ea"),h={name:"blog-toolbar",components:{GlobalEvents:l["a"],RecursiveComments:d["a"]},props:["userData","route","realTitle","noDrawer","shouldHide"],data:function(){return{drawer:!1,dialog:!1,command:"",loading:!1,notUnderstand:!1,responseList:[],userMeta:{}}},methods:{setRedirect:function(){s["a"].setRedirect(this.route)},portedLogin:function(t){t.preventDefault();var e=window.open(this.$router.resolve({name:"login",query:{ported:!0}}).href,"loginWindow","height=400,width=400,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no"),n=this.$watch("userData",(function(t){t&&(e.close(),n())}));e.addEventListener("close",n)},runCommand:function(){var t=this;this.loading=!0,Object(c["b"])(this.command).then((function(e){if(t.loading=!1,!e)return Promise.reject("Not understand");t.dialog=!1})).catch(this.askYukina)},askYukina:function(){var t=this;this.responseList=[].concat(Object(o["a"])(this.responseList),[{id:Math.round(233*Math.random()),content:this.command,replies:[],createdAt:(new Date).toLocaleTimeString(),author:this.userMeta.username?this.userMeta:this.userData,nickname:"New Staff",color:"accent"}]),this.loading=!0,Object(c["a"])(this.command).then((function(e){t.responseList=[].concat(Object(o["a"])(t.responseList),[{id:Math.round(233*Math.random()),content:e,replies:[],createdAt:(new Date).toLocaleTimeString(),author:{nickname:"Yukina (Bot)",avatar:"https://img.lisa.moe/images/2019/04/15/GQ6GLDt_.jpg"}}]),t.loading=!1,t.command=""})).catch((function(e){t.loading=!1,t.notUnderstand=!0}))}},computed:{title:function(){return this.realTitle||i["a"].title},shouldHaveToolbar:function(){return!this.noDrawer&&this.$vuetify.breakpoint.smAndDown},canAskYukina:function(){return i["a"].enableAskYukina}},watch:{shouldHaveToolbar:function(t){t||(this.drawer=!1)},dialog:function(t){var e=this;t&&(this.$nextTick((function(){return e.$refs.command.focus()})),this.userMeta.username||s["a"].fetchJSONWithSuccess(s["a"].apiFor("user","user-meta"),"GET",{username:this.userData.username}).then((function(t){e.userMeta=Object(u["b"])(t)})))},userData:function(){this.userMeta={},this.responseList=[]}}},m=h,f=n("2877"),p=n("6544"),v=n.n(p),g=n("0798"),b=n("40dc"),y=n("5bc1"),w=n("8336"),k=n("b0af"),D=n("99d9"),O=n("62ad"),x=n("a523"),C=n("169a"),_=n("ce7e"),j=n("132d"),T=n("8860"),P=n("da13"),S=n("1800"),L=n("5d23"),E=n("f774"),A=n("490a"),$=n("0fd9"),V=n("2fa4"),M=n("8654"),I=n("71d9"),N=n("2a7f"),R=Object(f["a"])(m,r,a,!1,null,"5bde1fb9",null);e["a"]=R.exports;v()(R,{VAlert:g["a"],VAppBar:b["a"],VAppBarNavIcon:y["a"],VBtn:w["a"],VCard:k["a"],VCardActions:D["a"],VCardTitle:D["c"],VCol:O["a"],VContainer:x["a"],VDialog:C["a"],VDivider:_["a"],VIcon:j["a"],VList:T["a"],VListItem:P["a"],VListItemAction:S["a"],VListItemContent:L["a"],VListItemTitle:L["b"],VNavigationDrawer:E["a"],VProgressCircular:A["a"],VRow:$["a"],VSpacer:V["a"],VTextField:M["a"],VToolbar:I["a"],VToolbarItems:N["a"],VToolbarTitle:N["b"]})},"5fe1":function(t,e,n){"use strict";var r=n("8f5c"),a=n.n(r);a.a},6196:function(t,e,n){"use strict";n("d3b7");var r=n("bc3a"),a=n.n(r),o=n("cd49"),i=a.a.create();i.interceptors.request.use((function(t){return o["default"].$Progress.start(),t})),i.interceptors.response.use((function(t){return 200===t.status?o["default"].$Progress.finish():o["default"].$Progress.fail(),t}),(function(t){return o["default"].$Progress.fail(),Promise.reject(t)})),e["a"]=i},6801:function(t,e,n){"use strict";var r=n("3266"),a=n.n(r);a.a},"71a2":function(t,e,n){},"8f5c":function(t,e,n){},"90b9":function(t,e,n){"use strict";n("99af"),n("a15b"),n("d81d"),n("0d03"),n("d3b7"),n("ac1f"),n("25f0"),n("841c"),n("1276");var r=n("6196"),a=n("2ef0"),o=n.n(a),i=n("a18c"),s=n("a49b"),c=n("a5e0"),u={};u.apiBase=s["a"].apiBase,u.getArguments=function(){return this.$route.query},u.setRedirect=function(t){window.sessionStorage.setItem("redirectURL",JSON.stringify(t||u.getAbsPath()))},u.getRedirect=function(){return JSON.parse(window.sessionStorage.getItem("redirectURL"))},u.cleanRedirect=function(){window.sessionStorage.removeItem("redirectURL")},u.getAbsPath=function(){return window.location.pathname+window.location.search+window.location.hash},u.redirectTo=function(t){i["a"].push(t||"./")},u.getLoginData=function(){return c["a"].getPayload()},u.setLoginData=function(t){c["a"].setPayload(t)},u.updateLoginData=function(t){return u.setLoginData(t(u.getLoginData()))},u.removeLoginData=function(){return c["a"].clear()},u.saveSUToken=function(t){window.sessionStorage.setItem("suToken",t)},u.getSUToken=function(){return window.sessionStorage.getItem("suToken")},u.removeSUToken=function(){window.sessionStorage.removeItem("suToken")},u.getPosts=function(t){return this.fetchJSON(this.apiFor("posts")).then(t)},u.refreshToken=function(t){if(!t){var e=u.getLoginData();t=e&&e.rftoken}return t?u.fetchJSON(u.apiFor("login","token","refresh"),"POST",{token:t},!1,!1).then((function(t){if(t.success){var e=u.getLoginData();return e&&(e.token=t.token)&&u.setLoginData(e),e}return u.removeLoginData(),Promise.reject(t.msg)})):Promise.reject("No token")},u.formatDate=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=new Date(t);return isNaN(n.getTime())?t:e?n.toLocaleString():n.toLocaleDateString()}catch(r){return}},u.getPostsData=function(){return JSON.parse(window.localStorage.postData||"null")},u.deleteDraft=function(){return window.localStorage.removeItem("postDraft")},u.setPosts=function(t){window.localStorage.postData=JSON.stringify(t)},u.apiFor=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"".concat(u.apiBase,"/").concat(e.join("/"))},u.encodeArgs=function(t){return o.a.map(t,(function(t,e){return"".concat(e,"=").concat(t)})).join("&")},u.processPosts=function(t){var e=window.localStorage.postData;return e?t(JSON.parse(e)):u.getPosts(t),!1},u.ajaxPromised=function(t){return Object(r["a"])(t).then((function(t){return t.data}))},u.fetchJSON=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=this.getLoginData(),s=i?i.token:"";e=e.toUpperCase(),o&&(n["__timestamp"]=(new Date).getTime());var c=a?Object.assign({},n,{token:s}):n;return"GET"===e&&(c={params:c}),r["a"][e.toLowerCase()](t,c).then((function(t){return t.data})).catch((function(t){return Promise.reject(t)}))},u.fetchJSONWithSuccess=function(){return this.fetchJSON.apply(this,arguments).then((function(t){return t.success?t.result||t.data||t:Promise.reject(t.msg)}))},u.getTokenExpiryTime=function(t){try{var e=t.split(".")[0],n=JSON.parse(window.atob(e)),r=n.exp;return new Date(1e3*r)}catch(a){return console.error(a),new Date}},u.isTokenExpired=function(t){return u.getTokenExpiryTime(t||this.getLoginData().token)<new Date},u.showToast=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.toast.show=!1,this.toast.text=t.toString(),this.toast.color=e,this.toast.show=!0},u.getToastOption=function(){return{show:!1,text:"",color:""}},u.addEventListener=function(t,e){return addEventListener(t,e),function(){removeEventListener(t,e)}},u.addStorageListener=function(t){return u.addEventListener("storage",t)},e["a"]=u},"9a76":function(t,e,n){},a18c:function(t,e,n){"use strict";n("d3b7");var r=n("2b0e"),a=n("8c4f"),o=n("7876"),i=n.n(o),s=n("a49b"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-bar",{attrs:{userData:t.userData,route:this.$route.fullPath}}),n("v-parallax",{attrs:{dark:"",src:t.meta.images.indexBannerImage}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h1",{staticClass:"display-2 font-weight-thin mb-3"},[t._v(t._s(t.realTitle||t.meta.title))]),n("h4",{staticClass:"subheading"},[t._v(t._s(t.realSubtitle||t.meta.motto))])])],1)],1),n("v-layout",[n("v-container",{attrs:{fluid:"","grid-list-lg":""}},[t.posts.length?t._e():n("v-row",{attrs:{wrap:""}},t._l(6,(function(e){return n("v-col",{key:e,attrs:{cols:"12",xs:"12",sm:"8","offset-sm":"2"}},[n("v-skeleton-loader",{staticClass:"mb-6",class:{"round-corner-card":t.$vuetify.breakpoint.smAndUp},attrs:{elevation:"2",type:"card"}})],1)})),1),n("v-row",{attrs:{wrap:""}},t._l(t.posts,(function(e){return n("v-col",{key:e.id,attrs:{cols:"12",xs:"12",sm:"8","offset-sm":"2"}},[n("v-card",{class:{"round-corner-card":t.$vuetify.breakpoint.smAndUp},attrs:{hover:"",ripple:!1,shaped:t.$vuetify.breakpoint.smAndUp,to:t.getRoute(e)}},[e.img?n("v-img",{attrs:{src:e.img,"lazy-src":t.meta.images.lazyloadImage,ripple:"true"}},[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{staticClass:"fill-height",attrs:{align:"end"}},[n("v-col",{attrs:{cols:"12","align-self":"end",flexbox:""}},[t._l(e.tags,(function(e){return n("router-link",{key:e,attrs:{to:{name:"index",params:{tag:e},query:{tag:e}}}},[n("v-chip",{staticClass:"ma-1"},[t._v(t._s(e))])],1)})),e.secret?n("v-chip",{staticClass:"ma-1",attrs:{color:"success","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("lock")]),t._v(t._s(e.secret)+" ")],1),t._v(" Secret ")],1):t._e(),e.hidden?n("v-chip",{staticClass:"ma-1",attrs:{color:"grey","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("visibility_off")])],1),t._v(" Hidden ")],1):t._e()],2)],1)],1)],1):t._e(),n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("div",{staticClass:"headline"},[t._v(t._s(e.title))]),n("span",{staticClass:"grey--text subtitle-1"},[t._v(t._s(e.subtitle))])]),n("v-spacer"),n("span",{staticClass:"right caption"},[t._v(t._s(t.formatDate(e.created)||e.date))])],1),e.img?t._e():n("v-col",{attrs:{cols:"12","align-self":"end",flexbox:""}},[t._l(e.tags,(function(e){return n("router-link",{key:e,attrs:{to:{name:"index",params:{tag:e},query:{tag:e}}}},[n("v-chip",{staticClass:"ma-1"},[t._v(t._s(e))])],1)})),e.secret?n("v-chip",{staticClass:"ma-1",attrs:{color:"success","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("lock")]),t._v(t._s(e.secret)+" ")],1),t._v(" Secret ")],1):t._e(),e.hidden?n("v-chip",{staticClass:"ma-1",attrs:{color:"grey","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("visibility_off")])],1),t._v(" Hidden ")],1):t._e()],2),n("v-card-title",[n("span",{staticClass:"grey--text subtitle-1"},[t._v(t._s(e.author.nickname))])]),t.userData&&t.userData.role&&t.userData.role>=e.author.role?n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{small:"",fab:"",color:"error",to:{name:"edit",query:{post:e.id},params:{deletePost:!0,title:e.title}}}},[n("v-icon",[t._v("delete")])],1),n("v-btn",{attrs:{small:"",fab:"",color:"primary",to:{name:"edit",query:{post:e.id}}}},[n("v-icon",[t._v("mode_edit")])],1)],1):t._e()],1)],1)})),1)],1)],1),n("v-container",[n("div",{staticClass:"text-center"},[n("v-pagination",{attrs:{length:t.pages,circle:""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),n("toast",t._b({on:{showChange:t.changeToast}},"toast",t.toast,!1)),n("blog-footer"),n("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.windowTitle,expression:"windowTitle"}]})],1)},u=[],l=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("d81d"),n("e439"),n("dbb4"),n("b64b"),n("e25e"),n("159b"),n("2fa7")),d=n("90b9"),h=n("f704"),m=n("d569");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={name:"blog-index",data:function(){return{currentPage:1,prevPage:0,nextPage:0,pages:0,toast:d["a"].getToastOption(),posts:[],meta:s["a"],realTitle:"",realSubtitle:"",windowTitle:""}},props:{userData:Object},methods:{makeDirect:function(t){d["a"].setRedirect(d["a"].getAbsPath()),this.$router.push(t)},getTag:function(){return this.getArguments().tag||null},getArguments:function(){return this.$route.query},getPageOffset:function(t){var e=parseInt(this.getArguments().page)||1,n=e+t;return n>0&&n<=this.pages?n:-1},formatDate:function(t){return d["a"].formatDate(t)},shiftPage:function(t){var e=this.getPageOffset(t);-1!==e&&(this.$vuetify.goTo(0),this.$router.push({name:"index",query:{page:e}}))},showToast:function(t,e){return d["a"].showToast.call(this,t,e)},changeToast:function(t){this.toast.show=t},getPostsOnContext:function(t){return t=t||this.getArguments(),this.getPosts(t.page,!1,t.tag)},getPosts:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;t=t||1,this.posts=[];var a={page:t,limit:6};r?(this.windowTitle="".concat(this.meta.title," - Tag: ").concat(r),this.realTitle=r,this.realSubtitle="Posts for tag: ".concat(r),a.tag=r):(this.realTitle="",this.realSubtitle="",this.windowTitle="".concat(this.meta.title," - #").concat(t)),d["a"].fetchJSON(d["a"].apiFor("posts"),"GET",a).then((function(r){r.valid||!e.userData||n||d["a"].refreshToken().then((function(n){e.userData=n,e.getPosts(t,!0)})).catch((function(t){e.showToast(t,"warning"),e.userData=null,d["a"].removeLoginData()})),r.total||d["a"].fetchJSONWithSuccess(d["a"].apiFor("firstrun")).then((function(t){e.$router.push({name:"helloWorld"})})),e.posts=r.data.map((function(t){return t.deleted=!1,t})),e.pages=parseInt(r.pages),e.currentPage=parseInt(t),e.nextPage=e.getPageOffset(1),e.prevPage=e.getPageOffset(-1),e.$emit("roselia-load")})).catch((function(t){console.log(t)}))},getRoute:function(t){return t=Object(h["b"])(t),t.displayId?{name:"postWithEternalLink",params:{postLink:t.displayId}}:{name:"post",query:{p:t.id}}}},mounted:function(){this.getPostsOnContext(),Object(m["d"])({"Utilities.ShowNext":function(){-1!==this.nextPage?this.showToast("Taking you to the next page..."):this.showToast("No more pages...","error"),this.shiftPage(1)},"Utilities.ShowPrevious":function(){-1!==this.prevPage?this.showToast("Taking you to the previous page..."):this.showToast("No more pages...","error"),this.shiftPage(-1)}},this)},computed:{},watch:{userData:function(){this.pages&&this.getPosts()},currentPage:function(t){this.$router.push(p({},this.$route,{query:p({},this.$route.query,{page:1===t?void 0:t})}))}},beforeRouteUpdate:function(t,e,n){this.$vuetify.goTo(0);var r=t.query;this.getPostsOnContext(r),n()},destroyed:function(){Object(m["c"])()}},g=v,b=(n("431e"),n("2877")),y=n("6544"),w=n.n(y),k=n("8212"),D=n("8336"),O=n("b0af"),x=n("99d9"),C=n("cc20"),_=n("62ad"),j=n("a523"),T=n("132d"),P=n("adda"),S=n("a722"),L=n("891e"),E=n("8b9c"),A=n("0fd9"),$=n("3129"),V=n("2fa4"),M=Object(b["a"])(g,c,u,!1,null,"0743118b",null),I=M.exports;w()(M,{VAvatar:k["a"],VBtn:D["a"],VCard:O["a"],VCardActions:x["a"],VCardTitle:x["c"],VChip:C["a"],VCol:_["a"],VContainer:j["a"],VIcon:T["a"],VImg:P["a"],VLayout:S["a"],VPagination:L["a"],VParallax:E["a"],VRow:A["a"],VSkeletonLoader:$["a"],VSpacer:V["a"]});var N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"post"}},[n("nav-bar",{attrs:{userData:t.userData,route:t.$route.fullPath}}),t.postData.img?n("v-parallax",{class:{"blur-image":t.extraDisplaySettings.blurMainImage,"blur-image-transition":!0},attrs:{id:"main-pic",dark:"",src:t.postData.img||t.config.images.postBannerImage}},[t.extraDisplaySettings.metaBelowImage?t._e():n("v-row",{class:t.titleClass,attrs:{align:"center",column:"",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h1",{staticClass:"display-2 font-weight-thin mb-3",attrs:{id:"title"}},[t._v(t._s(t.postData.title))]),n("h4",{staticClass:"subtitle-1",attrs:{id:"subtitle"}},[t._v(t._s(t.postData.subtitle))]),n("h4",{staticClass:"subtitle-1",attrs:{id:"date"}},[t._v(t._s(t.formatDate(t.postData.created)||t.postData.date))]),n("h4",{staticClass:"subtitle-2",attrs:{id:"author"}},[t._v(t._s(t.postData.author.nickname))])])],1)],1):t._e(),!t.postData.img||t.extraDisplaySettings.metaBelowImage?n("v-container",[n("v-row",{attrs:{align:"center",column:"",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h1",{staticClass:"display-3 font-weight-thin mb-3",attrs:{id:"title"}},[t._v(t._s(t.postData.title))]),n("h2",{staticClass:"subtitle-1",attrs:{id:"subtitle"}},[t._v(t._s(t.postData.subtitle))]),n("h4",{staticClass:"subtitle-1",attrs:{id:"date"}},[t._v(t._s(t.formatDate(t.postData.created)||t.postData.date))]),n("h4",{staticClass:"subtitle-2",attrs:{id:"author"}},[t._v(t._s(t.postData.author.nickname))])])],1)],1):t._e(),n("v-container",{staticClass:"fill-height",attrs:{"grid-list-md":"",fluid:""}},[n("v-row",[n("v-col",{attrs:{wrap:"",cols:"12",sm:"10","offset-sm":"2"}},[n("v-row",[t._l(t.postData.tags,(function(e){return n("router-link",{key:e,attrs:{to:{name:"index",params:{tag:e},query:{tag:e}}}},[n("v-chip",{staticClass:"ma-1"},[t._v(t._s(e))])],1)})),t.postData.secret?n("v-chip",{staticClass:"ma-1",attrs:{color:"success","text-color":"white"}},[n("v-avatar",{staticClass:"success",attrs:{left:""}},[n("v-icon",[t._v("lock")]),t._v(t._s(t.postData.secret)+" ")],1),t._v(" Secret ")],1):t._e(),-1===t.postData.id?n("v-chip",{staticClass:"ma-1",attrs:{color:"warning","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("error")])],1),t._v(" 404 ")],1):t._e(),t.postData.hidden?n("v-chip",{staticClass:"ma-1",attrs:{color:"grey","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("visibility_off")])],1),t._v(" Hidden ")],1):t._e()],2),n("v-col",{attrs:{cols:"12",md:"10"}},[n("v-row",[t.cachedData?n("v-btn",{attrs:{color:"secondary",fab:"",small:""},on:{click:function(e){return t.$router.go(-1)}}},[n("v-icon",[t._v("arrow_back")])],1):t._e(),n("v-spacer"),"preview"!==t.postData.id&&-1!==t.postData.id&&t.isEditable?n("div",[n("v-btn",{staticClass:"ma-3",attrs:{color:"error",fab:"",small:"",to:{name:"edit",params:{deletePost:!0,title:t.postData.title},query:{post:t.postData.id}}}},[n("v-icon",[t._v("delete")])],1),n("v-btn",{staticClass:"ma-3",attrs:{color:"primary",fab:"",small:"",to:{name:"edit",query:{post:t.postData.id}}}},[n("v-icon",[t._v("mode_edit")])],1)],1):t._e(),t.isPostFound&&!t.isShared?n("v-btn",{staticClass:"ma-3",attrs:{fab:"",small:"",color:"secondary"},on:{click:t.sharePost}},[n("v-icon",[t._v("share")])],1):t._e()],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},["preview"===t.postData.id&&!t.postData.serverRendered&&t.postData.markdownContent?n("v-alert",{attrs:{border:"left",prominent:"","colored-border":"",type:"info",elevation:"2"}},[n("v-row",{attrs:{align:"center"}},[n("v-col",[t._v(" This page is rendered by your browser. "),n("v-btn",{attrs:{loading:t.loading},on:{click:t.renderPreviewByServer}},[t._v("Render it via server")])],1)],1)],1):t._e()],1)],1)],1),n("v-row",[n("v-col",{attrs:{sm:t.hasDigest?8:10}},[n("div",{ref:"content",staticClass:"flow-text responsive-img",attrs:{id:"content"}},[t.rsRendered?n("div",{ref:"rhodonite"}):n("div",{domProps:{innerHTML:t._s(t.postData.content)}})]),t.postData.id<0?n("div",{staticClass:"flow-text"},[n("p",[t._v("Oops, we can not show you the post.")]),n("p",[n("strong",[t._v("This may because:")])]),n("ol",[n("li",[t._v("Your post ID is invalid.")]),n("li",[t._v("This post is secret"),t.userData?n("strong",[t._v(" and even beyond your permission level")]):t._e(),t._v(".")]),t.userData&&t.isTokenExpired?n("li",{staticClass:"warning--text"},[n("v-icon",{attrs:{color:"warning"}},[t._v("warning")]),t._v("Your session is expired.")],1):t._e(),n("li",[t._v("Your network condition is poor.")])]),n("p",[n("strong",[t._v("All you need to do is check your input, refresh your token or try to login again.")])])]):t._e()]),t.hasDigest?n("v-col",{attrs:{sm:"2"}},[n("blog-digest-nav",{attrs:{items:t.postDigest,offset:"500",threshold:"500"}})],1):t._e()],1),n("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.postData.title,expression:"postData.title"}]})],1)],1)],1),t.postData.author?n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{justify:"center"}},[t.postData.author.avatar?n("div",[n("v-avatar",{staticClass:"elevation-7"},[n("v-img",{attrs:{src:t.postData.author.avatar,alt:t.postData.author.username}})],1)],1):t._e(),t.postData.author&&t.postData.author.username?n("div",[n("router-link",{attrs:{to:{name:"userTimeline",params:{username:t.postData.author.username}}}},[n("v-chip",[t._v(" @"+t._s(t.postData.author.username)+" ("+t._s(t.postData.author.nickname)+") ")])],1)],1):t._e()])],1):t._e(),n("v-container",[n("div",{staticClass:"text-center"},[n("h4",{staticClass:"subtitle-1 grey--text"},[t._v("Last edit at: "+t._s(t.formatDate(t.postData.lastEdit,!0)))])])]),n("v-container",[n("v-col",{attrs:{cols:"12",sm:"10","offset-sm":"1"}},[n("v-row",[-1!==t.postData.next?n("v-btn",{attrs:{color:"primary",fab:!t.nextMeta||!t.shouldDisplayAdjacentMeta,rounded:!!t.nextMeta,small:!t.nextMeta||!t.shouldDisplayAdjacentMeta,to:{name:"post",query:{p:t.postData.next}}}},[n("v-icon",[t._v("chevron_left")]),t._v(t._s(t.shouldDisplayAdjacentMeta&&t.nextMeta?t.nextMeta.title:"")+" ")],1):t._e(),n("v-spacer"),-1!==t.postData.prev?n("v-btn",{attrs:{color:"primary",fab:!t.prevMeta||!t.shouldDisplayAdjacentMeta,rounded:!!t.prevMeta,small:!t.prevMeta||!t.shouldDisplayAdjacentMeta,to:{name:"post",query:{p:t.postData.prev}}}},[t._v(" "+t._s(t.shouldDisplayAdjacentMeta&&t.prevMeta?t.prevMeta.title:"")),n("v-icon",[t._v("chevron_right")])],1):t._e()],1)],1),t.isPostFound?n("blog-comments",{attrs:{userData:t.userData,postData:t.postData,toast:t.showToast,renderer:t.renderer}}):t._e()],1),n("v-slide-x-transition",[n("v-menu",{attrs:{"offset-y":"","position-x":t.preview.x,"position-y":t.preview.y},model:{value:t.preview.show,callback:function(e){t.$set(t.preview,"show",e)},expression:"preview.show"}},[n("v-card",{attrs:{color:t.preview.color,dark:"",width:"300"}},[t.preview.img?n("v-img",{attrs:{src:t.preview.img}}):t._e(),n("v-card-text",[t.preview.loading?t._e():n("div",[n("h1",{staticClass:"title"},[n("strong",[t._v(t._s(t.preview.title))])]),n("v-spacer"),n("h6",{staticClass:"subtitle-1 text-truncate"},[t._v(t._s(t.preview.subtitle))])],1),t.preview.loading?n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}):t._e()],1)],1)],1)],1),n("toast",{attrs:{color:t.toast.color,text:t.toast.text},on:{showChange:t.changeToast},model:{value:t.toast.show,callback:function(e){t.$set(t.toast,"show",e)},expression:"toast.show"}}),n("blog-footer"),n("GlobalEvents",{on:{mousemove:t.mouseMoveHandler}}),n("v-dialog",{attrs:{width:"500"},model:{value:t.share.open,callback:function(e){t.$set(t.share,"open",e)},expression:"share.open"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary",attrs:{"primary-title":""}},[t._v(" Share "+t._s(t.postData.title)+" ")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Address",outlined:"",value:t.sharePath,readonly:""}}),n("a",{attrs:{href:t.sharePath}},[t._v("Shared_"+t._s(t.postData.title))]),t._v(" <- Right click and copy link. "),n("p",[t._v("This post will be visible regardless of the user privileges.")])],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"accent",text:""},on:{click:function(e){t.share.open=!1}}},[t._v(" Done ")])],1)],1)],1)],1)},R=[],F=(n("a630"),n("c975"),n("0d03"),n("b0c0"),n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("96cf"),n("89ba")),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"digestNav",staticClass:"hide-on-small-only pushpin",attrs:{id:"digest-nav"}},[n("ul",{staticClass:"section table-of-contents"},t._l(t.items,(function(e){var r=e.hash,a=e.title;return n("li",{key:r},[n("a",{attrs:{href:"#"+r,to:{hash:r,query:t.$route.query}}},[t._v(t._s(a))])])})),0)])},B=[],q=n("4d5c"),H=n.n(q),J={name:"blog-digest-nav",data:function(){return{}},props:{items:Array},methods:{onCreate:function(){var t=this;this.$nextTick((function(e){return t.processDigest()}))},processDigest:function(){var t=document.querySelectorAll(".scrollspy"),e=document.getElementById("content");this.instance=H.a.ScrollSpy.init(t),H.a.Pushpin.init(document.querySelectorAll(".pushpin"),{top:e.offsetTop,offset:150,bottom:e.offsetHeight+e.offsetTop-this.$refs.digestNav.offsetHeight})},getInstance:function(){return H.a.ScrollSpy.getInstance(this.targetElements())}},computed:{targetElements:function(){return this.items.map((function(t){return t.element}))}},mounted:function(){this.onCreate()},destroyed:function(){this.getInstance().destroy()},watch:{items:function(){this.onCreate()}}},W=J,Y=(n("6f7b"),n("d8a3"),Object(b["a"])(W,U,B,!1,null,"17e11266",null)),z=Y.exports,G=(n("e01a"),n("81b8"),n("a15b"),n("4ec9"),n("dca8"),n("e21d"),n("5d41"),n("6062"),n("8a79"),n("1276"),n("2ca0"),n("498a"),n("10d1"),n("ddb0"),n("9f12")),Z=n("53fe"),X=n("bf2d"),K=n("e587"),Q=n("2ef0"),tt=n("6196"),et=function t(e,n){Object(G["a"])(this,t),this.template=e,this.returnValue=n},nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:"",justify:"center"}},[n("v-dialog",{attrs:{width:"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v(t._s(t.title))]),n("v-card-text",[t._v(" "+t._s(t.message)+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:t.commitReject}},[t._v(" Disagree ")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.commitConfirm}},[t._v(" Agree ")])],1)],1)],1)],1)},rt=[],at=n("8b83"),ot=n("c65a"),it=n("c03e"),st=n("9ab4"),ct=n("60a3"),ut=function(t){function e(){var t;return Object(G["a"])(this,e),t=Object(at["a"])(this,Object(ot["a"])(e).apply(this,arguments)),t.dialog=!0,t.isConfirmed=!1,t}return Object(it["a"])(e,t),Object(Z["a"])(e,[{key:"onDialogChanged",value:function(t,e){e||(this.isConfirmed||this.onReject(),this.$destroy(),this.cleanUp&&this.cleanUp())}},{key:"commitConfirm",value:function(){this.isConfirmed=!0,this.onConfirm(),this.dialog=!1}},{key:"commitReject",value:function(){this.isConfirmed=!1,this.onReject(),this.dialog=!1}}]),e}(ct["c"]);st["a"]([Object(ct["b"])(Function)],ut.prototype,"onConfirm",void 0),st["a"]([Object(ct["b"])(Function)],ut.prototype,"onReject",void 0),st["a"]([Object(ct["b"])(Function)],ut.prototype,"cleanUp",void 0),st["a"]([Object(ct["b"])(String)],ut.prototype,"title",void 0),st["a"]([Object(ct["b"])(String)],ut.prototype,"message",void 0),st["a"]([Object(ct["d"])("dialog")],ut.prototype,"onDialogChanged",null),ut=st["a"]([ct["a"]],ut);var lt=ut,dt=lt,ht=n("169a"),mt=Object(b["a"])(dt,nt,rt,!1,null,null,null),ft=mt.exports;w()(mt,{VBtn:D["a"],VCard:O["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VDialog:ht["a"],VLayout:S["a"],VSpacer:V["a"]});var pt=function(t,e){return new r["default"]({render:function(e){return e(ft,{props:t})}}).$mount(e)};function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(n,!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bt(t){if(!window.APlayer){var e=document.createElement("script"),n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.css",e.async=!0,e.onload=t||null,e.src="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.js",document.head.appendChild(n),document.body.appendChild(e)}}function yt(t){var e=document.createElement("div");return e.innerHTML=t.replace(/<em>(.*?)<\/em>/,(function(t,e){return"*".concat(e,"*")})),e.innerText||e.textContent}function wt(t){return t instanceof Array?t.map(wt).join(""):(t instanceof et&&(t=t.template),t instanceof HTMLElement?t.outerHTML:Q["isNumber"](t)||Q["isString"](t)?t:"")}function kt(t,e,n){return t.replace(new RegExp((e||["{{","}}"]).join("\\s*?(([\\s\\S]+?))\\s*?"),"gm"),n)}function Dt(t,e,n){var r=function(t){return"with(data) { with(functions) {return (".concat(t,");}}")},a=function(t){if(!s["a"].enableRoseliaScript)return"<pre><code>".concat(t,"</code></pre>");try{var n,a=/([a-zA-Z_$]+[a-zA-Z_0-9]*){([\s\S]+)}/.exec(t),o=!1;if(a){var i=Object(K["a"])(a,3),c=(i[0],i[1]),u=i[2],l=e[c]||e.functions[c];Q["isFunction"](l)&&(n=l(yt(u)),o=!0)}return o||(t=yt(t),n=new Function("data",r(t)).call(null,e)),wt(n)}catch(d){return console.log("On rendering:",t),console.error(d),t}};return kt(t,n,(function(t,e){var n=e.trim(),r=!n.endsWith(";"),o=r?n:n.substring(0,n.length-1),i=a(o);return r?i:""}))}function Ot(t,e){var n=new WeakMap,r=new Set(e),a={get:function(t,e){if(r.has(e))return null;var a=Reflect.get(t,e);return Q["isFunction"](a)?(n.has(a)||n.set(a,a.bind(t)),n.get(a)):a}};return new Proxy(t,a)}function xt(t){return new Proxy(t,{has:function(t,e){return!0},get:function(t,e){if(e!==Symbol.unscopables)return Reflect.get(t,e)}})}function Ct(t,e){var n=new Set(e);return[n,new Proxy(t,{get:function(t,e){return n.has(e)?null:Reflect.get(t,e)}})]}function _t(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Proxy(t,{get:function(t,n){var r=Reflect.get(t,n);return e&&"object"===Object(X["a"])(r)?_t(r):r},set:function(t,e){return!1},deleteProperty:function(){return!1}})}function jt(t){var e=gt({},t);return Object.keys(e).forEach((function(t){e.hasOwnProperty(t)&&"object"===Object(X["a"])(e[t])&&!Object.isFrozen(e[t])&&(e[t]=jt(e[t]))})),Object.freeze(e)}var Tt=Symbol("yukina"),Pt=gt({},s["a"].theme),St=function(){function t(e){Object(G["a"])(this,t),this.app=e,this.scriptEvaluator=new Lt(e);var n=Ct(_t(xt(Ot(this.scriptEvaluator,["app"]))),[]),r=Object(K["a"])(n,2),a=r[0],o=r[1];this.context=o,this.hiddenFields=a}return Object(Z["a"])(t,[{key:"render",value:function(e){this.scriptEvaluator.pendingFunctions=[];try{this.toInject=this.app;var n=Dt(e,this.context,t.roseliaScriptDelim);return n}catch(r){return console.error(r),e}}},{key:"cleanScript",value:function(e){return kt(e,t.roseliaScriptDelim,(function(t){return""}))}},{key:"renderAsync",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return t(n.render(e))})).then((function(t){return t})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderVue",value:function(t){var e=this,n=this.scriptEvaluator.randomID(),a=new r["default"]({template:'<div id="'.concat(n,'">')+this.render(t)+"</div>",data:this.scriptEvaluator.functions,delimiters:["v{{","}}"]});return this.toInject=a,Object.defineProperty(a,"autoInject",{value:function(){a.$mount(document.getElementById(n)),a.$nextTick((function(){return e.injectEvents()}))}}),a}},{key:"renderVueAsync",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return t(n.renderVue(e))})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"injectEvents",value:function(){this.scriptEvaluator.injectEventsOn(this.toInject)}},{key:"pushContext",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"context";return this.scriptEvaluator.def(n,t),function(){e.scriptEvaluator.undef(n)}}},{key:"pushMethod",value:function(t,e){var n=this;return this.pushContext((function(){return t(n.context).apply(void 0,arguments)}),e)}},{key:"hideAttributes",value:function(t){var e=this,n=t.filter((function(t){return!e.hiddenFields.has(t)}));return n.forEach((function(t){return e.hiddenFields.add(t)})),function(){return n.forEach((function(t){return e.hiddenFields.delete(t)}))}}},{key:"clearHiddenAttributes",value:function(){this.hiddenFields.clear()}},{key:"enterCommentMode",value:function(){return this.hideAttributes(["changeExtraDisplaySettings","importJS","request","roseliaApi","changeTheme","changeThemeOnce","resetTheme","saveCurrentTheme","switchToColorMode","forceSwitchToColorMode","resetColorMode","previewColor","undef","def"])}}]),t}();St.roseliaScriptDelim=["(?:Roselia|roselia|r|R){{","}}"];var Lt=function(){function t(e){var n=this;Object(G["a"])(this,t),this.Y=function(t){return function(t){return t(t)}((function(e){return t((function(t){return e(e)(t)}))}))},this.request={get:function(t,e){return n.askForAccess("fetch","This post would like to fetch data","It wants to access ".concat(t,".")).then((function(){return tt["a"].get(t,{params:e}).then((function(t){return t.data}))}))}},this.Math=Math,this.Object=Object,this.app=e,this.customFunctions={app:null},this.functions=Ot(this.customFunctions),this.app.$on("postUnload",(function(){n.customFunctions={app:null},n.functions=Ot(n.customFunctions),n.mounted=!1})),this.askAccess=new Map,this.pendingFunctions=[],this.mounted=!1}return Object(Z["a"])(t,[{key:"then",value:function(t){this.mounted?this.app.$nextTick(t):this.pendingFunctions.push(t)}},{key:"injectEventsOn",value:function(t){this.pendingFunctions.forEach(function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.$nextTick(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.pendingFunctions=[],this.mounted=!0}},{key:"music",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;bt((function(){return e.app.$emit("aPlayerLoaded")}));var a,o=this.randomID();return this.then((function(){var i=function(){var e=document.getElementById(o);a=new window.APlayer({container:e,narrow:!1,autoplay:n,mutex:!0,theme:s["a"].theme.accent,mode:"circulation",showlrc:1,preload:"metadata",audio:t}),a.on("loadstart",(function(){Array.from(e.getElementsByClassName("aplayer-title")).forEach((function(t){t&&(t.style.color=s["a"].theme.secondary)})),r&&r(a)}))};window.APlayer?e.then(i):e.app.$once("aPlayerLoaded",(function(){e.then(i)})),e.app.$once("postUnload",(function(){a.destroy()}))})),new et('<div id="'.concat(o,'"></div>'),a)}},{key:"heimu",value:function(t){var e=this.randomID();return new et('<span class="heimu" id="'.concat(e,'">').concat(t,"</span>"),e)}},{key:"cite",value:function(t,e){return'<a href="post?p='.concat(e,'">').concat(t,"</a>")}},{key:"randomID",value:function(t){return Number(Math.random().toString().substring(3,t)+Date.now()).toString(36)}},{key:"onceLoad",value:function(t){this.app.$once("postLoaded",t)}},{key:"onceUnload",value:function(t){this.app.$once("postUnload",t)}},{key:"extendAttributes",value:function(t,e){this.element(t).then((function(t){Q["merge"](t,e)}))}},{key:"btn",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,a=this.randomID();return n instanceof Array&&(n=n.join(" ")),e&&this.then((function(){document.getElementById(a).addEventListener("click",e)})),r&&this.extendAttributes(a,r),new et('<button id="'.concat(a,'" class="v-btn v-btn--contained v-size--default ').concat(n,'">').concat(t,"</button>"),a)}},{key:"toast",value:function(t,e){this.app.showToast(t,e||"info")}},{key:"formula",value:function(t){return"$ ".concat(t," $")}},{key:"formulation",value:function(t){return"$$ ".concat(t," $$")}},{key:"formulationEscape",value:function(){var t=this,e=[["$$","$$"],["$","$"],["\\(","\\)"]];e.map((function(t){return t.map((function(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")})).join("\\s*(.*?)\\s*")})).map((function(t){return new RegExp(t,"gms")})).forEach((function(e){t.app.postData.content=t.app.postData.content.replace(e,(function(t,e){return yt(e)}))}))}},{key:"importJS",value:function(t,e){var n=document.createElement("script");n.onload=e,n.async=!0,n.src=t,document.body.appendChild(n)}},{key:"def",value:function(t,e){return e instanceof et?(this.customFunctions[t]=e.returnValue,e.template):(this.customFunctions[t]=e,Q["isString"](e)||e instanceof HTMLElement?e:void 0)}},{key:"undef",value:function(t){this.customFunctions[t]=void 0}},{key:"audio",value:function(t){var e=this.randomID();return new et("<audio id='".concat(e,"' src='").concat(t,"' hidden='true'/>"),e)}},{key:"getElement",value:function(t){if(t instanceof HTMLElement&&(t=t.id),t instanceof et&&(t=Q["isString"](t.returnValue)?t.returnValue:t.template),Q["isString"](t)){var e=/id=['"]([a-zA-Z0-9-]+)['"]/.exec(t);e&&(t=e[1])}t instanceof HTMLElement&&(t=t.id);var n=t in this.functions?this.functions[t]:t;return document.getElementById(n instanceof Element?n.id:n)}},{key:"raw",value:function(t){return"<pre>Roselia{{".concat(t,"}}</pre>")}},{key:"previewColor",value:function(t){var e=this,n=this.app.preview.color;this.app.preview.color=t,this.onceUnload((function(){e.app.preview.color=n}))}},{key:"element",value:function(t){var e=this;return new Promise((function(n,r){var a=e.getElement(t);if(a)return n(a);e.then((function(){var a=e.getElement(t);a?n(a):r()}))}))}},{key:"createElement",value:function(t,e){var n=document.createElement(t);return n.id=this.randomID(),e&&this.extendAttributes(n,e),n}},{key:"setPreview",value:function(t,e){var n=this;this.element(t).then((function(t){t.addEventListener("mouseover",(function(r){r.preventDefault(),n.app.preview.show=!0,n.app.preview.attach=t,n.app.preview.cacheData=null,n.app.preview.current=n.app.postData.id,["title","subtitle","img","color"].forEach((function(t){var r=e[t];Q["isNil"](r)||(n.app.preview[t]=r)}))})),t.addEventListener("mouseout",(function(t){t.preventDefault(),n.app.preview.show=!1})),Q["isNil"](e.goTo)||t.addEventListener("click",(function(t){t.preventDefault();try{n.app.$vuetify.goTo(Q["isNumber"](e.goTo)?e.goTo:n.getElement(e.goTo),{offset:-200})}catch(r){Q["isString"](e.goTo)?location.href=e.goTo:n.app.$router.push(e.goTo),console.error(r)}}))}))}},{key:"previewed",value:function(t,e){return this.setPreview(t,e),t}},{key:"doTo",value:function(t,e){return this.element(t).then(e),t}},{key:"icon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e instanceof Array&&(e=e.join(" ")),t.startsWith("fa")){var n=t.split("-"),r=Object(K["a"])(n,2),a=r[0],o=r[1];return'<i aria-hidden="true" class="v-icon '.concat(a," fa-").concat(o," ").concat(e,'"></i>')}return'<i aria-hidden="true" class="v-icon material-icons '.concat(e,'">').concat(t,"</i>")}},{key:"askForAccess",value:function(t,e,n){var r=this;return new Promise((function(a,o){if(r.onceUnload((function(){return r.askAccess.clear()})),r.askAccess.has(t))r.askAccess.get(t)?a():o();else{var i=r.createElement("div");document.getElementById("content").appendChild(i),pt({onConfirm:function(){a(),r.askAccess.set(t,!0)},onReject:function(){o(),r.askAccess.set(t,!1)},cleanUp:function(){document.getElementById("content").removeChild(i)},title:e,message:n},i)}})).then((function(){r.toast("Operation ".concat(t," granted"),"success")})).catch((function(){return r.toast("Operation ".concat(t," rejected"),"error"),Promise.reject(new Error("User rejected"))}))}},{key:"askForToken",value:function(){return this.askForAccess("token","This post wish to access your personal info","This post needs to access your token to make requests.")}},{key:"roseliaApi",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.askForToken();case 2:return e.abrupt("return",d["a"].fetchJSON(d["a"].apiFor.apply(d["a"],n),"GET",r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"nil",value:function(){return null}},{key:"forceChangeTheme",value:function(t,e){e===Tt&&(this.app.$vuetify.theme.setTheme(this.app.$vuetify.theme.dark?"dark":"light",t),Object.assign(this.app.$vuetify.theme.currentTheme,t))}},{key:"currentTheme",value:function(){return gt({},this.app.$vuetify.theme.currentTheme)}},{key:"currentThemePalette",value:function(){var t=this.app.$vuetify.theme.parsedTheme;return jt(t)}},{key:"changeTheme",value:function(t){var e=this;this.askForAccess("theme","This post would like to change your theme","Changes will discard after refresh").then((function(){e.forceChangeTheme(t,Tt),Pt=gt({},Pt,{},t)}))}},{key:"changeThemeOnce",value:function(t){var e=this;this.forceChangeTheme(t,Tt),this.onceUnload((function(){e.forceChangeTheme(Pt,Tt)}))}},{key:"resetTheme",value:function(){this.changeThemeOnce(s["a"].theme)}},{key:"saveCurrentTheme",value:function(){var t=this,e=this.currentTheme();this.askForAccess("theme","This post would like to save your current theme.","Changes will discard after refresh").then((function(){Pt=gt({},Pt,{},e),t.onceUnload((function(){t.forceChangeTheme(e,Tt)}))}))}},{key:"forceSwitchToColorMode",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n===Tt){t.next=3;break}return t.next=3,this.askForAccess("colorMode","This post would like to change your color scheme.","Changes will discard after refresh,");case 3:this.app.$emit("forceSwitchToLight",!!e),this.app.$emit("forceSwitchToDark",!e);case 5:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"switchToColorMode",value:function(t){var e=this;this.forceSwitchToColorMode(t,Tt),this.onceUnload((function(){return e.resetColorMode()}))}},{key:"resetColorMode",value:function(){this.app.$emit("forceSwitchToLight",!1),this.app.$emit("forceSwitchToDark",!1)}},{key:"changeExtraDisplaySettings",value:function(t){this.app.extraDisplaySettings=gt({},this.app.extraDisplaySettings,{},t)}},{key:"log",value:function(){var t;return(t=console).log.apply(t,arguments)}}]),t}(),Et={RoseliaRenderer:St,createRenderer:function(t){return new St(t)}},At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("lazy-component",{attrs:{text:"Load comment"}},[n("v-container",[n("v-col",{attrs:{cols:"12",sm:"8","offset-sm":"2"}},[n("v-badge",[t.commentCount?n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.commentCount))]):t._e(),n("v-icon",[t._v(" mode_comment ")])],1),n("v-divider",{staticClass:"my-3"})],1),t.canAddComment?n("v-col",{attrs:{cols:"12",sm:"8","offset-sm":"2"}},[n("v-row",{attrs:{row:"",wrap:""}},[t.replyToComment?n("v-chip",{attrs:{close:"",color:"secondary",dark:""},on:{"click:close":function(e){t.chip=!1}},model:{value:t.chip,callback:function(e){t.chip=e},expression:"chip"}},[t._v(" @"+t._s(t.atToNickname)+" ")]):t._e(),n("v-spacer"),n("v-btn",{attrs:{color:"accent",icon:""},on:{click:t.switchPreviewMode}},[t.showPreview?n("v-icon",[t._v("mode_edit")]):n("v-icon",[t._v("visibility")])],1)],1),t.showPreview?n("div",[n("recursive-comment",{ref:"previewComment",attrs:{comments:[t.currentCommentObject],canAddComment:!1,canDeleteComment:function(){return!1},myUsername:t.userData&&t.userData.username}})],1):n("v-textarea",{ref:"commentText",attrs:{"auto-grow":"",outlined:"",placeholder:t.commentPlaceholer,color:"primary",label:"Leave a comment"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),n("v-row",{attrs:{row:"",wrap:""}},[n("v-col",{attrs:{cols:"4"}},[t.userData&&t.userData.nickname?n("span",[t._v(t._s(t.userData.nickname))]):n("v-text-field",{attrs:{small:"",label:"Nickname"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),n("v-spacer"),n("v-col",{attrs:{cols:"3",md:"2",lg:"1"}},[n("v-btn",{attrs:{color:"primary",disabled:!this.isValid,loading:t.loading,rounded:""},on:{click:t.addComment}},[n("v-icon",[t._v("send")])],1)],1)],1)],1):t._e(),n("recursive-comment",{ref:"comments",attrs:{comments:t.recursiveCommentList,canAddComment:t.canAddComment,canDeleteComment:t.canDeleteComment,postAuthorUsername:t.postData.author&&t.postData.author.username,myUsername:t.userData&&t.userData.username},on:{"delete-comment":function(e){t.commentToDelete.id=e,t.commentToDelete.show=!0},"reply-comment":t.onReplyComment}}),n("v-row",{attrs:{align:"center",column:"",justify:"center",dense:""}},[n("v-col",{staticClass:"text-center",attrs:{cols:"2"}},[n("v-chip",{staticClass:"white--text ml-0 center-align",attrs:{color:"secondary",small:""},on:{click:function(e){return t.$vuetify.goTo(t.$refs.commentText)}}},[n("v-icon",[t._v("add_comment")])],1),t.currentPage<t.totalPages?n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.loadNextPage,expression:"loadNextPage"}]},[n("v-btn",{attrs:{loading:t.loading,small:"",block:"",color:"secondary",dark:""},on:{click:t.loadNextPage}},[n("v-icon",[t._v("keyboard_arrow_down")])],1)],1):t.loading?n("div",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):n("div",[n("v-divider"),t._v(" Tiro Finale ")],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500",scrollable:""},model:{value:t.commentToDelete.show,callback:function(e){t.$set(t.commentToDelete,"show",e)},expression:"commentToDelete.show"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v("Are you sure?")]),n("v-divider"),n("v-card-text",[t._v(" You are deleting this comment: "),n("br"),n("recursive-comment",{attrs:{comments:t.commentToDeleteList,canAddComment:!1,canDeleteComment:function(){return!1}}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info",text:""},on:{click:function(e){t.commentToDelete.show=!1}}},[t._v(" No ")]),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(){t.deleteComment(t.commentToDelete.id),t.commentToDelete.show=!1,t.commentToDelete.id=0}}},[t._v(" Yes, delete"),n("v-icon",[t._v("delete")])],1)],1)],1)],1)],1)},$t=[],Vt=(n("13d5"),n("45fc"),n("4e827"),n("4fad"),n("7ed3"),n("2f62")),Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.visible?n("div",[t._t("default")],2):n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.setVisible,expression:"setVisible"}]},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-btn",{on:{click:t.setVisible}},[t._v(t._s(this.text))])],1)],1)])},It=[],Nt={props:["text"],name:"lazy-component",data:function(){return{visible:!1}},methods:{setVisible:function(){this.visible=!0}}},Rt=Nt,Ft=Object(b["a"])(Rt,Mt,It,!1,null,null,null),Ut=Ft.exports;w()(Ft,{VBtn:D["a"],VRow:A["a"]});var Bt=n("45ea"),qt=n("ebfb"),Ht=n.n(qt);function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(n,!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yt={components:{lazyComponent:Ut,recursiveComment:Bt["a"]},props:["userData","postData","toast","renderer"],name:"blog-comment",data:function(){return{visible:!1,chip:!1,comment:"",nickname:"",commentLeft:!1,loading:!1,currentPage:0,totalPages:1,commentCount:0,commentList:[],replyToComment:void 0,hasUnsavedDraft:!1,commentToDelete:{id:0,show:!1},removeTokens:{},cachedDraft:{},userMeta:{},userMetaLoaded:!1,showPreview:!1}},methods:Wt({},Object(Vt["b"])(["setCommentDraft","removeCommentDraft"]),{getCommentDraft:function(t){return this.$store.state.commentDraft[t]},setVisible:function(){this.visible=!0},formatDate:function(t){return d["a"].formatDate(t)},hightlightLanguage:function(){window.hljs&&(window.hljs.initHighlighting.called=!1,window.hljs.initHighlighting())},addComment:function(){var t=this;this.loading=!0,d["a"].fetchJSONWithSuccess(d["a"].apiFor("comment","add"),"POST",this.addPostForm).then(h["b"]).then((function(e){t.toast("Well, you placed a comment!","success"),t.loading=!1,t.removeTokens[e.commentId]=e.removeToken,t.cachedDraft[e.commentId]={nickname:t.nickname,comment:t.comment,replyTo:t.replyToComment},t.removeCommentDraft(t.postData.id),t.cleanUp(),t.loadNextPage()})).catch((function(e){t.toast(e,"error"),t.loading=!1}))},cleanUp:function(){this.currentPage=0,this.totalPages=1,this.commentCount=0,this.commentList=[],this.comment="",this.replyToComment=void 0,this.commentLeft=!1,this.showPreview=!1},deleteComment:function(t){var e=this;d["a"].fetchJSONWithSuccess(d["a"].apiFor("comment","delete"),"POST",Object(h["c"])({comment:t,removeToken:this.removeTokens[t]})).then((function(n){if(e.commentList=e.commentList.filter((function(e){return e.id!==t})),--e.commentCount,e.removeTokens[t]=void 0,e.cachedDraft[t]){var r=e.cachedDraft[t],a=r.nickname,o=r.comment,i=r.replyTo;e.comment||(e.nickname=a,e.comment=o,e.replyToComment=i),e.cachedDraft[t]=void 0}})).catch((function(t){e.toast("Oops! Failed.","error")}))},onReplyComment:function(t){this.replyToComment=t},canDeleteComment:function(t){return!!this.removeTokens[t.id]||!!this.isLoggedIn&&(!t.author||(t.author.username==this.userData.username||(t.author.role?t.author.role<=this.userData.role:!!this.userData)))},loadNextPage:function(){var t=this;this.loading||this.currentPage>=this.totalPages||(this.loading=!0,d["a"].fetchJSON(d["a"].apiFor("comment","comments"),"GET",{p:this.postData.id,page:this.currentPage+1,limit:10}).then((function(t){return t.success?t:Promise.reject("Invalid postid")})).then((function(e){t.commentList=t.commentList.concat(e.result.map(h["b"]).map((function(t){return Wt({},t,{showReply:!1})}))),t.totalPages=e.pages,t.commentCount=e.total,++t.currentPage,t.loading=!1,t.renderScript(),t.$nextTick((function(){t.processComments(),t.hasUnsavedDraft=!1}))})).catch((function(e){t.toast(e,"error"),t.loading=!1})))},getComment:function(t){return this.commentDict[t]},getCommentOrNotFound:function(t){var e=this.getComment(t);return e||(this.loadNextPage(),{id:0,nickname:"Anoymous",content:"This comment is gone.",createdAt:new Date})},getCommentNickname:function(t){return t.nickname||Object(h["e"])("author","nickname")(t)},processComments:function(t){var e=this,n=t||this.$refs.comments.$el||this.$refs.comments,r=Array.from(n.querySelectorAll("a")).filter((function(t){return!!t.href})),a=["mohuety.com","roselia.moe","roselia.xyz","lisa.moe","d4dj.moe"].map((function(t){return new RegExp(t)}));r.filter((function(t){return!t.getAttribute("roselia-prevented")})).filter((function(t){return t.host!==location.host&&!a.some((function(e){return e.exec(t.host)}))})).forEach(function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.setAttribute("roselia-prevented",!0),n.addEventListener("click",(function(t){t.preventDefault(),e.renderer.context.askForAccess(n.host,"This link wish to visit an unknown host ".concat(n.host),"The link is ".concat(n.href," please make sure it is safe.")).then((function(){window.open(n.href)}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var o=n.querySelectorAll("img"),i=Array.from(o);i.forEach((function(t){t.classList.add("responsive-img")})),H.a.Materialbox.init(o),this.hightlightLanguage()},renderScript:function(){var t=this,e=this.renderer.enterCommentMode();this.commentList.filter((function(t){return t.author})).filter((function(t){return!t.rendered})).forEach((function(e){t.forceRenderScript(e)})),e()},forceRenderScript:function(t){Object.defineProperty(t,"id",{value:t.id,writable:!1}),t.author=new Proxy(t.author,{set:function(t,e,n){if("role"!==e)return Reflect.set(t,e,n)}});var e=this.renderer.pushContext(t,"comment");t.cleanedContent=this.renderer.cleanScript(t.content);var n=this.renderer.render(t.content);t.content=n,t.rendered=!0,this.renderer.injectEvents(),e()},onExit:function(t){this.hasUnsavedDraft&&this.setCommentDraft({commentId:t||this.postData.id,comment:{comment:this.comment,nickname:this.nickname}})},loadDraft:function(t){var e=this.getCommentDraft(t||this.postData.id);e&&(this.comment=e.comment||this.comment,this.nickname=e.nickname||this.nickname)},ensureUserMeta:function(){var t=this;this.userData||(this.userMetaLoaded=!1,this.userMeta={}),this.userMetaLoaded&&this.userMeta.username===this.userData.username||(this.userMetaLoaded=!1,d["a"].fetchJSONWithSuccess(d["a"].apiFor("user","user-meta"),"GET",{username:this.userData.username}).then((function(e){t.userMeta=Object(h["b"])(e),t.userMetaLoaded=!0,t.showPreview&&(t.showPreview=!1,t.$nextTick((function(){t.showPreview=!0})))})).catch((function(t){})))},switchPreviewMode:function(){var t=this;this.showPreview=!this.showPreview,this.showPreview&&(this.ensureUserMeta(),this.$nextTick((function(){t.processComments(t.$refs.previewComment.$el||t.$refs.previewComment)})))},highlightLanguage:function(){window.hljs&&(window.hljs.initHighlighting.called=!1,window.hljs.initHighlighting())}}),computed:{commentPlaceholer:function(){return this.commentLeft?"It is fine to keep silent, dear ".concat(this.currentNickname,"."):"Say something."},currentNickname:function(){return this.userData&&this.userData.nickname||this.nickname},isValid:function(){return this.comment&&this.currentNickname},isLoggedIn:function(){return!!this.userData},addPostForm:function(){return Object(h["c"])({toPost:this.postData.id,content:this.comment,nickname:this.isLoggedIn?void 0:this.currentNickname,toComment:this.replyToComment||void 0})},canAddComment:function(){return!(!this.userData&&!this.postData.enableComment)},commentDict:function(){return this.commentList.reduce((function(t,e){return Wt({},t,Object(l["a"])({},e.id,e))}),{})},atToNickname:function(){var t=this.getComment(this.replyToComment);return t&&this.getCommentNickname(t)},recursiveCommentList:function(){var t=this,e=this.commentDict,n=this.commentList.filter((function(t){return!t.replyTo})).concat(this.commentList.filter((function(t){return t.replyTo})).filter((function(t){return!e[t.replyTo]})).map((function(n){var r=Wt({},t.getCommentOrNotFound(n.replyTo),{id:n.replyTo});return e[n.replyTo]=r})));return Object.entries(e).forEach((function(t){var n=Object(K["a"])(t,2),r=n[0],a=n[1];e[r]=Wt({},a,{replies:[]})})),this.commentList.forEach((function(t){t.replyTo&&e[t.replyTo].replies.push(e[t.id])})),n.sort((function(t,e){return e.id-t.id})),n.map((function(t){return e[t.id]}))},commentToDeleteList:function(){return[Wt({},this.commentDict[this.commentToDelete.id],{replies:[]})]},currentCommentObject:function(){var t=function(t){return Ht.a.prototype.markdown(t)},e={content:t(this.comment),color:"",createdAt:new Date,replies:[],author:this.userData?Wt({},this.userMetaLoaded?this.userMeta:this.userData):void 0,nickname:this.userData?void 0:this.nickname,id:0};return this.showPreview&&this.userData&&this.forceRenderScript(e),e}},watch:{comment:function(){this.commentLeft=!0,this.hasUnsavedDraft=!0},replyToComment:function(t){t&&(this.$vuetify.goTo(this.$refs.commentText),this.chip=!0)},chip:function(t){t||(this.$vuetify.goTo("#comment-"+this.replyToComment),this.replyToComment=void 0)},postData:function(t,e){this.onExit(e.id),this.cleanUp(),this.loadDraft(t.id)},userData:function(){this.ensureUserMeta()}},mounted:function(){this.loadDraft()},beforeDestroy:function(){this.onExit()}},zt=Yt,Gt=n("4ca6"),Zt=n("ce7e"),Xt=n("490a"),Kt=n("8654"),Qt=n("a844"),te=Object(b["a"])(zt,At,$t,!1,null,null,null),ee=te.exports;w()(te,{VBadge:Gt["a"],VBtn:D["a"],VCard:O["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VChip:C["a"],VCol:_["a"],VContainer:j["a"],VDialog:ht["a"],VDivider:Zt["a"],VIcon:T["a"],VProgressCircular:Xt["a"],VRow:A["a"],VSpacer:V["a"],VTextField:Kt["a"],VTextarea:Qt["a"]});var ne=n("17d3");function re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?re(n,!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var oe={metaBelowImage:!1,blurMainImage:!1,disableSideNavigation:!1},ie={components:{BlogDigestNav:z,BlogComments:ee,GlobalEvents:ne["a"]},name:"blog-post",props:{p:Number,currentColorScheme:Boolean,userData:Object},data:function(){return{postData:{img:"",id:0,displayId:"",content:"<p>Loading, please wait...</p>",author:{nickname:""},darkTitle:!1,next:-1,prev:-1,secret:0,title:"Loading...",subtitle:"",tags:[""],date:(new Date).toDateString()},postDigest:[],preview:{show:!1,loading:!1,current:0,title:"",subtitle:"",attach:"",origin:"center center",img:"",cacheData:null,color:"secondary",x:0,y:0},cachedData:!1,renderer:null,toast:d["a"].getToastOption(),rsRendered:!1,share:{open:!1,shareId:""},extraDisplaySettings:ae({},oe),loading:!1,nextMeta:null,prevMeta:null}},methods:{showToast:function(t,e){return d["a"].showToast.call(this,t,e)},changeToast:function(t){this.toast.show=t},getArguments:function(){return this.$route.query},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d["a"].formatDate(t,e)},loadContent:function(t,e){var n=this;if(t=t||this.getPostNum(),e=e||this.$route,e&&e.params.data){var r=e.params.data;if("preview"===r.id||r.id==t)return this.postData=ae({},this.notFoundData(),{},r),this.cachedData=!0,void this.processContent()}var a="post"!==e.name;a&&(t=e.params.postLink),this.cachedData=!1,-1!==t?(this.loading=!0,d["a"].fetchJSON(d["a"].apiFor(a?"post-link":"post",t)).then((function(t){return n.loading=!1,t?(n.postData=Object(h["b"])(t),n.processContent()):Promise.reject(ReferenceError("NPE"))})).catch((function(t){n.loading=!1,n.postData=n.notFoundData()}))):this.postData=this.notFoundData()},processContent:function(){var t=this;this.resetExtraDisplaySettings(),this.postData.displayId&&(this.$route.params.changeRoute||this.$route.query.p&&!this.isShared)&&this.$router.replace({name:"postWithEternalLink",params:{postLink:this.postData.displayId,doNotLoad:!0}}),Object.defineProperty(this.postData,"id",{value:this.postData.id,writable:!1});var e=this.renderer.pushContext(this.postData,"post");this.renderer.renderAsync(this.postData.content).then((function(n){t.postData.content=n,t.$nextTick((function(){t.renderer.injectEvents(),e()}))})).then((function(){return t.$nextTick(Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.afterContentMounted());case 1:case"end":return e.stop()}}),e)}))))})),this.getAdjacentPostMeta()},afterContentMounted:function(){var t=this,e=this.$refs.content.querySelectorAll("img");Array.from(e).forEach((function(t){t.classList.add("responsive-img")})),H.a.Materialbox.init(e),this.setDigest();var n=Object(Q["escapeRegExp"])(location.host),r=["".concat(n,"/.*\\?p=(\\d+)"),"".concat(n,"(?:/.*)?/post/([\\s\\S]*)")].map((function(t){return new RegExp(t)})),a=Array.from(this.$refs.content.querySelectorAll("a")).filter((function(t){return!!t.href}));if(a.filter((function(t){return t.host===location.host})).forEach(function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(n){var a,o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=n.href,o=r[0].exec(a),i=r[1].exec(a),(o||i||n.pathname===location.pathname)&&(s=(o||i||["","preview"])[1],c=n.hash,n.addEventListener("click",(function(e){e.preventDefault(),c?t.$vuetify.goTo(document.getElementById(n.hash.substring(1)),{offset:200}):t.$router.push({name:o?"post":"postWithEternalLink",query:{p:o?s:void 0},params:{data:t.preview.current!=s||t.preview.loading?void 0:t.preview.cacheData,postLink:i?s:void 0}})}),!0),n.addEventListener("mouseover",function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preview.show=!0,t.preview.attach=n,!c){e.next=10;break}return t.preview.cacheData=null,t.preview.current=s,a=document.getElementById(n.hash.substring(1)),t.preview.title=a.innerText,t.preview.img="",-1!==n.hash.indexOf("ref")?t.preview.subtitle=a.parentElement.innerText:t.preview.subtitle="",e.abrupt("return");case 10:if(t.preview.current!==s||t.preview.loading||!t.preview.cacheData){e.next=13;break}return t.preview.current=s,e.abrupt("return");case 13:t.preview.current=s,t.preview.loading=!0,t.preview.img="",d["a"].fetchJSON(d["a"].apiFor(o?"post":"post-link",s)).then((function(e){if(!e)return t.preview.loading=!1,t.preview.title="Oops! :(",t.preview.subtitle="This is a secret",void(t.preview.img="");t.preview.cacheData=Object(h["b"])(e),t.preview.loading=!1,t.preview.title=e.title,t.preview.subtitle=e.subtitle,t.preview.img=e.img})).catch((function(e){t.preview.loading=!1,t.preview.cacheData=null,t.preview.title=":(",t.preview.subtitle=e.message,t.preview.img=""}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.addEventListener("mouseout",(function(e){t.preview.show=!1})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.highlightLanguage(),this.renderWithMathJax(),this.$emit("postLoaded"),this.postData.img){var o=this.postData.id,i=document.createElement("img");i.addEventListener("error",(function(e){o===t.postData.id&&(t.postData.img="")})),i.src=this.postData.img}},highlightLanguage:function(){window.hljs&&(window.hljs.initHighlighting.called=!1,window.hljs.initHighlighting())},renderWithMathJax:function(){window.MathJax&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,"output"])},getPostNum:function(){return this.getArguments().p||-1},notFoundData:function(){return{img:"",id:-1,content:"",next:-1,prev:-1,secret:0,title:"Page Not Found",subtitle:"Please check your post-id. Or try to login.",author:{nickname:""},darkTitle:!1,tags:[],created:new Date,lastEdit:new Date}},setDigest:function(){this.postDigest=Array.from(this.$refs.content.querySelectorAll("h1,h2,h3")).map((function(t,e){return t.classList.add("scrollspy"),t.classList.add("section"),t.id=t.id||"section-".concat(e),{hash:t.id,title:t.innerText,element:t}}))},getPostByShared:function(t){var e=this;d["a"].fetchJSON(d["a"].apiFor("post","get-shared",t)).then((function(t){if(!t)return Promise.reject("");e.postData=ae({},e.notFoundData(),{},Object(h["b"])(t)),e.processContent()})).catch((function(t){e.postData=e.notFoundData()}))},sharePost:function(){var t=this;this.share.shareId="",this.postData.secret&&d["a"].fetchJSONWithSuccess(d["a"].apiFor("post","share"),"post",{pid:this.postData.id}).then((function(e){t.share.shareId=e})),this.share.open=!0},mouseMoveHandler:function(t){this.preview.show&&(this.preview.x=t.clientX+10,this.preview.y=t.clientY+10)},renderPreviewByServer:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("preview"===this.postData.id&&this.postData.markdownContent){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,t.prev=3,t.next=6,d["a"].fetchJSONWithSuccess(d["a"].apiFor("post","render-markdown"),"POST",{markdown:this.postData.markdownContent});case 6:e=t.sent,this.$emit("postUnload"),this.postData.content=e,this.postData.serverRendered=!0,this.processContent();case 11:return t.prev=11,this.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[3,,11,14]])})));function e(){return t.apply(this,arguments)}return e}(),getAdjacentPostMeta:function(){var t=this;this.prevMeta=null,this.postData.prev>0&&d["a"].fetchJSONWithSuccess(d["a"].apiFor("post","meta","id",this.postData.prev)).then((function(e){t.prevMeta=e})),this.nextMeta=null,this.postData.next>0&&d["a"].fetchJSONWithSuccess(d["a"].apiFor("post","meta","id",this.postData.next)).then((function(e){t.nextMeta=e}))},resetExtraDisplaySettings:function(){this.extraDisplaySettings=ae({},oe)}},computed:{hasDigest:function(){return!this.extraDisplaySettings.disableSideNavigation&&this.$vuetify.breakpoint.smAndUp&&this.postDigest.length>0},isTokenExpired:function(){return d["a"].isTokenExpired(this.userData&&this.userData.token)},titleClass:function(){return"".concat(["white","black"][+this.postData.darkTitle],"--text")},isEditable:function(){return!(!this.postData.author||!this.userData)&&this.userData.role>=this.postData.author.role},isPostFound:function(){return this.postData.id>0},isShared:function(){return!!this.$route.params.shareId},sharePath:function(){if(!this.postData.secret||!this.share.shareId)return location.href;var t=this.$router.resolve({name:"sharedPost",params:{shareId:this.share.shareId}}).href,e=document.createElement("a");return e.href=t,e.href},shouldDisplayAdjacentMeta:function(){return this.$vuetify.breakpoint.mdAndUp}},mounted:function(){var t=this;if(this.renderer=Et.createRenderer(this),this.$route.params.shareId?this.getPostByShared(this.$route.params.shareId):this.loadContent(),!window.MathJax){var e=document.createElement("script");e.async=!0,e.src="https://cdn.bootcss.com/mathjax/2.7.3/latest.js?config=TeX-MML-AM_CHTML";var n=document.createElement("script");n.type="text/x-mathjax-config",n.innerHTML="MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});",document.body.appendChild(n),document.body.appendChild(e)}var r=function(e){-1!==e&&t.$router.push({name:"post",query:{p:e}})};Object(m["d"])({"Utilities.ShowNext":function(){r(this.postData.prev)},"Utilities.ShowPrevious":function(){r(this.postData.next)},edit:function(){this.$router.push({name:"edit",query:{post:this.postData.id}})},delete:function(){this.$router.push({name:"edit",params:{deletePost:!0,title:this.postData.title},query:{post:this.postData.id}})}},this)},beforeRouteUpdate:function(t,e,n){return t.params.doNotLoad?n():t.query.p===e.query.p&&t.params.postLink==e.params.postLink?n():(this.$vuetify.goTo(0),this.$emit("postUnload"),this.loadContent(t.query.p,t),void n())},destroyed:function(){this.$emit("postUnload"),this.$emit("postDestroyed"),Object(m["c"])()},watch:{userData:function(){!this.userData&&this.postData.secret&&(this.postData=this.notFoundData()),-1===this.postData.id&&this.loadContent()},"window.MathJax":function(){this.renderWithMathJax()}}},se=ie,ce=(n("6801"),n("0798")),ue=n("e449"),le=n("8e36"),de=n("0789"),he=Object(b["a"])(se,N,R,!1,null,"309b4784",null),me=he.exports;w()(he,{VAlert:ce["a"],VAvatar:k["a"],VBtn:D["a"],VCard:O["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VChip:C["a"],VCol:_["a"],VContainer:j["a"],VDialog:ht["a"],VDivider:Zt["a"],VIcon:T["a"],VImg:P["a"],VMenu:ue["a"],VParallax:E["a"],VProgressLinear:le["a"],VRow:A["a"],VSlideXTransition:de["f"],VSpacer:V["a"],VTextField:Kt["a"]});var fe=function(){return n.e("ringing-bloom").then(n.bind(null,"be31"))},pe=function(){return n.e("ringing-bloom").then(n.bind(null,"d891"))},ve=function(){return n.e("ringing-bloom").then(n.bind(null,"6d1a"))},ge=function(){return n.e("fire-bird").then(n.bind(null,"741b"))},be=function(){return n.e("fire-bird").then(n.bind(null,"fdab"))},ye=function(){return n.e("fire-bird").then(n.bind(null,"8f70"))},we=function(){return n.e("fire-bird").then(n.bind(null,"e143"))},ke=function(){return n.e("fire-bird").then(n.bind(null,"d396"))},De=function(){return n.e("fire-bird").then(n.bind(null,"b29f"))},Oe=function(){return n.e("fire-bird").then(n.bind(null,"895d"))},xe=function(){return n.e("fire-bird").then(n.bind(null,"3a39"))},Ce=function(){return n.e("fire-bird").then(n.bind(null,"03a5"))},_e=function(){return n.e("fire-bird").then(n.bind(null,"b998"))},je=function(){return n.e("fire-bird").then(n.bind(null,"ab33"))},Te=function(){return n.e("fire-bird").then(n.bind(null,"4c9e"))},Pe=function(){return n.e("fire-bird").then(n.bind(null,"fad0"))};r["default"].use(a["a"]),r["default"].use(i.a);e["a"]=new a["a"]({mode:"history",base:s["a"].urlPrefix,routes:[{path:"/hello",name:"helloWorld",component:be},{path:"/",name:"index",component:I,meta:{title:s["a"].title}},{path:"/login",name:"login",component:fe,meta:{title:"Login"}},{path:"/post",name:"post",component:me,children:[{path:"shared/:shareId",name:"sharedPost",component:me},{path:":postLink",name:"postWithEternalLink",component:me}]},{path:"/edit",alias:"/add",name:"edit",component:ge},{path:"/userspace",alias:"/me",name:"userspace",component:ye,meta:{title:"Console"},children:[{path:"change-password",name:"changePassword",component:we,meta:{title:"Change Password"}},{path:"remote-login",name:"remoteLogin",component:ke,meta:{title:"Remote Login"}},{path:"user-management",name:"userManagement",component:De,meta:{title:"Manage Users"}},{path:"token-refresh",name:"tokenRefresh",component:xe,meta:{title:"Refresh Tokens"}},{path:"account-settings",name:"setNickname",component:Ce,meta:{title:"Account Settings"}},{path:"oauth-accounts",name:"oauthAccounts",component:_e,meta:{title:"OAuth Accounts"}},{path:"2-step-auth",name:"twoStepAuth",component:je,meta:{title:"Two Factor Authentication"}},{path:"system-monitor",name:"systemMonitor",component:Te,meta:{title:"System Monitor"}},{path:"manage-drafts",name:"manageDrafts",component:Pe,meta:{title:"Draft Management"}},{path:"/",name:"console-index",component:Oe,meta:{title:"Roselia-Blog Console"}}]},{path:"/timeline",name:"timeline",component:ve,meta:{title:"Timeline"},children:[{name:"userTimeline",path:":username",component:ve}]},{path:"*",name:"notFound",alias:"/404",component:pe,meta:{title:"404 Not Found"}}]})},a49b:function(t,e,n){"use strict";var r="Somainer's Blog",a="Do what you want to do, be who you want to be.",o="https://roselia.moe/blog/api",i="/blog",s={primary:"#0288d1",secondary:"#6292E9",accent:"#E08696",error:"#FB5458",warning:"#FE9952",info:"#95CAEE",success:"#61BF99"};e["a"]={title:r,motto:a,apiBase:o,theme:s,enableRoseliaScript:!0,enableAskYukina:!0,footerName:"Somainer",urlPrefix:i,images:{indexBannerImage:i+"/static/img/bg_n3.jpg",postBannerImage:i+"/static/img/nest.png",lazyloadImage:i+"/static/img/observe.jpg",timelineBannerImage:i+"/static/img/bg_n0.png"}}},a5e0:function(t,e,n){"use strict";n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("2fa7"),a=n("9f12"),o=n("53fe");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:localStorage;Object(a["a"])(this,t),this.changeListeners=[],this.key=e,this.storage=r,this.addStorageEventListener((function(){return n.onStorageChanged()}))}return Object(o["a"])(t,[{key:"onStorageChanged",value:function(){var t=this.payload;this.changeListeners.forEach((function(e){return e(t)}))}},{key:"addChangeListener",value:function(t){var e=this;return this.changeListeners.push(t),function(){e.changeListeners=e.changeListeners.filter((function(e){return e!==t}))}}},{key:"getItem",value:function(t){var e=this.payload;return e&&e[t]}},{key:"getPayload",value:function(){return this.payload}},{key:"setPayload",value:function(t){this.payload=t}},{key:"updatePayload",value:function(t){this.setPayload(s({},t,{},this.payload))}},{key:"clear",value:function(){this.storage.removeItem(this.key),this.onStorageChanged()}},{key:"addStorageEventListener",value:function(t){var e=this;addEventListener("storage",(function(n){n.key===e.key&&t(e.payload)}))}},{key:"isEmpty",value:function(){return!this.payload}},{key:"payload",get:function(){return JSON.parse(this.storage.getItem(this.key)||"null")},set:function(t){this.storage.setItem(this.key,JSON.stringify(t)),this.onStorageChanged()}}]),t}();n.d(e,"a",(function(){return u}));var u=new c("loginData")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"black-shout"}},[n("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]}),n("theme-listener",{model:{value:t.preferredLight,callback:function(e){t.preferredLight=e},expression:"preferredLight"}}),n("v-app",{attrs:{dark:t.isNight}},[n("v-content",[n("v-slide-x-transition",{attrs:{"hide-on-leave":""}},[n("router-view",{attrs:{currentColorScheme:!t.isNight,userData:t.userData},on:{forceSwitchToLight:t.switchToLight,forceSwitchToDark:t.switchToDark}})],1)],1),n("go-top-btn")],1),n("vue-progress-bar")],1)},o=[],i=(n("0d03"),r["default"].extend({mounted:function(){this.checkScheme()},methods:{setState:function(t){this.$emit("change",t)},checkScheme:function(){var t=this,e=matchMedia("(prefers-color-scheme: dark)"),n=matchMedia("(prefers-color-scheme: light)");e.matches||n.matches?(this.setState(n.matches),e.addEventListener("change",(function(e){return t.setState(!e.matches)})),n.addEventListener("change",(function(e){return t.setState(e.matches)}))):this.setState(void 0)}},model:{prop:"scheme",event:"change"},props:{scheme:Boolean},render:function(t){return t()}})),s=n("f704"),c=n("a5e0"),u={name:"App",components:{"theme-listener":i},mounted:function(){this.$Progress.finish(),this.$watch("$vuetify.theme.currentTheme",(function(t){document.body.style.setProperty("--themed-text-color",Object(s["f"])(t.primary,"#000000","#ffffff","#ffffff"))}),{immediate:!0,deep:!0})},created:function(){var t=this;c["a"].addChangeListener((function(e){t.userData=e}))},methods:{switchToLight:function(t){this.forceLight=!!t},switchToDark:function(t){this.forceDark=!!t}},data:function(){return{forceLight:!1,forceDark:!1,forceTitle:"",preferredLight:void 0,userData:c["a"].getPayload()}},computed:{isNight:function(){var t=(new Date).getHours(),e=t>6&&t<18;return this.forceDark||!(this.forceLight||e)}},watch:{preferredLight:function(t){if("undefined"!==typeof t){var e=!t;this.forceLight=!e,this.forceDark=e}else this.forceLight=this.forceDark=!1},isNight:{handler:function(t){this.$vuetify.theme.dark=!!t},immediate:!0}}},l=u,d=(n("034f"),n("2877")),h=n("6544"),m=n.n(h),f=n("7496"),p=n("a75b"),v=n("0789"),g=Object(d["a"])(l,a,o,!1,null,null,null),b=g.exports;m()(g,{VApp:f["a"],VContent:p["a"],VSlideXTransition:v["f"]});var y=n("a18c"),w=(n("5d41"),n("c760"),n("f309")),k=n("25a2"),D=n("a49b");r["default"].use(w["a"]);var O=new w["a"]({theme:{themes:{light:D["a"].theme,dark:D["a"].theme},options:{customProperties:!0}},customProperties:!0,lang:{locales:{zhHans:k["a"]},current:"zh-Hans"},icons:{values:{brand:new Proxy({},{get:function(t,e){return Reflect.has(t,e)?Reflect.get(t,e):"string"===typeof e?"fab fa-".concat(e):void 0}})},iconfont:"md"}}),x=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("2fa7")),C=n("2f62");function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(n,!0).forEach((function(e){Object(x["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}r["default"].use(C["a"]);var T=new C["a"].Store({state:{commentDraft:{}},mutations:{setCommentDraft:function(t,e){t.commentDraft=j({},t.commentDraft,Object(x["a"])({},e.commentId,e.comment))},removeCommentDraft:function(t,e){t.commentDraft=j({},t.commentDraft,Object(x["a"])({},e,void 0))}},actions:{},getters:{}}),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{color:t.color,top:"",right:"",timeout:6e3},model:{value:t.showSelf,callback:function(e){t.showSelf=e},expression:"showSelf"}},[t._v(" "+t._s(t.text)+" "),n("v-btn",{attrs:{text:""},on:{click:function(e){t.showSelf=!1}}},[t._v(" Close ")])],1)},S=[],L={name:"toast",props:["show","text","color"],model:{prop:"show",event:"showChange"},computed:{showSelf:{get:function(){return this.show},set:function(t){this.$emit("showChange",t)}}}},E=L,A=n("8336"),$=n("2db4"),V=Object(d["a"])(E,P,S,!1,null,"0b70f072",null),M=V.exports;m()(V,{VBtn:A["a"],VSnackbar:$["a"]});var I=n("4bdc"),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{staticClass:"oneness",attrs:{height:"auto"}},[n("v-row",{attrs:{justify:"center",wrap:""}},[n("v-col",{staticClass:"themed-text text-center lighten-2 py-3",attrs:{cols:"12"}},[t._v(" ©"+t._s(t.year)+" — "),n("strong",[t._v(t._s(t.name))])])],1)],1)},R=[],F={name:"blog-footer",data:function(){return{year:(new Date).getFullYear(),title:D["a"].title,motto:D["a"].motto,name:D["a"].footerName}}},U=F,B=(n("5fe1"),n("62ad")),q=n("553a"),H=n("0fd9"),J=Object(d["a"])(U,N,R,!1,null,"65d4d510",null),W=J.exports;m()(J,{VCol:B["a"],VFooter:q["a"],VRow:H["a"]});var Y=n("26b9"),z=n.n(Y),G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{directives:[{name:"scroll",rawName:"v-scroll",value:t.recordScroll,expression:"recordScroll"},{name:"resize",rawName:"v-resize",value:t.recordHeight,expression:"recordHeight"}]},[n("v-fab-transition",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],staticClass:"fixed-action-btn",style:{bottom:t.$vuetify.breakpoint.smOnly?"64px":""},attrs:{color:"secondary",fab:"",fixed:"",bottom:"",right:""},on:{click:t.goTop}},[n("v-icon",[t._v("keyboard_arrow_up")])],1)],1)],1)},Z=[],X=n("9d93"),K={name:"gotop-button",directives:X["default"],data:function(){return{height:0,offsetTop:0}},methods:{recordHeight:function(){this.height=window.innerHeight},recordScroll:function(){this.offsetTop=window.pageYOffset||document.documentElement.scrollTop},goTop:function(){this.$vuetify.goTo(0)}},mounted:function(){this.recordHeight(),this.recordScroll()},computed:{showButton:function(){return this.offsetTop>=this.height}}},Q=K,tt=n("132d"),et=n("a722"),nt=n("269a"),rt=n.n(nt),at=n("dc22"),ot=n("f977"),it=Object(d["a"])(Q,G,Z,!1,null,"1902fcdc",null),st=it.exports;m()(it,{VBtn:A["a"],VFabTransition:v["c"],VIcon:tt["a"],VLayout:et["a"]}),rt()(it,{Resize:at["a"],Scroll:ot["b"]});n("15f5");var ct=n("85fe");r["default"].prototype.config=D["a"],r["default"].use(z.a,{color:D["a"].theme.secondary,failedColor:D["a"].theme.error,thickness:"4px"}),r["default"].directive("observe-visibility",ct["a"]),r["default"].component("toast",M),r["default"].component("nav-bar",I["a"]),r["default"].component("blog-footer",W),r["default"].component("go-top-btn",st),r["default"].directive("focus",{update:function(t,e){var n=e.value;n&&t.focus()}}),r["default"].config.productionTip=!1;e["default"]=new r["default"]({router:y["a"],store:T,vuetify:O,render:function(t){return t(b)}}).$mount("#black-shout")},d569:function(t,e,n){"use strict";n("a4d3"),n("4de4"),n("7db0"),n("4160"),n("d81d"),n("e439"),n("dbb4"),n("b64b"),n("5d41"),n("c760"),n("159b");var r=n("2fa7"),a=(n("96cf"),n("89ba")),o=n("90b9"),i=n("f704"),s=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r){return o["a"].fetchJSONWithSuccess(o["a"].apiFor(e),t,Object(i["c"])(r),n).then(i["b"])}},c=s("get","luis/run-command"),u=s("get","luis/ask-yukina"),l=n("a18c");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return v})),n.d(e,"d",(function(){return w})),n.d(e,"c",(function(){return k}));var m=function(t){return Object(i["h"])(t.map((function(t){return[t.type,t.entity]})))};function f(t){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!(e in y)){t.next=4;break}return y[e]({}),t.abrupt("return",!0);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("Fallback to default.");case 9:return t.next=11,c({command:e});case 11:if(n=t.sent,r=n.topScoringIntent.intent,a=m(n.entities),a.Password&&(o=n.entities.find((function(t){return"Password"===t.type})),a.Password=e.substring(o.startIndex,o.endIndex+1)),!(r in y)){t.next=18;break}return y[r](a),t.abrupt("return",!0);case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[0,6]])}))),p.apply(this,arguments)}var v=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u({question:e});case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g={login:function(t){var e=t.Username,n=t.Password;l["a"].push({name:"login",params:{credential:{username:e,password:n}}})},newPost:function(t){var e=t.PostID;l["a"].push({name:"edit",query:{post:e}})},search:function(t){var e=t.PostTag;l["a"].push({name:"index",query:{tag:e}})},showTimeline:function(t){var e=t.Username;l["a"].push({name:e?"userTimeline":"timeline",params:{username:e}})},"Utilities.GoBack":function(){l["a"].go(-1)},logout:function(){l["a"].push({name:"login",params:{logout:!0}})}},b={},y=Object(i["g"])(new Proxy(g,{get:function(t,e){return Reflect.get(b,e)||Reflect.get(t,e)},has:function(t,e){return Reflect.has(b,e)||Reflect.has(t,e)}})),w=function(t,e){b=h({},b,{},Object(i["g"])(t,e))},k=function(){b={}}},d8a3:function(t,e,n){"use strict";var r=n("9a76"),a=n.n(r);a.a},f704:function(t,e,n){"use strict";n.d(e,"h",(function(){return h})),n.d(e,"d",(function(){return m})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return v})),n.d(e,"e",(function(){return g})),n.d(e,"a",(function(){return b})),n.d(e,"f",(function(){return D})),n.d(e,"g",(function(){return O}));n("a4d3"),n("99af"),n("4de4"),n("4160"),n("a15b"),n("d81d"),n("13d5"),n("4fad"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("e25e"),n("5d41"),n("ac1f"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("2ca0"),n("10d1"),n("159b"),n("ddb0");var r=n("bf2d"),a=n("284c"),o=n("2fa7"),i=n("e587");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(n,!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=function(t){return t.replace(/([A-Z])/g,"_$1").toLowerCase()},l=function(t){return t.replace(/_([a-zA-Z])/g,(function(t,e){return e.toUpperCase()}))},d=function(t){return function(e){return Object.entries(e).map((function(e){var n=Object(i["a"])(e,2),r=n[0],a=n[1];return t(r,a)}))}},h=function(t){return t.reduce((function(t,e){return c({},t,Object(o["a"])({},e[0],e[1]))}),{})};function m(t){return function(e){return Object.assign.apply(Object,[{}].concat(Object(a["a"])(Object.entries(e).map((function(e){var n=Object(i["a"])(e,2),r=n[0],a=n[1];return Object(o["a"])({},r,t(a))})))))}}var f=function t(e){return function(n){return n instanceof Array?n.map(t(e)):n&&"object"===Object(r["a"])(n)?h(d((function(n,r){return[e(n),t(e)(r)]}))(n)):n}},p=f(l),v=f(u),g=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return"undefined"===typeof t?void 0:t[e]}),t)}},b=function(t,e){return t===e||!(!t||!e)&&t.toLowerCase()===e.toLowerCase()},y=function(t,e,n){return(299*t+587*e+114*n)/1e3},w=function(t){return t.match(/\d+/g).map((function(t){return parseInt(t,10)}))},k=function(t){if(t){var e,n=t.toLowerCase();if(n.startsWith("rgb")){var r=w(n);e=y(r[0],r[1],r[2])}else{var a=n.substring(1);if(3===a.length&&(a=a.split("").map((function(t){return t+t})).join("")),6!==a.length)return;var o=a.replace(/(..)(?=.)/g,"$1-").split("-").map((function(t){return parseInt(t,16)}));e=y(o[0],o[1],o[2])}return e>=128}};function D(t,e,n,r){var a=k(t);return"undefined"===typeof a?r:a?e:n}function O(t,e){var n=new WeakMap;return new Proxy(t,{get:function(t,r){var a=Reflect.get(t,r);return"function"===typeof a?(n.has(a)||n.set(a,a.bind(e||t)),n.get(a)):a}})}}});
//# sourceMappingURL=app.87fbcbe7.js.map