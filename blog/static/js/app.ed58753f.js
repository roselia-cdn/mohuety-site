(function(t){function e(e){for(var a,r,s=e[0],c=e[1],u=e[2],l=0,d=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);h&&h(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(a=!1)}a&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},o={app:0},i=[];function s(t){return c.p+"blog/static/js/"+({"fire-bird":"fire-bird","ringing-bloom":"ringing-bloom","unions-road":"unions-road"}[t]||t)+"."+{"fire-bird":"6f84aff8","ringing-bloom":"1a737231","unions-road":"96a0dea8","chunk-0b65ffb6":"f87abf6f","chunk-2d0a3577":"251ca6ca","chunk-2d0a43df":"30f0f07f","chunk-2d0aa90c":"1a2f3d9f","chunk-2d0aab07":"5f05acf9","chunk-2d0abc00":"4b956803","chunk-2d0ae937":"6a7f6886","chunk-2d0aeb45":"cd1af608","chunk-2d0af08c":"d38d9c28","chunk-2d0afa49":"85aedb4f","chunk-2d0b2762":"d494f747","chunk-2d0b6187":"27277bd9","chunk-2d0ba136":"3eed6022","chunk-2d0bb267":"c952d590","chunk-2d0bcec1":"d0785fd8","chunk-2d0bdf38":"05e8b84a","chunk-2d0bff92":"034214d5","chunk-2d0c0494":"94495161","chunk-2d0c0a09":"e0f072af","chunk-2d0c4313":"4d319382","chunk-2d0c46d1":"249cdc0a","chunk-2d0c512b":"fd17017b","chunk-2d0cf16e":"1c018bf0","chunk-2d0d056d":"03ec864d","chunk-2d0d0645":"2e0a0f73","chunk-2d0d2f22":"4bd0b792","chunk-2d0d61fd":"13a870f6","chunk-2d0d7e63":"8ccba6b5","chunk-2d0e1b57":"e2623a68","chunk-2d0e1fbe":"36f52224","chunk-2d0e22d6":"1b8a57ba","chunk-2d0e542a":"2315bfee","chunk-2d0e57ec":"5c58094a","chunk-2d0e6553":"6d50bc83","chunk-2d0e6c86":"53387cf8","chunk-2d0ea098":"8c15e660","chunk-2d0f0a11":"6aee0881","chunk-2d208ac5":"9c39013c","chunk-2d209408":"2ea13fb8","chunk-2d20f745":"6954cd0e","chunk-2d20ff23":"1e0453c9","chunk-2d2138c7":"14fd8d72","chunk-2d216f3b":"6f7ff11d","chunk-2d217e5b":"53e47030","chunk-2d21b84a":"7d53c345","chunk-2d21dcd2":"3129e0b2","chunk-2d21f327":"33b69d0b","chunk-2d2214b3":"5f501364","chunk-2d221799":"d29c8ee7","chunk-2d221814":"9a9e2601","chunk-2d221a34":"e3ce115b","chunk-2d226775":"4957e5f8","chunk-2d229411":"99076678","chunk-2d2295e9":"764b7f7b","chunk-2d22c171":"a442b21f","chunk-2d22c2b8":"aed1a5e8","chunk-2d22ca58":"88eeab11","chunk-2d2311f7":"67c80373","chunk-2d237ee7":"4811d11f","chunk-2d238465":"dff2fb16","chunk-30597b4a":"4a7df119","chunk-7532b3ea":"f9459b66","chunk-e13e4362":"57e1cb13"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"fire-bird":1,"ringing-bloom":1,"unions-road":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="blog/static/css/"+({"fire-bird":"fire-bird","ringing-bloom":"ringing-bloom","unions-road":"unions-road"}[t]||t)+"."+{"fire-bird":"93869702","ringing-bloom":"c3ed2b92","unions-road":"a26e0ef2","chunk-0b65ffb6":"31d6cfe0","chunk-2d0a3577":"31d6cfe0","chunk-2d0a43df":"31d6cfe0","chunk-2d0aa90c":"31d6cfe0","chunk-2d0aab07":"31d6cfe0","chunk-2d0abc00":"31d6cfe0","chunk-2d0ae937":"31d6cfe0","chunk-2d0aeb45":"31d6cfe0","chunk-2d0af08c":"31d6cfe0","chunk-2d0afa49":"31d6cfe0","chunk-2d0b2762":"31d6cfe0","chunk-2d0b6187":"31d6cfe0","chunk-2d0ba136":"31d6cfe0","chunk-2d0bb267":"31d6cfe0","chunk-2d0bcec1":"31d6cfe0","chunk-2d0bdf38":"31d6cfe0","chunk-2d0bff92":"31d6cfe0","chunk-2d0c0494":"31d6cfe0","chunk-2d0c0a09":"31d6cfe0","chunk-2d0c4313":"31d6cfe0","chunk-2d0c46d1":"31d6cfe0","chunk-2d0c512b":"31d6cfe0","chunk-2d0cf16e":"31d6cfe0","chunk-2d0d056d":"31d6cfe0","chunk-2d0d0645":"31d6cfe0","chunk-2d0d2f22":"31d6cfe0","chunk-2d0d61fd":"31d6cfe0","chunk-2d0d7e63":"31d6cfe0","chunk-2d0e1b57":"31d6cfe0","chunk-2d0e1fbe":"31d6cfe0","chunk-2d0e22d6":"31d6cfe0","chunk-2d0e542a":"31d6cfe0","chunk-2d0e57ec":"31d6cfe0","chunk-2d0e6553":"31d6cfe0","chunk-2d0e6c86":"31d6cfe0","chunk-2d0ea098":"31d6cfe0","chunk-2d0f0a11":"31d6cfe0","chunk-2d208ac5":"31d6cfe0","chunk-2d209408":"31d6cfe0","chunk-2d20f745":"31d6cfe0","chunk-2d20ff23":"31d6cfe0","chunk-2d2138c7":"31d6cfe0","chunk-2d216f3b":"31d6cfe0","chunk-2d217e5b":"31d6cfe0","chunk-2d21b84a":"31d6cfe0","chunk-2d21dcd2":"31d6cfe0","chunk-2d21f327":"31d6cfe0","chunk-2d2214b3":"31d6cfe0","chunk-2d221799":"31d6cfe0","chunk-2d221814":"31d6cfe0","chunk-2d221a34":"31d6cfe0","chunk-2d226775":"31d6cfe0","chunk-2d229411":"31d6cfe0","chunk-2d2295e9":"31d6cfe0","chunk-2d22c171":"31d6cfe0","chunk-2d22c2b8":"31d6cfe0","chunk-2d22ca58":"31d6cfe0","chunk-2d2311f7":"31d6cfe0","chunk-2d237ee7":"31d6cfe0","chunk-2d238465":"31d6cfe0","chunk-30597b4a":"31d6cfe0","chunk-7532b3ea":"31d6cfe0","chunk-e13e4362":"31d6cfe0"}[t]+".css",o=c.p+a,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===a||l===o)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var a=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[t],h.parentNode.removeChild(h),n(i)},h.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){r[t]=0})));var a=o[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(h);var n=o[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[t]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var h=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"034f":function(t,e,n){"use strict";var a=n("8a23"),r=n.n(a);r.a},"04bb":function(t,e,n){"use strict";var a=n("48bf"),r=n.n(a);r.a},"0fc3":function(t,e,n){"use strict";n.d(e,"g",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"i",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"f",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return g})),n.d(e,"m",(function(){return b})),n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return k}));n("99af"),n("4de4"),n("4160"),n("caad"),n("d81d"),n("4fad"),n("c1f9"),n("d3b7"),n("ac1f"),n("2532"),n("5319"),n("159b");var a=n("3835"),r=n("53ca"),o=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":[].toString.call(t)},i=function(t){return"object"===Object(r["a"])(t)&&null!==t},s=function(t){return"number"===typeof t||i(t)&&"[object Number]"===o(t)},c=function(t){return"function"===typeof t},u=function(t){var e=Object(r["a"])(t);return"string"===e||"object"===e&&null!=t&&!Array.isArray(t)&&"[object String]"===o(t)},l=function(t){return"boolean"===typeof t||i(t)&&"[object Boolean]"===o(t)},d=function(t){return Array.isArray(t)},h=function(t){return null==t},f=function(t){var e=Object(r["a"])(t);return null!=t&&("object"===e||"function"===e)},m=function(t){var e=Object(r["a"])(t);return"symbol"==e||"object"===e&&null!=t&&"[object Symbol]"==o(t)},v=function t(e,n,r){return n.forEach((function(n){(f(n)||c(n))&&Object.entries(n).forEach((function(n){var o=Object(a["a"])(n,2),i=o[0],s=o[1];r&&f(s)?(f(e[i])||(e[i]=d(s)?[]:{}),t(e[i],[s],!0)):e[i]=s}))})),e},p=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return v(t,n,!0)},g=function(t,e){return Object.fromEntries(Object.entries(t).filter((function(t){var n=Object(a["a"])(t,1),r=n[0];return!e.includes(r)})))},b=function(t,e){return Object.fromEntries(e.map((function(e){return[e,t[e]]})))},y=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){for(var a=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(e),e=setTimeout((function(){return t.call.apply(t,[a].concat(o))}),n)}},k=function(t){return t.replace(/["'\\\n\r\u2028\u2029]/g,(function(t){switch(t){case'"':case"'":case"\\":return"\\"+t;case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}return t}))}},1:function(t,e){},"13a9":function(t,e,n){"use strict";var a=n("2638"),r=n.n(a),o=n("d4ec"),i=n("bee2"),s=n("262e"),c=n("2caf"),u=n("9ab4"),l=n("2b0e"),d=n("60a3"),h=n("3a2f"),f=(n("99af"),function(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));var n=new Date(Date.UTC(e.getUTCFullYear(),0,1)),a=Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7);return a}),m=function(t,e){return t.getFullYear()===e.getFullYear()},v=function(t,e){return m(t,e)&&f(t)===f(e)},p=function(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()},g=function(t,e){if(p(t,e)){var n=(e.getTime()-t.getTime())/1e3;if(n<10)return"Just now";if(n<60)return"".concat(0|n," seconds ago");var a=n/60;if(a<60){var r=0|a;return 1===r?"One minute ago":"".concat(r," minutes ago")}var o=a/60,i=0|o;if(1===i)return"One hour ago";if(i<6)return"".concat(i," hours ago")}return t.toLocaleTimeString()},b=function(t,e){if(p(t,e))return"Today";var n=(e.getTime()-t.getTime())/1e3/60/60/24,a=0|n;if(1===a)return"Yesturday";if(a<=7){var r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=r[t.getDay()];return v(t,e)?o:"Last ".concat(o)}return m(t,e)?t.toLocaleString(void 0,{month:"short",day:"numeric"}):t.toLocaleDateString()},y=function(t,e){return p(t,e)?g(t,e):b(t,e)},k=function(t,e){return p(t,e)?g(t,e):"".concat(b(t,e)," ").concat(g(t,e))},w=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t;return Object(o["a"])(this,n),t=e.apply(this,arguments),t.currentDate=new Date,t}return Object(i["a"])(n,[{key:"render",value:function(){var t=this,e=arguments[0];return e("v-tooltip",{attrs:{top:!0},scopedSlots:{activator:function(n){var a=n.on;return e("span",r()([{},{on:a}]),[t.dateString])}}},[e("span",[this.ensuredDate.toLocaleString()])])}},{key:"setListener",value:function(){var t=this,e=new Date,n=this.ensuredDate;if(p(e,n)){var a=(e.getTime()-n.getTime())/1e3,r=1e3*function(){return a<60?1:a<3600?30:120}();this.updateLoop=setTimeout((function(){t.currentDate=new Date,t.setListener()}),r)}}},{key:"mounted",value:function(){this.setListener()}},{key:"destroyed",value:function(){this.updateLoop&&clearInterval(this.updateLoop)}},{key:"ensuredDate",get:function(){return new Date(this.date)}},{key:"dateString",get:function(){return this.brief?y(this.ensuredDate,this.currentDate):k(this.ensuredDate,this.currentDate)}}]),n}(l["default"]);Object(u["a"])([Object(d["c"])([Date,String])],w.prototype,"date",void 0),Object(u["a"])([Object(d["c"])({type:Boolean,default:!1})],w.prototype,"brief",void 0),w=Object(u["a"])([Object(d["a"])({components:{VTooltip:h["a"]}})],w);e["a"]=w},"38c8":function(t,e,n){"use strict";var a=n("ef5a"),r=n.n(a);r.a},"43ba":function(t,e,n){},"45ea":function(t,e,n){"use strict";n("d81d");var a=n("2638"),r=n.n(a),o=n("8414"),i=n("1e06"),s=n("0fd9"),c=n("62ad"),u=n("cc20"),l=n("8336"),d=n("0789"),h=n("132d"),f=n("8212"),m=n("adda"),v=n("48d3"),p=n("f704"),g=n("13a9");function b(t){return y(t)?t.author.nickname:t.nickname}function y(t){return!!t.author}e["a"]=v["componentFactoryOf"]().create({name:"recursive-comment",components:{VTimeline:o["a"],VTimelineItem:i["a"],VRow:s["a"],VCol:c["a"],VChip:u["a"],VBtn:l["a"],VSlideXTransition:d["f"],VIcon:h["a"],VAvatar:f["a"],VImg:m["a"]},props:{comments:{type:Array,required:!0},canAddComment:{type:Boolean,default:!0},canDeleteComment:{type:Function},postAuthorUsername:String,myUsername:String},render:function(){var t=arguments[0];return t("v-col",{attrs:{cols:10,sm:7,"offset-sm":2}},[this.renderComments(this.comments)])},methods:{renderComments:function(t){var e=this,n=this.$createElement;return n("v-timeline",{attrs:{dense:!0,"align-top":!0}},[n("v-slide-x-transition",{attrs:{group:!0}},[t.map((function(t){return n("v-timeline-item",{key:t.id,class:"mb-3",attrs:{"fill-dot":!0,color:t.color||(t.author?"accent":"#bbbbbb"),id:"comment-".concat(t.id)}},[t.author&&t.author.avatar?n("v-avatar",{slot:"icon"},[n("v-img",{attrs:{src:t.author.avatar}})]):null,n("v-row",{attrs:{justify:"space-between"}},[n("v-col",{attrs:{cols:7}},[e.infoLabel(b(t),t.color||(t.author?"secondary":"#bbbbbb"),!1,e.getUsername(t)?{name:"userTimeline",params:{username:e.getUsername(t)}}:void 0),e.myUsername&&Object(p["a"])(e.getUsername(t),e.myUsername)?e.infoLabel("You","accent",!0):e.postAuthorUsername&&Object(p["a"])(e.getUsername(t),e.postAuthorUsername)?e.infoLabel("Author","accent",!0):null,"string"===typeof t.content?n("div",{domProps:{innerHTML:t.content}}):t.content,e.canAddComment&&n("v-btn",{attrs:{text:!0,icon:!0},on:{click:function(){return e.$emit("reply-comment",t.id)}}},[n("v-icon",["reply"])]),e.canDeleteComment(t)?n("v-btn",{attrs:{text:!0,icon:!0,color:"error",small:!0},on:{click:function(){return e.$emit("delete-comment",t.id)}}},[n("v-icon",["delete"])]):null]),n("v-col",{attrs:{cols:5},class:"text-right"},[n(g["a"],r()([{},{props:{date:t.createdAt,brief:!0}}]))])]),n("v-row",{attrs:{"no-gutters":!0,dense:!0,justify:"start"}},[n("v-col",{attrs:{cols:12}},[t.replies.length?n("div",[e.renderComments(t.replies)]):null])])])}))])])},getUsername:function(t){return function(t){return t.author&&t.author.username}(t)},infoLabel:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r=this.$createElement,o=this.$vuetify.theme.currentTheme[e]||e,i=r("v-chip",{attrs:{small:!0,color:e,outlined:n,to:a},class:{"ml-0":!0,"white--text":!n&&Object(p["f"])(o,!1,!0,!0)}},[t]);return a?r("router-link",{attrs:{to:a}},[i]):i}}})},"48bf":function(t,e,n){},"4bdc":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.shouldHide?t._e():n("v-app-bar",{attrs:{color:"primary","scroll-off-screen":""}},[t.shouldHaveToolbar?n("v-app-bar-nav-icon",{attrs:{dark:""},nativeOn:{click:function(e){t.drawer=!t.drawer}}}):t._e(),t._t("default"),n("v-toolbar-title",[n("router-link",{staticClass:"themed-text no-deco",attrs:{to:{name:"index"}}},[t._v(t._s(t.title))])],1),n("v-spacer"),t.shouldHaveToolbar?t._e():n("v-toolbar-items",[t.canAskYukina||t.canChatWithContextualUser?n("v-btn",{attrs:{dark:"",text:""},on:{click:function(e){t.dialog=!0}}},[n("v-badge",{attrs:{color:"secondary",value:t.notifications.length}},[n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.notifications.length))]),n("v-icon",[t._v("question_answer")])],1)],1):t._e(),n("v-btn",{attrs:{dark:"",text:"",to:"/"}},[t._v("Index")]),n("v-btn",{attrs:{dark:"",text:"",to:"/timeline"}},[t._v("Timeline")]),t.userData?n("v-btn",{attrs:{dark:"",text:"",to:"/userspace"}},[t._v(t._s(t.userData.nickname))]):n("v-btn",{attrs:{dark:"",text:"",tag:"a",to:{name:"login"}},on:{contextmenu:function(e){return t.portedLogin(e)}},nativeOn:{click:function(e){return t.setRedirect(e)}}},[t._v("Login ")])],1)],2),t.shouldHaveToolbar&&!t.shouldHide?n("v-navigation-drawer",{attrs:{fixed:"",clipped:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-toolbar",{attrs:{flat:""}},[n("v-list",[n("v-list-item",[n("v-list-item-title",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")])],1)],1)],1),n("v-divider"),n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/"}},[n("v-list-item-action",[n("v-icon",[t._v("home")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Index")])],1)],1)],1),n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/timeline"}},[n("v-list-item-action",[n("v-icon",[t._v("list_alt")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Timeline")])],1)],1)],1),t.userData?n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/userspace"}},[n("v-list-item-action",[n("v-icon",[t._v("account_circle")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.userData.nickname))])],1)],1)],1):n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/login"},on:{click:t.setRedirect}},[n("v-list-item-action",[n("v-icon",[t._v("person")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Login")])],1)],1)],1),t.canAskYukina||t.canChatWithContextualUser?n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[n("v-list-item",{on:{click:function(e){t.dialog=!0}}},[n("v-list-item-action",[n("v-icon",[t._v("question_answer")])],1),n("v-list-item-content",[t.canChatWithContextualUser?n("v-list-item-title",[t._v("Chat with "+t._s(t.contextualUsername))]):n("v-list-item-title",[t._v("Ask Yukina for Help")])],1)],1)],1):t._e()],1):t._e(),t.canChatWithContextualUser?n("div",[n("chat-box",{attrs:{dialog:t.dialog,username:t.currentChatingWith||t.contextualUsername},on:{input:function(e){t.dialog=e}}})],1):t.canAskYukina?n("v-dialog",{attrs:{width:t.responseList.length?1e3:500},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[t._v(" What do you want to do? ("),n("v-icon",[t._v("fa-flask")]),t._v(" Experimental) ")],1),n("v-container",{attrs:{"grid-list-md":""}},[n("v-row",{attrs:{wrap:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-alert",{attrs:{type:"error",transition:"scale-transition",dismissible:""},model:{value:t.notUnderstand,callback:function(e){t.notUnderstand=e},expression:"notUnderstand"}},[t._v(" Sorry, I don't understand. ")]),t.responseList.length?n("recursive-comments",{ref:"comments",attrs:{comments:t.responseList,canAddComment:!1,canDeleteComment:function(){return!1},myUsername:t.userData&&t.userData.username}}):t._e(),t.loading?n("div",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),t._v(" Practice like you perform, perform like you practice. ")],1):n("v-text-field",{ref:"command",attrs:{"hide-details":"","prepend-icon":"question_answer",label:"Ask Yukina for Help","single-line":"",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.runCommand(e)}},model:{value:t.command,callback:function(e){t.command=e},expression:"command"}})],1)],1)],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Close ")])],1)],1)],1):t._e(),t.canAskYukina?n("GlobalEvents",{on:{keyup:[function(e){return(e.type.indexOf("key")||89===e.keyCode)&&e.ctrlKey?void(t.dialog=!t.dialog):null},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}]}}):t._e()],1)},r=[],o=(n("99af"),n("4160"),n("b0c0"),n("d3b7"),n("159b"),n("2909")),i=n("5530"),s=n("2f62"),c=n("a49b"),u=n.n(c),l=n("90b9"),d=n("d569"),h=(n("f704"),n("17d3")),f=n("45ea"),m=(n("d81d"),n("d4ec")),v=n("bee2"),p=n("262e"),g=n("2caf"),b=n("9ab4"),y=n("2b0e"),k=n("a523"),w=n("169a"),C=n("b0af"),D=n("99d9"),x=n("0fd9"),j=n("62ad"),O=n("8654"),T=n("a844"),_=n("8212"),E=n("adda"),S=n("4ca6"),L=n("8336"),P=n("132d"),M=n("60a3"),R=n("4bb5"),A=n("e376"),N=n("f9da"),$=n("c626"),U=function(t,e){var n;null===(n=$["a"].globalBus)||void 0===n||n.emitEvent("send_message",Object(i["a"])(Object(i["a"])({},t),{},{sender:e}))},V=function(t){return new Promise((function(e,n){var a,r;null===(a=$["a"].globalBus)||void 0===a||a.addEventListenerOnce("user_online_status",(function(n){n.username===t&&e(n.status)})),setTimeout((function(){return n(new Error("Timeout"))}),3e3),null===(r=$["a"].globalBus)||void 0===r||r.emitEvent("query_online_status",{username:t})}))},I=function(t){Object(p["a"])(n,t);var e=Object(g["a"])(n);function n(){var t;return Object(m["a"])(this,n),t=e.apply(this,arguments),t.targetUserMeta=void 0,t.message="",t.isTargetUserOnline=!1,t.isMultiLine=!1,t}return Object(v["a"])(n,[{key:"onConversationChanged",value:function(){var t=this;this.$nextTick((function(){var e=t.$refs.history;e.scrollTop=e.scrollHeight}))}},{key:"addSingleConversation",value:function(t,e){var n,a=(null===(n=this.myUserData)||void 0===n?void 0:n.username)||"",r=e?this.username:a,o=e?a:this.username,i={content:t,from:r,to:o};this.$store.commit("addChatHistory",{username:this.username,chat:i})}},{key:"sendMessage",value:function(t){U({content:t,to:this.username,createdAt:new Date}),this.addSingleConversation(t,!1)}},{key:"handleSendMessage",value:function(){this.message&&(this.sendMessage(this.message),this.message="",this.isMultiLine=!1)}},{key:"render",value:function(t){var e,n,a,r,o,i=this,s=this.isMultiLine?"v-textarea":"v-text-field";return t("v-dialog",{attrs:{value:this.dialog,width:this.conversation.length?1e3:500,scrollable:!0},on:{input:function(t){return i.$emit("input",t)}}},[t("v-card",[t("v-card-title",{class:"headline",attrs:{"primary-title":!0}},[t("v-badge",{attrs:{bordered:!0,bottom:!0,color:this.isTargetUserOnline?"success":"grey",dot:!0,"offset-x":"10","offset-y":"10"}},[t("v-avatar",{attrs:{size:"40"}},[(null===(e=this.targetUserMeta)||void 0===e?void 0:e.avatar)?t("v-img",{attrs:{src:this.targetUserMeta.avatar}}):t("span",[((null===(n=this.targetUserMeta)||void 0===n?void 0:n.nickname)||"")[0]])])]),t("span",{class:"ma-2"},["Chat with @",this.username])]),t("v-card-text",{style:"max-height: 62vh;",ref:"history"},[t("v-container",{attrs:{"grid-list-md":!0}},[t("v-row",{attrs:{wrap:!0}},[t("v-col",{attrs:{cols:"12"}},[!!this.conversation.length&&t("recursive-comments",{attrs:{comments:this.conversation,canAddComment:!1,canDeleteComment:function(){return!1},myUsername:null===(a=this.myUserData)||void 0===a?void 0:a.username}}),!this.conversation.length&&this.targetUserMeta&&t("v-card",[t("div",{class:"d-flex flex-no-wrap justify-space-between"},[t("div",[t("v-card-title",{class:"headline"},[this.targetUserMeta.avatar&&t("v-avatar",{class:"elevation-6"},[t("v-img",{attrs:{src:this.targetUserMeta.avatar}})]),t("span",{class:{"ma-2":!!this.targetUserMeta.avatar}},[this.targetUserMeta.nickname])]),t("v-card-subtitle",["@",this.targetUserMeta.username]),t("v-card-subtitle",[this.targetUserMeta.motto])]),this.targetUserMeta.banner&&t("v-avatar",{attrs:{size:"180",tile:!0}},[t("v-img",{attrs:{src:this.targetUserMeta.banner}})])])])])])])]),t("v-card-actions",[t(s,{attrs:{"hide-details":!0,"prepend-icon":"question_answer",label:"Say Something to ".concat(null!==(r=null===(o=this.targetUserMeta)||void 0===o?void 0:o.nickname)&&void 0!==r?r:this.username),"single-line":!0,autofocus:!0,value:this.message},on:{input:function(t){return i.message=t},keydown:function(t){"Enter"===t.key&&(t.shiftKey?i.isMultiLine=!0:!0!==t.isComposing&&(i.isMultiLine&&!t.ctrlKey||i.handleSendMessage()))}}}),this.isMultiLine&&t("v-btn",{attrs:{color:"primary",rounded:!0,disabled:!this.message}},[t("v-icon",["send"])])]),t("v-divider")])])}},{key:"onDialogChanged",value:function(t){var e=this;t&&V(this.username).then((function(t){e.isTargetUserOnline=t}))}},{key:"mounted",value:function(){var t=this;Object(N["b"])({username:this.username}).then((function(e){t.targetUserMeta=e}))}},{key:"dummyTargetUserMeta",get:function(){return{id:0,username:this.username,role:0,nickname:this.username}}},{key:"chatMessages",get:function(){return this.chatHistoryOf(this.username)}},{key:"conversation",get:function(){var t=this;return this.chatMessages.map((function(e,n){var a;return{id:n,content:Object(A["markdown"])(e.content),replies:[],createdAt:null!==(a=e.createdAt)&&void 0!==a?a:new Date,author:e.from===t.username?t.targetUserMeta||t.dummyTargetUserMeta:t.myUserMeta}}))}},{key:"myUserData",get:function(){return this.$store.state.userData}},{key:"myUserMeta",get:function(){return this.$store.state.currentUser}}]),n}(y["default"]);Object(b["a"])([Object(M["c"])()],I.prototype,"username",void 0),Object(b["a"])([Object(M["c"])()],I.prototype,"dialog",void 0),Object(b["a"])([R["a"]],I.prototype,"chatHistoryOf",void 0),Object(b["a"])([Object(M["e"])("conversation")],I.prototype,"onConversationChanged",null),Object(b["a"])([Object(M["e"])("dialog",{immediate:!0})],I.prototype,"onDialogChanged",null),I=Object(b["a"])([Object(M["a"])({components:{RecursiveComments:f["a"],VContainer:k["a"],VDialog:w["a"],VCard:C["a"],VCardTitle:D["d"],VCardSubtitle:D["b"],VRow:x["a"],VCol:j["a"],VTextField:O["a"],VTextarea:T["a"],VCardActions:D["a"],VCardText:D["c"],VAvatar:_["a"],VImg:E["a"],VBadge:S["a"],VBtn:L["a"],VIcon:P["a"]}})],I);var F={name:"blog-toolbar",components:{GlobalEvents:h["a"],RecursiveComments:f["a"],ChatBox:I},props:["userData","route","realTitle","noDrawer","shouldHide"],data:function(){return{drawer:!1,dialog:!1,command:"",loading:!1,notUnderstand:!1,responseList:[]}},methods:Object(i["a"])({setRedirect:function(){l["a"].setRedirect(this.route)},portedLogin:function(t){t.preventDefault();var e=window.open(this.$router.resolve({name:"login",query:{ported:!0}}).href,"loginWindow","height=400,width=400,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no"),n=this.$watch("userData",(function(t){t&&(e.close(),n())}));e.addEventListener("close",n)},runCommand:function(){var t=this;this.loading=!0,Object(d["b"])(this.command).then((function(e){if(t.loading=!1,!e)return Promise.reject("Not understand");t.dialog=!1})).catch(this.askYukina)},askYukina:function(){var t=this;this.responseList=[].concat(Object(o["a"])(this.responseList),[{id:Math.round(233*Math.random()),content:this.command,replies:[],createdAt:new Date,author:this.userMeta&&this.userMeta.username?this.userMeta:this.userData,nickname:"New Staff",color:"accent"}]),this.loading=!0,Object(d["a"])(this.command).then((function(e){t.addDialog({content:e}),t.loading=!1,t.command=""})).catch((function(e){t.loading=!1,t.notUnderstand=!0,t.addDialog({color:"error",content:"Sorry, I don't understand."})}))},addDialog:function(t){this.responseList=[].concat(Object(o["a"])(this.responseList),[{id:Math.round(233*Math.random()),content:t.content,replies:[],createdAt:t.time?new Date(t.time):new Date,author:N["a"],color:t.color}])}},Object(s["d"])(["clearNotifications","setChatingWith"])),computed:Object(i["a"])(Object(i["a"])({title:function(){return this.realTitle||u.a.title},shouldHaveToolbar:function(){return!this.noDrawer&&this.$vuetify.breakpoint.smAndDown},canAskYukina:function(){return u.a.enableAskYukina},contextualUsername:function(){return"userTimeline"===this.$route.name?this.$route.params.username:""},canChatWithContextualUser:function(){return(this.contextualUsername||this.currentChatingWith)&&this.userData}},Object(s["e"])(["notifications","currentChatingWith"])),Object(s["e"])({userMeta:"currentUser"})),watch:{shouldHaveToolbar:function(t){t||(this.drawer=!1)},currentChatingWith:function(t){this.dialog=!!t,this.canChatWithContextualUser||t&&(this.dialog=!0)},dialog:function(t){var e=this;t?(this.$nextTick((function(){return e.$refs.command&&e.$refs.command.focus()})),!this.currentChatingWith&&this.canChatWithContextualUser&&this.setChatingWith(this.contextualUsername),this.notifications.forEach((function(t){e.addDialog(Object(i["a"])(Object(i["a"])({},t),{},{content:t.message}))})),this.clearNotifications()):this.setChatingWith(void 0)},userData:function(){this.responseList=[]}}},B=F,H=n("2877"),W=n("6544"),q=n.n(W),J=n("0798"),Y=n("40dc"),z=n("5bc1"),G=n("ce7e"),K=n("8860"),Z=n("da13"),X=n("1800"),Q=n("5d23"),tt=n("f774"),et=n("490a"),nt=n("2fa4"),at=n("71d9"),rt=n("2a7f"),ot=Object(H["a"])(B,a,r,!1,null,"62eeb79c",null);e["a"]=ot.exports;q()(ot,{VAlert:J["a"],VAppBar:Y["a"],VAppBarNavIcon:z["a"],VBadge:S["a"],VBtn:L["a"],VCard:C["a"],VCardActions:D["a"],VCardTitle:D["d"],VCol:j["a"],VContainer:k["a"],VDialog:w["a"],VDivider:G["a"],VIcon:P["a"],VList:K["a"],VListItem:Z["a"],VListItemAction:X["a"],VListItemContent:Q["a"],VListItemTitle:Q["b"],VNavigationDrawer:tt["a"],VProgressCircular:et["a"],VRow:x["a"],VSpacer:nt["a"],VTextField:O["a"],VToolbar:at["a"],VToolbarItems:rt["a"],VToolbarTitle:rt["b"]})},"5dac":function(t,e,n){},"5e10":function(t,e,n){},6196:function(t,e,n){"use strict";n("d3b7");var a=n("bc3a"),r=n.n(a),o=n("cd49"),i=r.a.create();i.interceptors.request.use((function(t){return o["default"].$Progress.start(),t})),i.interceptors.response.use((function(t){return 200===t.status?o["default"].$Progress.finish():o["default"].$Progress.fail(),t}),(function(t){return o["default"].$Progress.fail(),Promise.reject(t)})),e["a"]=i},6801:function(t,e,n){"use strict";var a=n("5e10"),r=n.n(a);r.a},"7c2c":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n("90b9"),r=n("f704"),o=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(o){return a["a"].fetchJSONWithSuccess(a["a"].apiFor(e),t,Object(r["c"])(o),n).then(r["b"])}}},"8a23":function(t,e,n){},"90b9":function(t,e,n){"use strict";n("99af"),n("a15b"),n("d81d"),n("4fad"),n("d3b7"),n("ac1f"),n("25f0"),n("841c"),n("1276");var a=n("5530"),r=n("3835"),o=n("6196"),i=n("a18c"),s=n("a49b"),c=n.n(s),u=n("a5e0"),l={};l.apiBase=c.a.apiBase,l.getArguments=function(){return this.$route.query},l.setRedirect=function(t){window.sessionStorage.setItem("redirectURL",JSON.stringify(t||l.getAbsPath()))},l.getRedirect=function(){return JSON.parse(window.sessionStorage.getItem("redirectURL"))},l.cleanRedirect=function(){window.sessionStorage.removeItem("redirectURL")},l.getAbsPath=function(){return window.location.pathname+window.location.search+window.location.hash},l.redirectTo=function(t){i["a"].push(t||"./")},l.getLoginData=function(){return u["a"].getPayload()},l.setLoginData=function(t){u["a"].setPayload(t)},l.updateLoginData=function(t){return l.setLoginData(t(l.getLoginData()))},l.removeLoginData=function(){return u["a"].clear()},l.saveSUToken=function(t){window.sessionStorage.setItem("suToken",t)},l.getSUToken=function(){return window.sessionStorage.getItem("suToken")},l.removeSUToken=function(){window.sessionStorage.removeItem("suToken")},l.getPosts=function(t){return this.fetchJSON(this.apiFor("posts")).then(t)},l.refreshToken=function(t){if(!t){var e=l.getLoginData();t=e&&e.rftoken}return t?l.fetchJSON(l.apiFor("login","token","refresh"),"POST",{token:t},!1,!1).then((function(t){if(t.success){var e=l.getLoginData();return e&&(e.token=t.token)&&l.setLoginData(e),e}return l.removeLoginData(),Promise.reject(t.msg)})):Promise.reject("No token")},l.formatDate=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=new Date(t);return isNaN(n.getTime())?t:e?n.toLocaleString():n.toLocaleDateString()}catch(a){return}},l.getPostsData=function(){return JSON.parse(window.localStorage.postData||"null")},l.deleteDraft=function(){return window.localStorage.removeItem("postDraft")},l.setPosts=function(t){window.localStorage.postData=JSON.stringify(t)},l.apiFor=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"".concat(l.apiBase,"/").concat(e.join("/"))},l.encodeArgs=function(t){return Object.entries(t).map((function(t){var e=Object(r["a"])(t,2),n=e[0],a=e[1];return"".concat(a,"=").concat(n)})).join("&")},l.processPosts=function(t){var e=window.localStorage.postData;return e?t(JSON.parse(e)):l.getPosts(t),!1},l.ajaxPromised=function(t){return Object(o["a"])(t).then((function(t){return t.data}))},l.fetchJSON=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=this.getLoginData(),c=s?s.token:"";e=e.toUpperCase();var u=Object(a["a"])({},n);i&&(u["__timestamp"]=(new Date).getTime());var l={url:t,method:e,data:u,params:"GET"===e?u:void 0};return r&&(l.headers={Authorization:"Bearer ".concat(c)}),o["a"].request(l).then((function(t){return t.data}))},l.fetchJSONWithSuccess=function(){return this.fetchJSON.apply(this,arguments).then((function(t){return t.success?"undefined"!==typeof t.result?t.result:"undefined"!==typeof t.data?t.data:t:Promise.reject(t.msg)}))},l.getTokenExpiryTime=function(t){try{var e=t.split(".")[0],n=JSON.parse(window.atob(e)),a=n.exp;return new Date(1e3*a)}catch(r){return console.error(r),new Date}},l.isTokenExpired=function(t){return l.getTokenExpiryTime(t||this.getLoginData().token)<new Date},l.showToast=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.toast.show=!1,this.toast.text=t.toString(),this.toast.color=e,this.toast.show=!0},l.getToastOption=function(){return{show:!1,text:"",color:""}},l.addEventListener=function(t,e){return addEventListener(t,e),function(){removeEventListener(t,e)}},l.addStorageListener=function(t){return l.addEventListener("storage",t)},e["a"]=l},"9cf0":function(t,e,n){"use strict";n.d(e,"a",(function(){return Kt}));var a={};n.r(a),n.d(a,"getContent",(function(){return Tt})),n.d(a,"newRecord",(function(){return _t})),n.d(a,"searchRecords",(function(){return Et})),n.d(a,"editRecord",(function(){return St})),n.d(a,"deleteRecord",(function(){return Lt})),n.d(a,"upsertRecord",(function(){return Pt})),n.d(a,"deleteByIndex",(function(){return Mt})),n.d(a,"removeApplication",(function(){return Rt}));n("a4d3"),n("e01a"),n("81b8"),n("99af"),n("4de4"),n("4160"),n("a630"),n("a15b"),n("d81d"),n("4ec9"),n("a9e3"),n("dca8"),n("e21d"),n("b64b"),n("d3b7"),n("a6fd"),n("5d41"),n("c760"),n("7ed3"),n("4d63"),n("ac1f"),n("25f0"),n("6062"),n("8a79"),n("3ca3"),n("5319"),n("1276"),n("2ca0"),n("498a"),n("10d1"),n("159b"),n("ddb0");var r=n("2909"),o=(n("96cf"),n("1da1")),i=n("d4ec"),s=n("bee2"),c=n("5530"),u=n("53ca"),l=n("3835"),d=n("0fc3"),h=n("a49b"),f=n.n(h),m=n("90b9"),v=n("6196"),p=function t(e,n){Object(i["a"])(this,t),this.template=e,this.returnValue=n},g=(n("45fc"),n("1bf2"),function t(e){Object(i["a"])(this,t),this.value=e}),b=function(){function t(){Object(i["a"])(this,t),this.state={}}return Object(s["a"])(t,null,[{key:"create",value:function(e){var n=new t;return[new Proxy(n,{has:function(t,e){return Reflect.has(t.state||t,e)},get:function(t,e){return Reflect.get(t.state||t,e)},set:function(t,n,a){if(a instanceof g)return Reflect.set(t.state||t,n,a.value);var r=Reflect.get(t.state||t,n),o=Reflect.set(t.state||t,n,a);return e(n,a,r),o},ownKeys:function(t){return Reflect.ownKeys(t)}}),n]}}]),t}(),y=function(){function t(e){var n=this;Object(i["a"])(this,t),this.updateCallback=e;var a=b.create((function(t,e,a){n.triggerCallback(t,e,a)})),r=Object(l["a"])(a,2),o=r[0],s=r[1];this.state=o,this.rawState=s,this.cell=new k}return Object(s["a"])(t,[{key:"triggerCallback",value:function(t,e,n){this.updateCallback&&this.updateCallback(t,e,n)}},{key:"setCallback",value:function(t){this.updateCallback=t}},{key:"defineState",value:function(t,e){if(t in this.state)return this.state[t];this.state[t]=new g(e instanceof Function?e():e)}},{key:"useState",value:function(t){var e=this;if(!this.cell.currentIsDefined()){var n=this.cell.index,a=t instanceof Function?t():t,r=function(t){var a=Object(l["a"])(e.cell.values[n],1),r=a[0],o=t instanceof Function?t(r):t;e.cell.values[n][0]=o,e.triggerCallback(n.toString(),o,r)};this.cell.setCurrent([a,r])}return this.cell.getValueAndAdvance()}},{key:"reset",value:function(){this.cell.reset()}}]),t}(),k=function(){function t(){Object(i["a"])(this,t),this.values=[],this.currentIndex=0}return Object(s["a"])(t,[{key:"getValueAndAdvance",value:function(){return this.values[this.currentIndex++]}},{key:"currentIsDefined",value:function(){return this.currentIndex<this.values.length}},{key:"setCurrent",value:function(t){this.values[this.currentIndex]=t}},{key:"advance",value:function(){++this.currentIndex}},{key:"reset",value:function(){this.currentIndex=0}},{key:"clear",value:function(){this.values=[],this.currentIndex=0}},{key:"currentValue",get:function(){return this.values[this.currentIndex]}},{key:"index",get:function(){return this.currentIndex}}]),t}(),w=function(){function t(){Object(i["a"])(this,t),this.cell=new k}return Object(s["a"])(t,[{key:"useEffect",value:function(t,e){if(this.cell.currentIsDefined()){var n=Object(l["a"])(this.cell.currentValue,2),a=n[0],r=n[1],o=a.length!==e.length||e.some((function(t,e){return t!==a[e]}));o&&(null===r||void 0===r||r(),this.cell.setCurrent([e,t()]))}else this.cell.setCurrent([e,t()]);this.cell.advance()}},{key:"reset",value:function(){this.cell.reset()}},{key:"clear",value:function(){this.cell.values.forEach((function(t){var e=Object(l["a"])(t,2),n=(e[0],e[1]);return null===n||void 0===n?void 0:n()})),this.cell.clear()}}]),t}(),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:"",justify:"center"}},[n("v-dialog",{attrs:{width:"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v(t._s(t.title))]),n("v-card-text",[t._v(" "+t._s(t.message)+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:t.commitReject}},[t._v(" Disagree ")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.commitConfirm}},[t._v(" Agree ")])],1)],1)],1)],1)},D=[],x=n("262e"),j=n("2caf"),O=n("9ab4"),T=n("60a3"),_=function(t){Object(x["a"])(n,t);var e=Object(j["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.dialog=!0,t.isConfirmed=!1,t}return Object(s["a"])(n,[{key:"onDialogChanged",value:function(t,e){e||(this.isConfirmed||this.onReject(),this.$destroy(),this.cleanUp&&this.cleanUp())}},{key:"commitConfirm",value:function(){this.isConfirmed=!0,this.onConfirm(),this.dialog=!1}},{key:"commitReject",value:function(){this.isConfirmed=!1,this.onReject(),this.dialog=!1}}]),n}(T["d"]);Object(O["a"])([Object(T["c"])(Function)],_.prototype,"onConfirm",void 0),Object(O["a"])([Object(T["c"])(Function)],_.prototype,"onReject",void 0),Object(O["a"])([Object(T["c"])(Function)],_.prototype,"cleanUp",void 0),Object(O["a"])([Object(T["c"])(String)],_.prototype,"title",void 0),Object(O["a"])([Object(T["c"])(String)],_.prototype,"message",void 0),Object(O["a"])([Object(T["e"])("dialog")],_.prototype,"onDialogChanged",null),_=Object(O["a"])([T["a"]],_);var E=_,S=E,L=n("2877"),P=n("6544"),M=n.n(P),R=n("8336"),A=n("b0af"),N=n("99d9"),$=n("169a"),U=n("a722"),V=n("2fa4"),I=Object(L["a"])(S,C,D,!1,null,null,null),F=I.exports;M()(I,{VBtn:R["a"],VCard:A["a"],VCardActions:N["a"],VCardText:N["c"],VCardTitle:N["d"],VDialog:$["a"],VLayout:U["a"],VSpacer:V["a"]});var B=n("2b0e"),H=function(t,e){return new B["default"]({render:function(e){return e(F,{props:t})}}).$mount(e)},W=function(t){return d["f"](t)||d["d"](t)},q=function(t){return d["i"](t)||d["g"](t)},J=function(t){return d["h"](t)&&d["e"](t.tag)},Y=function(t){return d["h"](t)&&d["i"](t.tag)},z=function(t){return d["h"](t)&&d["h"](t.props)},G=function(t){return Y(t)&&!t.tag},K=function(t){return d["h"](t)&&d["j"](t.tag)},Z=function(t){return W(t)||q(t)||J(t)||Y(t)},X=function(t){return W(t)?"empty":q(t)?"text":Y(t)?"native":"function"},Q=function(t,e){return X(t)===X(e)&&(!Y(t)||!Y(e)||t.tag===e.tag)};function tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(d["c"](t))return{tag:"",props:{children:t}};for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];return{tag:t,props:Object(c["a"])(Object(c["a"])({},e||{}),{},{children:a}),key:null===e||void 0===e?void 0:e.key}}function et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return d["c"](t)?tt(t):{tag:t,props:Object(c["a"])(Object(c["a"])({},e||{}),{},{children:n}),key:null===e||void 0===e?void 0:e.key}}n("0481"),n("4069");function nt(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return d["c"](t)?et(t):((Z(e)||d["c"](e))&&(a=[e].concat(Object(r["a"])(a)),e={}),et(t,e,a.flat()))}var at=function(t){var e=new Map;return function(n){if(e.has(n))return e.get(n);var a=t(n);return e.set(n,a),a}},rt=at((function(t){var e=document.createElement(t);return"[object HTMLUnknownElement]"!==e.toString()})),ot=at((function(t){return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return nt.apply(void 0,[t].concat(n))}})),it=new Proxy(nt,{has:function(t,e){return Reflect.has(t,e)||rt(e)},get:function(t,e){return Reflect.has(t,e)?Reflect.get(t,e):"Fragment"===e?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return nt(e.flat())}:ot(e)}}),st=(n("c975"),n("a434"),function(){var t=window.requestIdleCallback;if(t)return new Promise((function(e){return t((function(t){return e((function(){return t.timeRemaining()}))}))}));var e=+new Date+514;return new Promise((function(t){return setTimeout((function(){return t((function(){var t=e-+new Date;return t<0?0:t}))}),0)}))}),ct=function(){function t(e){Object(i["a"])(this,t),this.currentWork=null,this.isRunning=!1,this.worker=e}return Object(s["a"])(t,[{key:"changeWorkTo",value:function(t){this.currentWork=t}},{key:"summon",value:function(){var t=this;this.isRunning||(this.isRunning=!0,st().then((function(e){return t.workLoop(e)})))}},{key:"kill",value:function(){this.isRunning=!1}},{key:"whenWorkIsEmpty",value:function(t){this.workEmptyCallback=t}},{key:"workLoop",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=!1;while(this.currentWork&&!a)this.currentWork=this.worker(this.currentWork),a=e()<1;if(this.currentWork||null===(n=this.workEmptyCallback)||void 0===n||n.call(this),!this.isRunning){t.next=8;break}return t.next=6,st();case 6:r=t.sent,this.workLoop(r);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),ut="state",lt="effect",dt="memo",ht=function(t,e){return t.length!==e.length||t.some((function(t,n){return t!==e[n]}))},ft=Symbol("roselia-context"),mt=function(t){var e=Symbol(),n=function(t){var n=t.value,a=t.children;return{tag:ft,props:{value:n,contextSymbol:e},child:tt(a)}};return n.$defaultValue=t,{Provider:n,ContextSymbol:e}},vt=function(t,e){var n=e;while(n){if(K(n.vNode)&&n.vNode.tag===ft&&n.vNode.props.contextSymbol===t.ContextSymbol)return n.vNode.props.value;n=n.parent}return t.Provider.$defaultValue},pt=function(t){return t.startsWith("on")},gt=function(t){return"children"!==t&&!pt(t)};function bt(t,e,n){var a=Object.keys(n);a.filter(pt).filter((function(t){return!(t in e)||n[t]!==e[t]})).forEach((function(e){var a=e.substring(2).toLowerCase();t.removeEventListener(a,n[e])})),a.filter(gt).filter((function(t){return!(t in e)})).forEach((function(e){return t[e]=""}));var r=Object.keys(e);r.filter(pt).filter((function(t){return n[t]!==e[t]})).forEach((function(n){var a=n.substring(2).toLowerCase();t.addEventListener(a,e[n])}));var o=r.filter(gt).filter((function(t){return n[t]!==e[t]}));d["k"](t,d["m"](e,o))}function yt(t){if(W(t))return null;if(q(t))return document.createTextNode(t.toString());if(Y(t)&&t.tag){var e=document.createElement(t.tag);if(bt(e,t.props,{}),t.props.ref)if(d["e"](t.props.ref)){var n=t.props.ref;e.addEventListener("mounted",(function(){n.call(e,e)}))}else t.props.ref.current=e;return e}return null}function kt(t){return q(t)?t.toString():""}var wt=function t(e,n){var a;(e.effectTag="deletion",G(e.vNode))?Ct(e,n):e.dom?(e.dom.dispatchEvent(new Event("beforeDestroy")),null===(a=e.dom.parentNode)||void 0===a||a.removeChild(e.dom)):e.child&&t(e.child,n)},Ct=function(t,e){var n=t.child;while(n)wt(n,e),n=n.sibling},Dt=function(t){var e;while(t&&!t.sibling)t=t.parent;return null===(e=t)||void 0===e?void 0:e.sibling},xt=function(){function t(){var e=this;Object(i["a"])(this,t),this.wipRoot=null,this.currentFiber=null,this.hookIndex=0,this.currentRoot=null,this.deletions=[],this.domScheduler=new ct((function(t){return e.performUpdateWork(t)})),this.domScheduler.whenWorkIsEmpty((function(){return e.wipRoot&&e.commitRoot()})),this.domScheduler.summon()}return Object(s["a"])(t,[{key:"render",value:function(t,e){this.wipRoot={dom:e,vNode:t,alternate:this.currentRoot,effectTag:"placement"},this.domScheduler.changeWorkTo(this.wipRoot)}},{key:"refresh",value:function(){var t,e;this.wipRoot={dom:(null===(t=this.currentRoot)||void 0===t?void 0:t.dom)||null,vNode:null===(e=this.currentRoot)||void 0===e?void 0:e.vNode,alternate:this.currentRoot,effectTag:"update"},this.deletions=[],this.domScheduler.changeWorkTo(this.wipRoot)}},{key:"useRefresh",value:function(){var t=this,e=this.currentFiber;return function(){t.wipRoot={dom:(null===e||void 0===e?void 0:e.dom)||null,vNode:null===e||void 0===e?void 0:e.vNode,alternate:e,effectTag:"update"},t.deletions=[],t.domScheduler.changeWorkTo(t.wipRoot)}}},{key:"destroy",value:function(){this.domScheduler.kill()}},{key:"withHook",value:function(t){var e,n,a,r,o,i=null===(e=this.currentFiber)||void 0===e||null===(n=e.alternate)||void 0===n||null===(a=n.hooks)||void 0===a?void 0:a[this.hookIndex],s=t(i),c=Object(l["a"])(s,2),u=c[0],d=c[1];return null===(r=this.currentFiber)||void 0===r||null===(o=r.hooks)||void 0===o||o.push(u),++this.hookIndex,d}},{key:"useEffect",value:function(t,e){return this.withHook((function(n){var a,r=!n||ht(n.deps,e),o={type:lt,deps:e,clearEffect:null===n||void 0===n?void 0:n.clearEffect};r&&(null===(a=o.clearEffect)||void 0===a||a.call(o),o.clearEffect=t());return[o,void 0]}))}},{key:"useMemo",value:function(t,e){return this.withHook((function(n){var a={type:dt,value:(null===n||void 0===n?void 0:n.value)||null,deps:e},r=!n||ht(n.deps,e);return r&&(a.value=t()),[a,a.value]}))}},{key:"useCallback",value:function(t,e){return this.useMemo((function(){return t}),e)}},{key:"useState",value:function(t){var e,n,a,r,o,i=this,s=null===(e=this.currentFiber)||void 0===e||null===(n=e.alternate)||void 0===n||null===(a=n.hooks)||void 0===a?void 0:a[this.hookIndex],c=s||{type:ut,state:t instanceof Function?t():t,queue:[],setState:function(t){c.queue.push(t),i.refresh()}};return s&&(null===s||void 0===s||s.queue.forEach((function(t){c.state=t instanceof Function?t(c.state):t})),s.queue=[]),null===(r=this.currentFiber)||void 0===r||null===(o=r.hooks)||void 0===o||o.push(c),++this.hookIndex,[c.state,c.setState]}},{key:"useContext",value:function(t){var e;return vt(t,null!==(e=this.currentFiber)&&void 0!==e?e:void 0)}},{key:"whenDomUpdated",value:function(t){this.domUpdatedCallback=t}},{key:"performUpdateWork",value:function(e){if(t.currentActiveOwner=this,J(e.vNode)?this.updateFunctionVNode(e):K(e.vNode)?this.updateControllNode(e):this.updateHostVNode(e),e.child)return e.child;var n=e;while(n){if(n.sibling)return n.sibling;n=n.parent}return null}},{key:"commitRoot",value:function(){var t,e,n,a=this;this.deletions.forEach((function(t){return a.commitWork(t)})),this.deletions=[],this.commitWork(null===(t=this.wipRoot)||void 0===t?void 0:t.child),this.currentRoot=this.wipRoot,(null===(e=this.wipRoot)||void 0===e?void 0:e.alternate)&&(this.wipRoot.alternate.alternate=null),this.wipRoot=null,null===(n=this.domUpdatedCallback)||void 0===n||n.call(this)}},{key:"commitWork",value:function(t){if(t){var e=t.parent;while(!(null===(n=e)||void 0===n?void 0:n.dom)){var n,a;e=null===(a=e)||void 0===a?void 0:a.parent}var r=e.dom;if("placement"===t.effectTag&&t.dom){var o=Dt(t);(null===o||void 0===o?void 0:o.dom)&&r.contains(o.dom)?r.insertBefore(t.dom,o.dom):r.appendChild(t.dom),t.dom.dispatchEvent(new Event("mounted"))}else if("update"===t.effectTag&&t.dom){var i,s,c;if(z(t.vNode)&&z(null===(i=t.alternate)||void 0===i?void 0:i.vNode))bt(t.dom,t.vNode.props,null===(s=t.alternate)||void 0===s?void 0:s.vNode.props);else bt(t.dom,{textContent:kt(t.vNode)},{textContent:kt(null===(c=t.alternate)||void 0===c?void 0:c.vNode)})}else if("deletion"===t.effectTag){var u;wt(t,r),null===(u=t.hooks)||void 0===u||u.forEach((function(t){var e;t.type===lt&&(null===(e=t.clearEffect)||void 0===e||e.call(t))}))}this.commitWork(t.child),this.commitWork(t.sibling)}}},{key:"reconcileChildren",value:function(t,e){var n,a=null===(n=t.alternate)||void 0===n?void 0:n.child,r=0,o=null;while(r<e.length||a){var i,s,c=e[r],u=null,l=Q(null===(i=a)||void 0===i?void 0:i.vNode,c);a&&l?u={dom:a.dom,parent:t,alternate:a,vNode:c,effectTag:"update"}:(u={dom:null,parent:t,alternate:null,effectTag:"placement",vNode:c},a&&(a.effectTag="deletion",this.deletions.push(a))),a=null===(s=a)||void 0===s?void 0:s.sibling,0===r?t.child=u:o&&(o.sibling=u),o=u,++r}}},{key:"updateFunctionVNode",value:function(t){this.currentFiber=t,this.hookIndex=0,this.currentFiber.hooks=[];var e=null;try{e=t.vNode.tag(t.vNode.props)}catch(a){console.error("Rendering virtual node:",t.vNode,t.vNode.tag),console.error(a)}var n=[e];this.reconcileChildren(t,n)}},{key:"updateHostVNode",value:function(t){t.dom||(t.dom=yt(t.vNode)),z(t.vNode)&&this.reconcileChildren(t,t.vNode.props.children)}},{key:"updateControllNode",value:function(t){switch(t.vNode.tag){case ft:return void this.reconcileChildren(t,[t.vNode.child])}}}]),t}(),jt=n("d0e9"),Ot=n("7c2c"),Tt=function(t){return Object(Ot["a"])("get","plugin-storage/get-content",t.forMe)(t)},_t=Object(Ot["a"])("post","plugin-storage/new-record"),Et=Object(Ot["a"])("get","plugin-storage/search-records"),St=Object(Ot["a"])("post","plugin-storage/edit-record"),Lt=Object(Ot["a"])("post","plugin-storage/delete-record"),Pt=Object(Ot["a"])("post","plugin-storage/upsert-record"),Mt=Object(Ot["a"])("post","plugin-storage/delete-by-index"),Rt=Object(Ot["a"])("post","plugin-storage/remove-application");function At(t){if(!window.APlayer){var e=document.createElement("script"),n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.css",e.async=!0,e.onload=t||null,e.src="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.js",document.head.appendChild(n),document.body.appendChild(e)}}function Nt(t){var e=document.createElement("div");return e.innerHTML=t.replace(/<em>(.*?)<\/em>/,(function(t,e){return"*".concat(e,"*")})),e.innerText||e.textContent}function $t(t){return t instanceof Array?t.map($t).join(""):(t instanceof p&&(t=t.template),t instanceof HTMLElement?t.outerHTML:d["g"](t)||d["i"](t)?t:"")}function Ut(t,e,n){return t.replace(new RegExp((e||["{{","}}"]).join("\\s*?(([\\s\\S]+?))\\s*?"),"gm"),n)}function Vt(t,e){var n,a=function(t){return"with(data) { with (states) { with(functions) {return (".concat(t,");}}}")},r=/^([a-zA-Z_$]+[a-zA-Z_0-9]*){([\s\S]+)}/.exec(t),o=!1;if(r){var i=Object(l["a"])(r,3),s=(i[0],i[1]),c=i[2],u=e[s]||e.functions[s];d["e"](u)&&(n=u(Nt(c)),o=!0)}return o||(t=Nt(t),n=new Function("data",a(t)).call(e,e)),n}function It(t,e,n){var a=function(t){if(!f.a.enableRoseliaScript)return"<pre><code>".concat(t,"</code></pre>");try{return $t(Vt(t,e))}catch(n){return console.log("On rendering:",t),console.error(n),t}};return Ut(t,n,(function(t,e){var n=e.trim();if(n.startsWith("//"))return"";var r=!n.endsWith(";"),o=r?n:n.substring(0,n.length-1),i=a(o);return r?i:""}))}var Ft=Symbol("shouldBypassSelfish");function Bt(t,e){var n=new WeakMap,a=new Set(e);return new Proxy(t,{get:function(t,e){if(a.has(e))return null;var r=Reflect.get(t,e);return d["e"](r)?r[Ft]?r:(n.has(r)||n.set(r,r.bind(t)),n.get(r)):r}})}function Ht(t){return new Proxy(t,{has:function(t,e){return!0},get:function(t,e){if(e!==Symbol.unscopables)return Reflect.get(t,e)}})}function Wt(t,e){var n=new Set(e);return[n,new Proxy(t,{get:function(t,e){return n.has(e)?null:Reflect.get(t,e)}})]}function qt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Proxy(t,{get:function(t,n){var a=Reflect.get(t,n);return e&&"object"===Object(u["a"])(a)?qt(a):a},set:function(t,e){return!1},deleteProperty:function(){return!1}})}function Jt(t){var e=Object(c["a"])({},t);return Object.keys(e).forEach((function(t){e.hasOwnProperty(t)&&"object"===Object(u["a"])(e[t])&&!Object.isFrozen(e[t])&&(e[t]=Jt(e[t]))})),Object.freeze(e)}Bt.byPass=function(t){return t[Ft]=!0,t};var Yt=Symbol("yukina"),zt=Object(c["a"])({},f.a.theme),Gt=function(){function t(e){Object(i["a"])(this,t),this.app=e,this.scriptEvaluator=new Kt(e);var n=Wt(qt(Ht(Bt(this.scriptEvaluator,["app"]))),[]),a=Object(l["a"])(n,2),r=a[0],o=a[1];this.context=o,this.hiddenFields=r}return Object(s["a"])(t,[{key:"render",value:function(e){this.scriptEvaluator.inRenderMode=!0,this.scriptEvaluator.pendingFunctions=[];try{this.toInject=this.app;var n=It(e,this.context,t.roseliaScriptDelim);return this.resetHookCounts(),n}catch(a){return console.error(a),e}finally{this.scriptEvaluator.inRenderMode=!1}}},{key:"evaluateOn",value:function(t){try{return Vt(t,this.context)}catch(e){return}}},{key:"cleanScript",value:function(e){return Ut(e,t.roseliaScriptDelim,(function(t){return""}))}},{key:"renderAsync",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return n.render(e)})).then((function(t){return t})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"mount",value:function(e,n){n.innerHTML="",this.scriptEvaluator.inRenderMode=!1;var a=Ut(e,t.roseliaScriptDelim,(function(t){return Nt(t)||""})),r=Object(jt["a"])(a),o="with(this) { with({__r:createElement}) { with(states) { with(functions) { return (".concat(r,"); } } } }");try{var i=new Function(o);this.scriptEvaluator._domOwner.render(i.call(this.context),n)}catch(s){n.innerHTML=this.render(e),this.scriptEvaluator.sendNotification({message:"There was an error while rendering that post. Please open console to check it out.",color:"warning"}),this.scriptEvaluator.toast("Falling back to rendering...","warning"),console.error(s)}}},{key:"injectEvents",value:function(){this.scriptEvaluator.injectEventsOn(this.toInject)}},{key:"pushContext",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"context";return this.scriptEvaluator.def(n,t),function(){e.scriptEvaluator.undef(n)}}},{key:"pushMethod",value:function(t,e){var n=this;return this.pushContext((function(){return t(n.context).apply(void 0,arguments)}),e)}},{key:"hideAttributes",value:function(t){var e=this,n=t.filter((function(t){return!e.hiddenFields.has(t)}));return n.forEach((function(t){return e.hiddenFields.add(t)})),function(){return n.forEach((function(t){return e.hiddenFields.delete(t)}))}}},{key:"clearHiddenAttributes",value:function(){this.hiddenFields.clear()}},{key:"enterCommentMode",value:function(){return this.hideAttributes(["changeExtraDisplaySettings","importJS","request","roseliaApi","changeTheme","changeThemeOnce","resetTheme","saveCurrentTheme","switchToColorMode","forceSwitchToColorMode","resetColorMode","previewColor","undef","def","defState","useState","useInterval","useTimeout","sendNotification","pluginStorage"])}},{key:"setDomUpdateCallback",value:function(t){var e=this;this.scriptEvaluator.stateManager.setCallback((function(){return e.scriptEvaluator._domOwner.refresh()})),this.scriptEvaluator._domOwner.whenDomUpdated((function(){e.resetHookCounts(),t()}))}},{key:"setRenderUpdateCallback",value:function(t){this.scriptEvaluator.stateManager.setCallback(t)}},{key:"resetMounted",value:function(){this.scriptEvaluator.mounted=!1}},{key:"resetHookCounts",value:function(){this.scriptEvaluator._effectManager.reset(),this.scriptEvaluator.stateManager.reset()}},{key:"destroy",value:function(){this.scriptEvaluator._domOwner.destroy()}}]),t}();Gt.roseliaScriptDelim=["(?:Roselia|roselia|r|R){{","}}"];var Kt=function(){function t(e){var n=this;Object(i["a"])(this,t),this.inRenderMode=!1,this.hyperScript=Bt.byPass(new Proxy(it,{has:function(t,e){return Reflect.has(t,e)},get:function(t,e){return n.inRenderMode?function(t){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return n.$createElement.apply(n,[e,t].concat(r))}:t[e]},apply:function(t,e,a){return Reflect.apply(n.inRenderMode?n.$createElement:it,e,a)}})),this.Y=function(t){return function(t){return t(t)}((function(e){return t((function(t){return e(e)(t)}))}))},this.request={get:function(t,e){return n.askForAccess("fetch","This post would like to fetch data","It wants to access ".concat(t,".")).then((function(){return v["a"].get(t,{params:e}).then((function(t){return t.data}))}))}},this.pluginStorage=a,this.Math=Math,this.Object=Object,this.app=e;var r=function(){var t;n.customFunctions={app:null},n.functions=Bt(n.customFunctions),n.stateManager=new y,n._effectManager.clear(),n._effectManager=new w,n.states=n.stateManager.state,n.mounted=!1,null===(t=n._domOwner)||void 0===t||t.destroy(),n._domOwner=new xt};this.customFunctions={app:null},this.functions=Bt(this.customFunctions),this.stateManager=new y,this._effectManager=new w,this._domOwner=new xt,this.mounted=!1,r(),this.app.$on("postUnload",(function(){r()})),this.askAccess=new Map,this.pendingFunctions=[]}return Object(s["a"])(t,[{key:"then",value:function(t){this.mounted?this.app.$nextTick(t):this.pendingFunctions.push(t)}},{key:"injectEventsOn",value:function(t){this.pendingFunctions.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.$nextTick(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.pendingFunctions=[],this.mounted=!0}},{key:"music",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;At((function(){return e.app.$emit("aPlayerLoaded")}));var r,o=this.randomID(),i=function(e){var i=e||document.getElementById(o);r=new window.APlayer({container:i,narrow:!1,autoplay:n,mutex:!0,theme:f.a.theme.accent,mode:"circulation",showlrc:1,preload:"metadata",audio:t}),r.on("loadstart",(function(){Array.from(i.getElementsByClassName("aplayer-title")).forEach((function(t){t&&(t.style.color=f.a.theme.secondary)})),a&&a(r)}))};return this.then((function(){window.APlayer?e.then(i):e.app.$once("aPlayerLoaded",(function(){e.then(i)})),e.app.$once("postUnload",(function(){r.destroy()}))})),this.inRenderMode?new p('<div id="'.concat(o,'"></div>'),r):this.createElement("div",{id:o,ref:function(t){window.APlayer?i(t):e.app.$once("aPlayerLoaded",(function(){i(t)}))}})}},{key:"heimu",value:function(t){return this.createElement("span",{className:"heimu"},[t])}},{key:"cite",value:function(t,e){return'<a href="post?p='.concat(e,'">').concat(t,"</a>")}},{key:"randomID",value:function(t){return Number(Math.random().toString().substring(3,t)+Date.now()).toString(36)}},{key:"onceLoad",value:function(t){this.app.$once("postLoaded",t)}},{key:"onceUnload",value:function(t){this.app.$once("postUnload",t)}},{key:"extendAttributes",value:function(t,e){this.element(t).then((function(t){d["k"](t,e),Object.keys(e).forEach((function(n){n.startsWith("on")&&t.addEventListener(n.substring(2).toLowerCase(),e[n])}))}))}},{key:"btn",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,o=this.randomID();a instanceof Array&&(a=a.join(" ")),this.inRenderMode&&e&&this.then((function(){n.getElement(o).addEventListener("click",e)})),this.inRenderMode&&r&&this.extendAttributes(o,r);var i="v-btn v-btn--contained v-size--default ".concat(a);return this.inRenderMode?new p('<button id="'.concat(o,'" class="').concat(i,'">').concat(t,"</button>"),o):this.createElement("button",Object(c["a"])(Object(c["a"])({},r||{}),{},{className:i,onclick:e}),[t])}},{key:"toast",value:function(t,e){this.app.showToast(t,e||"info")}},{key:"formula",value:function(t){return"$ ".concat(t," $")}},{key:"formulation",value:function(t){return"$$ ".concat(t," $$")}},{key:"formulationEscape",value:function(){var t=this,e=[["$$","$$"],["$","$"],["\\(","\\)"]];e.map((function(t){return t.map((function(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")})).join("\\s*(.*?)\\s*")})).map((function(t){return new RegExp(t,"gms")})).forEach((function(e){t.app.postData.content=t.app.postData.content.replace(e,(function(t,e){return Nt(e)}))}))}},{key:"importJS",value:function(t,e){return new Promise((function(n,a){var r=document.createElement("script");r.addEventListener("load",e),r.addEventListener("load",n),r.addEventListener("error",a),r.async=!0,r.src=t,document.body.appendChild(r)}))}},{key:"def",value:function(t,e){var n=this;if(!d["c"](t))return e instanceof p?(this.customFunctions[t]=e.returnValue,e.template):(this.customFunctions[t]=e,d["i"](e)||e instanceof HTMLElement?e:void 0);if(!d["c"](e))throw new Error("When name is an array, result should also be an array.");t.forEach((function(t,a){return n.def(t,e[a])}))}},{key:"undef",value:function(t){this.customFunctions[t]=void 0}},{key:"defState",value:function(t,e){this.stateManager.defineState(t,e)}},{key:"audio",value:function(t){var e=this.randomID();return this.inRenderMode?new p("<audio id='".concat(e,"' src='").concat(t,"' hidden='true'/>"),e):this.createElement("audio",{src:t,hidden:!0})}},{key:"getElement",value:function(t){if(t instanceof p&&(t=d["i"](t.returnValue)?t.returnValue:t.template),t instanceof HTMLElement&&(t=t.id),d["i"](t)){var e=/id=['"]([a-zA-Z0-9-]+)['"]/.exec(t);e&&(t=e[1])}var n=t in this.functions?this.functions[t]:t;return document.getElementById(n instanceof Element?n.id:n)}},{key:"raw",value:function(t){return this.createElement("pre",{},["Roselia{{",t,"}}"])}},{key:"previewColor",value:function(t){var e=this,n=this.app.preview.color;this.app.preview.color=t,this.onceUnload((function(){e.app.preview.color=n}))}},{key:"element",value:function(t){var e=this;return new Promise((function(n,a){var r=e.getElement(t);if(r)return n(r);e.then((function(){var r=e.getElement(t);r?n(r):a()}))}))}},{key:"createElement",value:function(t,e,n){return this.inRenderMode?d["e"](t)?t(Object(c["a"])(Object(c["a"])({},e||{}),{},{children:n||[]})):this.createNativeElement(t,e,n||[]):tt.apply(void 0,[t,e||null].concat(Object(r["a"])(n||[])))}},{key:"$createElement",value:function(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return this.inRenderMode?d["c"](t)?this.createNativeElement("div",{},t):(("object"!==Object(u["a"])(e)||e instanceof Node)&&(a=[e].concat(Object(r["a"])(a)),e={}),this.createElement(t,e,a)):nt.apply(void 0,[t,e].concat(Object(r["a"])(a)))}},{key:"createNativeElement",value:function(t,e,n){var a=this,r=document.createElement(t);return r.id=this.randomID(),e&&this.extendAttributes(r,e),n&&n.forEach((function(t){r.appendChild(d["i"](t)?a.createTextNode(t):t)})),r}},{key:"createTextNode",value:function(t){return document.createTextNode(t)}},{key:"setPreview",value:function(t,e){var n=this,a=function(t){t.preventDefault(),n.app.preview.show=!0,n.app.preview.cacheData=null,n.app.preview.current=n.app.postData.id,["title","subtitle","img","color"].forEach((function(t){var a=e[t];d["f"](a)||(n.app.preview[t]=a)}))},r=function(t){t.preventDefault(),n.app.preview.show=!1},o=function(t){t.preventDefault();try{n.app.$vuetify.goTo(d["g"](e.goTo)?e.goTo:n.getElement(e.goTo),{offset:-200})}catch(a){d["i"](e.goTo)?location.href=e.goTo:n.app.$router.push(e.goTo),console.error(a)}};t instanceof Node?this.element(t).then((function(t){t.addEventListener("mouseover",a),t.addEventListener("mouseout",r),d["f"](e.goTo)||t.addEventListener("click",o)})):z(t)&&(d["f"](e.goTo)||(t.props.onClick=o),t.props.onMouseOver=a,t.props.onMouseOut=r)}},{key:"previewed",value:function(t,e){return this.setPreview(t,e),t}},{key:"doTo",value:function(t,e){return this.element(t).then(e),t}},{key:"icon",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(n instanceof Array&&(n=n.join(" ")),t.startsWith("fa")){var a=t.split("-"),r=Object(l["a"])(a,2),o=r[0],i=r[1];return e="v-icon ".concat(o," fa-").concat(i," ").concat(n),this.createElement("i",{className:e})}return e="v-icon material-icons ".concat(n),this.createElement("i",{className:e},[t])}},{key:"askForAccess",value:function(t,e,n){var a=this;return new Promise((function(r,o){if(a.onceUnload((function(){return a.askAccess.clear()})),a.askAccess.has(t))a.askAccess.get(t)?r():o();else{var i=document.createElement("div");document.getElementById("content").appendChild(i),H({onConfirm:function(){r(),a.askAccess.set(t,!0)},onReject:function(){o(),a.askAccess.set(t,!1)},cleanUp:function(){document.getElementById("content").removeChild(i)},title:e,message:n},i)}})).then((function(){a.toast("Operation ".concat(t," granted"),"success")})).catch((function(){return a.toast("Operation ".concat(t," rejected"),"error"),Promise.reject(new Error("User rejected"))}))}},{key:"askForToken",value:function(){return this.askForAccess("token","This post wish to access your personal info","This post needs to access your token to make requests.")}},{key:"roseliaApi",value:function(){for(var t=this,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.askForToken();case 2:return e.abrupt("return",m["a"].fetchJSON(m["a"].apiFor.apply(m["a"],n),"GET",a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},{key:"nil",value:function(){return null}},{key:"forceChangeTheme",value:function(t,e){e===Yt&&(this.app.$vuetify.theme.setTheme(this.app.$vuetify.theme.dark?"dark":"light",t),Object.assign(this.app.$vuetify.theme.currentTheme,t))}},{key:"currentTheme",value:function(){return Object(c["a"])({},this.app.$vuetify.theme.currentTheme)}},{key:"currentThemePalette",value:function(){var t=this.app.$vuetify.theme.parsedTheme;return Jt(t)}},{key:"changeTheme",value:function(t){var e=this;this.askForAccess("theme","This post would like to change your theme","Changes will discard after refresh").then((function(){e.forceChangeTheme(t,Yt),zt=Object(c["a"])(Object(c["a"])({},zt),t)}))}},{key:"changeThemeOnce",value:function(t){var e=this;this.forceChangeTheme(t,Yt),this.onceUnload((function(){e.forceChangeTheme(zt,Yt)}))}},{key:"resetTheme",value:function(){this.changeThemeOnce(f.a.theme)}},{key:"saveCurrentTheme",value:function(){var t=this,e=this.currentTheme();this.askForAccess("theme","This post would like to save your current theme.","Changes will discard after refresh").then((function(){zt=Object(c["a"])(Object(c["a"])({},zt),e),t.onceUnload((function(){t.forceChangeTheme(e,Yt)}))}))}},{key:"forceSwitchToColorMode",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n===Yt){t.next=3;break}return t.next=3,this.askForAccess("colorMode","This post would like to change your color scheme.","Changes will discard after refresh,");case 3:this.app.$emit("forceSwitchToLight",!!e),this.app.$emit("forceSwitchToDark",!e);case 5:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"switchToColorMode",value:function(t){var e=this;this.forceSwitchToColorMode(t,Yt),this.onceUnload((function(){return e.resetColorMode()}))}},{key:"resetColorMode",value:function(){this.app.$emit("forceSwitchToLight",!1),this.app.$emit("forceSwitchToDark",!1)}},{key:"changeExtraDisplaySettings",value:function(t){this.app.extraDisplaySettings=Object(c["a"])(Object(c["a"])({},this.app.extraDisplaySettings),t)}},{key:"sendNotification",value:function(t){this.app.$store.commit("addNotification",t)}},{key:"log",value:function(){var t;return(t=console).log.apply(t,arguments)}},{key:"useTimeout",value:function(t,e){this.useEffect((function(){if("number"===typeof e){var n=setTimeout((function(){return t()}),e);return function(){return clearTimeout(n)}}}),[e])}},{key:"useInterval",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.useEffect((function(){if("number"===typeof e){var n=setInterval((function(){return t()}),e);return function(){return clearInterval(n)}}}),[e].concat(Object(r["a"])(n)))}},{key:"useEffect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.inRenderMode&&this._effectManager.useEffect(t,e),this._domOwner.useEffect(t,e)}},{key:"useState",value:function(t){return this.inRenderMode?this.stateManager.useState(t):this._domOwner.useState(t)}},{key:"useRef",value:function(t){return this.useState({current:t})[0]}},{key:"useMemo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inRenderMode?t():this._domOwner.useMemo(t,e)}},{key:"useCallback",value:function(t,e){return this.useMemo((function(){return t}),e)}},{key:"useReactiveState",value:function(t){var e=this.useState(t),n=Object(l["a"])(e,2),a=n[0],r=n[1];return this.useMemo((function(){return new Proxy(a,{set:function(t,e,n){var a=Reflect.set(t,e,n);return r(t),a}})}),[])}},{key:"createContext",value:function(t){return mt(t)}},{key:"useContext",value:function(t){return this._domOwner.useContext(t)}},{key:"withEventListener",value:function(t,e,n){return this.element(t).then((function(t){t.addEventListener(e,n)})),t}}]),t}();e["b"]={RoseliaRenderer:Gt,createRenderer:function(t){return new Gt(t)}}},a18c:function(t,e,n){"use strict";n("d3b7");var a=n("2b0e"),r=n("8c4f"),o=n("7876"),i=n.n(o),s=n("a49b"),c=n.n(s),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-bar",{attrs:{userData:t.userData,route:this.$route.fullPath}}),n("v-parallax",{attrs:{dark:"",src:t.meta.images.indexBannerImage}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h1",{staticClass:"display-2 font-weight-thin mb-3"},[t._v(t._s(t.realTitle||t.meta.title))]),n("h4",{staticClass:"subheading"},[t._v(t._s(t.realSubtitle||t.meta.motto))])])],1)],1),n("v-layout",[n("v-container",{attrs:{fluid:"","grid-list-lg":""}},[t.posts.length?t._e():n("v-row",{attrs:{wrap:""}},t._l(6,(function(e){return n("v-col",{key:e,attrs:{cols:"12",xs:"12",sm:"8","offset-sm":"2"}},[n("v-skeleton-loader",{staticClass:"mb-6",class:{"round-corner-card":t.$vuetify.breakpoint.smAndUp},attrs:{elevation:"2",type:"card"}})],1)})),1),n("v-row",{attrs:{wrap:""}},t._l(t.posts,(function(e){return n("v-col",{key:e.id,attrs:{cols:"12",xs:"12",sm:"8","offset-sm":"2"}},[n("v-card",{class:{"round-corner-card":t.$vuetify.breakpoint.smAndUp},attrs:{hover:"",ripple:!1,shaped:t.$vuetify.breakpoint.smAndUp,to:t.getRoute(e)}},[e.img?n("v-img",{attrs:{src:e.img,"lazy-src":t.meta.images.lazyloadImage,ripple:"true"}},[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{staticClass:"fill-height",attrs:{align:"end"}},[n("v-col",{attrs:{cols:"12","align-self":"end",flexbox:""}},[t._l(e.tags,(function(e){return n("router-link",{key:e,attrs:{to:{name:"index",params:{tag:e},query:{tag:e}}}},[n("v-chip",{staticClass:"ma-1"},[t._v(t._s(e))])],1)})),e.secret?n("v-chip",{staticClass:"ma-1",attrs:{color:"success","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("lock")])],1),t._v(" Secret "+t._s(e.secret)+" ")],1):t._e(),e.hidden?n("v-chip",{staticClass:"ma-1",attrs:{color:"grey","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("visibility_off")])],1),t._v(" Hidden ")],1):t._e()],2)],1)],1)],1):t._e(),n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("div",{staticClass:"headline"},[t._v(t._s(e.title))]),n("span",{staticClass:"grey--text subtitle-1"},[t._v(t._s(e.subtitle))])]),n("v-spacer"),n("span",{staticClass:"right caption"},[t._v(t._s(t.formatDate(e.created)||e.date))])],1),e.img?t._e():n("v-col",{attrs:{cols:"12","align-self":"end",flexbox:""}},[t._l(e.tags,(function(e){return n("router-link",{key:e,attrs:{to:{name:"index",params:{tag:e},query:{tag:e}}}},[n("v-chip",{staticClass:"ma-1"},[t._v(t._s(e))])],1)})),e.secret?n("v-chip",{staticClass:"ma-1",attrs:{color:"success","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("lock")])],1),t._v(" Secret "+t._s(e.secret)+" ")],1):t._e(),e.hidden?n("v-chip",{staticClass:"ma-1",attrs:{color:"grey","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("visibility_off")])],1),t._v(" Hidden ")],1):t._e()],2),n("v-card-title",[n("span",{staticClass:"grey--text subtitle-1"},[t._v(t._s(e.author.nickname))])]),t.userData&&t.userData.role&&t.userData.role>=e.author.role?n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{small:"",fab:"",color:"error",to:{name:"edit",query:{post:e.id},params:{deletePost:!0,title:e.title}}}},[n("v-icon",[t._v("delete")])],1),n("v-btn",{attrs:{small:"",fab:"",color:"primary",to:{name:"edit",query:{post:e.id}}}},[n("v-icon",[t._v("mode_edit")])],1)],1):t._e()],1)],1)})),1)],1)],1),n("v-container",[n("div",{staticClass:"text-center"},[n("v-pagination",{attrs:{length:t.pages,circle:""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),n("toast",t._b({on:{showChange:t.changeToast}},"toast",t.toast,!1)),n("blog-footer"),n("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.windowTitle,expression:"windowTitle"}]})],1)},l=[],d=(n("99af"),n("d81d"),n("ac1f"),n("1276"),n("5530")),h=n("90b9"),f=n("f704"),m=n("d569"),v={name:"blog-index",data:function(){return{currentPage:1,prevPage:0,nextPage:0,pages:0,toast:h["a"].getToastOption(),posts:[],meta:c.a,realTitle:"",realSubtitle:"",windowTitle:""}},props:{userData:Object},methods:{makeDirect:function(t){h["a"].setRedirect(h["a"].getAbsPath()),this.$router.push(t)},getTag:function(){return this.getArguments().tag||null},getArguments:function(){return this.$route.query},getPageOffset:function(t){var e=parseInt(this.getArguments().page)||1,n=e+t;return n>0&&n<=this.pages?n:-1},formatDate:function(t){return h["a"].formatDate(t)},shiftPage:function(t){var e=this.getPageOffset(t);-1!==e&&(this.$vuetify.goTo(0),this.$router.push({name:"index",query:{page:e}}))},showToast:function(t,e){return h["a"].showToast.call(this,t,e)},changeToast:function(t){this.toast.show=t},getPostsOnContext:function(t){return t=t||this.getArguments(),this.getPosts(t.page,!1,t.tag)},getPosts:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;t=t||1,this.posts=[];var r={page:t,limit:6};a?(this.windowTitle="".concat(this.meta.title," - Tag: ").concat(a),this.realTitle=a,this.realSubtitle="Posts for tag: ".concat(a),r.tag=a):(this.realTitle="",this.realSubtitle="",this.windowTitle="".concat(this.meta.title," - #").concat(t)),h["a"].fetchJSON(h["a"].apiFor("posts"),"GET",r).then((function(a){a.valid||!e.userData||n||h["a"].refreshToken().then((function(n){e.userData=n,e.getPosts(t,!0)})).catch((function(t){e.showToast(t,"warning"),e.userData=null,h["a"].removeLoginData()})),a.total||h["a"].fetchJSONWithSuccess(h["a"].apiFor("firstrun")).then((function(t){e.$router.push({name:"helloWorld"})})),e.posts=a.data.map((function(t){return t.deleted=!1,t})),e.pages=parseInt(a.pages),e.currentPage=parseInt(t),e.nextPage=e.getPageOffset(1),e.prevPage=e.getPageOffset(-1),e.$emit("roselia-load")})).catch((function(t){console.log(t)}))},getRoute:function(t){return t=Object(f["b"])(t),t.displayId?{name:"postWithEternalLink",params:{postLink:t.displayId.split("/")}}:{name:"post",query:{p:t.id}}}},mounted:function(){this.getPostsOnContext(),Object(m["d"])({"Utilities.ShowNext":function(){-1!==this.nextPage?this.showToast("Taking you to the next page..."):this.showToast("No more pages...","error"),this.shiftPage(1)},"Utilities.ShowPrevious":function(){-1!==this.prevPage?this.showToast("Taking you to the previous page..."):this.showToast("No more pages...","error"),this.shiftPage(-1)}},this)},computed:{},watch:{userData:function(){this.pages&&this.getPosts()},currentPage:function(t){this.$router.push(Object(d["a"])(Object(d["a"])({},this.$route),{},{query:Object(d["a"])(Object(d["a"])({},this.$route.query),{},{page:1===t?void 0:t})}))}},beforeRouteUpdate:function(t,e,n){this.$vuetify.goTo(0);var a=t.query;this.getPostsOnContext(a),n()},destroyed:function(){Object(m["c"])()}},p=v,g=(n("b7fa"),n("2877")),b=n("6544"),y=n.n(b),k=n("8212"),w=n("8336"),C=n("b0af"),D=n("99d9"),x=n("cc20"),j=n("62ad"),O=n("a523"),T=n("132d"),_=n("adda"),E=n("a722"),S=n("891e"),L=n("8b9c"),P=n("0fd9"),M=n("3129"),R=n("2fa4"),A=Object(g["a"])(p,u,l,!1,null,"a0e641f4",null),N=A.exports;y()(A,{VAvatar:k["a"],VBtn:w["a"],VCard:C["a"],VCardActions:D["a"],VCardTitle:D["d"],VChip:x["a"],VCol:j["a"],VContainer:O["a"],VIcon:T["a"],VImg:_["a"],VLayout:E["a"],VPagination:S["a"],VParallax:L["a"],VRow:P["a"],VSkeletonLoader:M["a"],VSpacer:R["a"]});var $=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"post"}},[n("nav-bar",{attrs:{userData:t.userData,route:t.$route.fullPath}}),t.postData.img?n("v-parallax",{class:{"blur-image":t.extraDisplaySettings.blurMainImage,"blur-image-transition":!0},attrs:{id:"main-pic",dark:"",src:t.postData.img||t.config.images.postBannerImage}},[t.extraDisplaySettings.metaBelowImage?t._e():n("v-row",{class:t.titleClass,attrs:{align:"center",column:"",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h1",{staticClass:"display-2 font-weight-thin mb-3",attrs:{id:"title"}},[t._v(t._s(t.postData.title))]),n("h4",{staticClass:"subtitle-1",attrs:{id:"subtitle"}},[t._v(t._s(t.postData.subtitle))]),n("h4",{staticClass:"subtitle-1",attrs:{id:"date"}},[t._v(t._s(t.formatDate(t.postData.created)||t.postData.date))]),n("h4",{staticClass:"subtitle-2",attrs:{id:"author"}},[t._v(t._s(t.postData.author.nickname))])])],1)],1):t._e(),!t.postData.img||t.extraDisplaySettings.metaBelowImage?n("v-container",[n("v-row",{attrs:{align:"center",column:"",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h1",{staticClass:"display-3 font-weight-thin mb-3",attrs:{id:"title"}},[t._v(t._s(t.postData.title))]),n("h2",{staticClass:"subtitle-1",attrs:{id:"subtitle"}},[t._v(t._s(t.postData.subtitle))]),n("h4",{staticClass:"subtitle-1",attrs:{id:"date"}},[t._v(t._s(t.formatDate(t.postData.created)||t.postData.date))]),n("h4",{staticClass:"subtitle-2",attrs:{id:"author"}},[t._v(t._s(t.postData.author.nickname))])])],1)],1):t._e(),n("v-container",{staticClass:"fill-height",attrs:{"grid-list-md":"",fluid:""}},[n("v-row",[n("v-col",{attrs:{wrap:"",cols:"12",sm:"10","offset-sm":"2"}},[n("v-row",[t._l(t.postData.tags,(function(e){return n("router-link",{key:e,attrs:{to:{name:"index",params:{tag:e},query:{tag:e}}}},[n("v-chip",{staticClass:"ma-1"},[t._v(t._s(e))])],1)})),t.postData.secret?n("v-chip",{staticClass:"ma-1",attrs:{color:"success","text-color":"white"}},[n("v-avatar",{staticClass:"success",attrs:{left:""}},[n("v-icon",[t._v("lock")])],1),t._v(" Secret "+t._s(t.postData.secret)+" ")],1):t._e(),-1===t.postData.id?n("v-chip",{staticClass:"ma-1",attrs:{color:"warning","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("error")])],1),t._v(" 404 ")],1):t._e(),t.postData.hidden?n("v-chip",{staticClass:"ma-1",attrs:{color:"grey","text-color":"white"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("visibility_off")])],1),t._v(" Hidden ")],1):t._e()],2),n("v-col",{attrs:{cols:"12",md:"10"}},[n("v-row",[t.cachedData?n("v-btn",{attrs:{color:"secondary",fab:"",small:""},on:{click:function(e){return t.$router.go(-1)}}},[n("v-icon",[t._v("arrow_back")])],1):t._e(),n("v-spacer"),"preview"!==t.postData.id&&-1!==t.postData.id&&t.isEditable?n("div",[n("v-btn",{staticClass:"ma-2",attrs:{color:"error",fab:"",small:"",to:{name:"edit",params:{deletePost:!0,title:t.postData.title},query:{post:t.postData.id}}}},[n("v-icon",[t._v("delete")])],1),n("v-btn",{staticClass:"ma-2",attrs:{color:"primary",fab:"",small:"",to:{name:"edit",query:{post:t.postData.id}}}},[n("v-icon",[t._v("mode_edit")])],1)],1):t._e(),t.isPostFound&&!t.isShared?n("v-btn",{staticClass:"ma-2",attrs:{fab:"",small:"",color:"secondary"},on:{click:t.sharePost}},[n("v-icon",[t._v("share")])],1):t._e()],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},["preview"===t.postData.id&&!t.postData.serverRendered&&t.postData.markdownContent?n("v-alert",{attrs:{border:"left",prominent:"","colored-border":"",type:"info",elevation:"2"}},[n("v-row",{attrs:{align:"center"}},[n("v-col",[t._v(" This page is rendered by your browser. "),n("v-btn",{attrs:{loading:t.loading},on:{click:t.renderPreviewByServer}},[t._v("Render it via server")])],1)],1)],1):t._e()],1)],1)],1),n("v-row",[n("v-col",{attrs:{sm:t.hasDigest?8:10}},[n("div",{ref:"content",staticClass:"flow-text responsive-img",attrs:{id:"content"}},[t.rsRendered?n("div",{ref:"rhodonite"}):n("div",{domProps:{innerHTML:t._s(t.postData.content)}})]),t.postData.id<0?n("div",{staticClass:"flow-text"},[n("p",[t._v("Oops, we can not show you the post.")]),n("p",[n("strong",[t._v("This may because:")])]),n("ol",[n("li",[t._v("Your post ID is invalid.")]),n("li",[t._v("This post is secret"),t.userData?n("strong",[t._v(" and even beyond your permission level")]):t._e(),t._v(".")]),t.userData&&t.isTokenExpired?n("li",{staticClass:"warning--text"},[n("v-icon",{attrs:{color:"warning"}},[t._v("warning")]),t._v("Your session is expired.")],1):t._e(),n("li",[t._v("Your network condition is poor.")])]),n("p",[n("strong",[t._v("All you need to do is check your input, refresh your token or try to login again.")])])]):t._e()]),t.hasDigest?n("v-col",{attrs:{sm:"2"}},[n("blog-digest-nav",{attrs:{items:t.postDigest,offset:"500",threshold:"500"}})],1):t._e()],1),n("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.postData.title,expression:"postData.title"}]})],1)],1)],1),t.postData.author?n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{justify:"center"}},[t.postData.author.avatar?n("div",[n("v-avatar",{staticClass:"elevation-7"},[n("v-img",{attrs:{src:t.postData.author.avatar,alt:t.postData.author.username}})],1)],1):t._e(),t.postData.author&&t.postData.author.username?n("div",[n("router-link",{attrs:{to:{name:"userTimeline",params:{username:t.postData.author.username}}}},[n("v-chip",[t._v(" @"+t._s(t.postData.author.username)+" ("+t._s(t.postData.author.nickname)+") ")])],1)],1):t._e()])],1):t._e(),n("v-container",[n("div",{staticClass:"text-center"},[n("h4",{staticClass:"subtitle-1 grey--text"},[t._v("Last edit at: "),n("relative-date-time",{attrs:{date:t.postData.lastEdit,brief:!1}})],1)])]),n("v-container",[n("v-col",{attrs:{cols:"12",sm:"10","offset-sm":"1"}},[n("v-row",[-1!==t.postData.next?n("v-btn",{attrs:{color:"primary",fab:!t.nextMeta||!t.shouldDisplayAdjacentMeta,rounded:!!t.nextMeta,small:!t.nextMeta||!t.shouldDisplayAdjacentMeta,to:{name:"post",query:{p:t.postData.next}}}},[n("v-icon",[t._v("chevron_left")]),t._v(t._s(t.shouldDisplayAdjacentMeta&&t.nextMeta?t.nextMeta.title:"")+" ")],1):t._e(),n("v-spacer"),-1!==t.postData.prev?n("v-btn",{attrs:{color:"primary",fab:!t.prevMeta||!t.shouldDisplayAdjacentMeta,rounded:!!t.prevMeta,small:!t.prevMeta||!t.shouldDisplayAdjacentMeta,to:{name:"post",query:{p:t.postData.prev}}}},[t._v(" "+t._s(t.shouldDisplayAdjacentMeta&&t.prevMeta?t.prevMeta.title:"")),n("v-icon",[t._v("chevron_right")])],1):t._e()],1)],1),t.isPostFound?n("blog-comments",{attrs:{userData:t.userData,postData:t.postData,toast:t.showToast,renderer:t.renderer}}):t._e()],1),n("v-slide-x-transition",[n("v-menu",{attrs:{"offset-y":"","position-x":t.preview.x,"position-y":t.preview.y},model:{value:t.preview.show,callback:function(e){t.$set(t.preview,"show",e)},expression:"preview.show"}},[n("v-card",{attrs:{color:t.preview.color,dark:"",width:"300"}},[t.preview.img?n("v-img",{attrs:{src:t.preview.img}}):t._e(),n("v-card-text",[t.preview.loading?t._e():n("div",[n("h1",{staticClass:"title"},[n("strong",[t._v(t._s(t.preview.title))])]),n("v-spacer"),n("h6",{staticClass:"subtitle-1 text-truncate"},[t._v(t._s(t.preview.subtitle))])],1),t.preview.loading?n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}):t._e()],1)],1)],1)],1),n("toast",{attrs:{color:t.toast.color,text:t.toast.text},on:{showChange:t.changeToast},model:{value:t.toast.show,callback:function(e){t.$set(t.toast,"show",e)},expression:"toast.show"}}),n("blog-footer"),n("GlobalEvents",{on:{mousemove:t.mouseMoveHandler}}),n("v-dialog",{attrs:{width:"500"},model:{value:t.share.open,callback:function(e){t.$set(t.share,"open",e)},expression:"share.open"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary",attrs:{"primary-title":""}},[t._v(" Share "+t._s(t.postData.title)+" ")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Address",outlined:"",value:t.sharePath,readonly:""}}),n("a",{attrs:{href:t.sharePath}},[t._v("Shared_"+t._s(t.postData.title))]),t._v(" <- Right click and copy link. "),n("p",[t._v("This post will be visible regardless of the user privileges.")])],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"accent",text:""},on:{click:function(e){t.share.open=!1}}},[t._v(" Done ")])],1)],1)],1)],1)},U=[],V=(n("4de4"),n("4160"),n("a630"),n("caad"),n("c975"),n("a15b"),n("fb6a"),n("b0c0"),n("a9e3"),n("4d63"),n("25f0"),n("2532"),n("3ca3"),n("5319"),n("159b"),n("96cf"),n("1da1")),I=n("4f96"),F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"digestNav",staticClass:"hide-on-small-only pushpin",attrs:{id:"digest-nav"}},[n("ul",{staticClass:"section table-of-contents"},t._l(t.items,(function(e){var a=e.hash,r=e.title;return n("li",{key:a},[n("a",{attrs:{href:"#"+a,to:{hash:a,query:t.$route.query}}},[t._v(t._s(r))])])})),0)])},B=[],H=n("4d5c"),W=n.n(H),q={name:"blog-digest-nav",data:function(){return{}},props:{items:Array},methods:{onCreate:function(){var t=this;this.$nextTick((function(e){return t.processDigest()}))},processDigest:function(){var t=document.querySelectorAll(".scrollspy"),e=document.getElementById("content");this.instance=W.a.ScrollSpy.init(t),W.a.Pushpin.init(document.querySelectorAll(".pushpin"),{top:e.offsetTop,offset:150,bottom:e.offsetHeight+e.offsetTop-this.$refs.digestNav.offsetHeight})},getInstance:function(){return W.a.ScrollSpy.getInstance(this.targetElements)}},computed:{targetElements:function(){return this.items.map((function(t){return t.element}))}},mounted:function(){this.onCreate()},destroyed:function(){var t=this.getInstance();t&&t.destroy()},watch:{items:function(){this.onCreate()}}},J=q,Y=(n("7348"),n("04bb"),Object(g["a"])(J,F,B,!1,null,"42c50754",null)),z=Y.exports,G=n("9cf0"),K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("lazy-component",{attrs:{text:"Load comment"}},[n("v-container",[n("v-col",{attrs:{cols:"12",sm:"8","offset-sm":"2"}},[n("v-badge",{attrs:{value:t.commentCount}},[n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.commentCount))]),n("v-icon",[t._v(" mode_comment ")])],1),n("v-divider",{staticClass:"my-3"})],1),t.canAddComment?n("v-col",{attrs:{cols:"12",sm:"8","offset-sm":"2"}},[n("v-row",{attrs:{row:"",wrap:""}},[t.replyToComment?n("v-chip",{attrs:{close:"",color:"secondary",dark:""},on:{"click:close":function(e){t.chip=!1}},model:{value:t.chip,callback:function(e){t.chip=e},expression:"chip"}},[t._v(" @"+t._s(t.atToNickname)+" ")]):t._e(),n("v-spacer"),n("v-btn",{attrs:{color:"accent",icon:""},on:{click:t.switchPreviewMode}},[t.showPreview?n("v-icon",[t._v("mode_edit")]):n("v-icon",[t._v("visibility")])],1)],1),t.showPreview?n("div",[n("recursive-comment",{ref:"previewComment",attrs:{comments:[t.currentCommentObject],canAddComment:!1,canDeleteComment:function(){return!1},myUsername:t.userData&&t.userData.username}})],1):n("v-textarea",{ref:"commentText",attrs:{"auto-grow":"",outlined:"",placeholder:t.commentPlaceholer,color:"primary",label:"Leave a comment"},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.metaKey?t.addComment(e):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.addComment(e):null}]},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),n("v-row",{attrs:{row:"",wrap:""}},[n("v-col",{attrs:{cols:"4"}},[t.userData&&t.userData.nickname?n("span",[t._v(t._s(t.userData.nickname))]):n("v-text-field",{attrs:{small:"",label:"Nickname"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),n("v-spacer"),n("v-col",{attrs:{cols:"3",md:"2",lg:"1"}},[n("v-btn",{attrs:{color:"primary",disabled:!this.isValid,loading:t.loading,rounded:""},on:{click:t.addComment}},[n("v-icon",[t._v("send")])],1)],1)],1)],1):t._e(),n("recursive-comment",{ref:"comments",attrs:{comments:t.recursiveCommentList,canAddComment:t.canAddComment,canDeleteComment:t.canDeleteComment,postAuthorUsername:t.postData.author&&t.postData.author.username,myUsername:t.userData&&t.userData.username},on:{"delete-comment":function(e){t.commentToDelete.id=e,t.commentToDelete.show=!0},"reply-comment":t.onReplyComment}}),n("v-row",{attrs:{align:"center",column:"",justify:"center",dense:""}},[n("v-col",{staticClass:"text-center",attrs:{cols:"2"}},[n("v-chip",{staticClass:"white--text ml-0 center-align",attrs:{color:"secondary",small:""},on:{click:function(e){return t.$vuetify.goTo(t.$refs.commentText)}}},[n("v-icon",[t._v("add_comment")])],1),t.currentPage<t.totalPages?n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.loadNextPage,expression:"loadNextPage"}]},[n("v-btn",{attrs:{loading:t.loading,small:"",block:"",color:"secondary",dark:""},on:{click:t.loadNextPage}},[n("v-icon",[t._v("keyboard_arrow_down")])],1)],1):t.loading?n("div",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):n("div",[n("v-divider"),t._v(" Tiro Finale ")],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500",scrollable:""},model:{value:t.commentToDelete.show,callback:function(e){t.$set(t.commentToDelete,"show",e)},expression:"commentToDelete.show"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v("Are you sure?")]),n("v-divider"),n("v-card-text",[t._v(" You are deleting this comment: "),n("br"),n("recursive-comment",{attrs:{comments:t.commentToDeleteList,canAddComment:!1,canDeleteComment:function(){return!1}}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info",text:""},on:{click:function(e){t.commentToDelete.show=!1}}},[t._v(" No ")]),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(){t.deleteComment(t.commentToDelete.id),t.commentToDelete.show=!1,t.commentToDelete.id=0}}},[t._v(" Yes, delete"),n("v-icon",[t._v("delete")])],1)],1)],1)],1)],1)},Z=[],X=(n("13d5"),n("45fc"),n("4fad"),n("7ed3"),n("3835")),Q=n("ade3"),tt=n("2f62"),et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.visible?n("div",[t._t("default")],2):n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.setVisible,expression:"setVisible"}]},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-btn",{on:{click:t.setVisible}},[t._v(t._s(this.text))])],1)],1)])},nt=[],at={props:["text"],name:"lazy-component",data:function(){return{visible:!1}},methods:{setVisible:function(){this.visible=!0}}},rt=at,ot=Object(g["a"])(rt,et,nt,!1,null,null,null),it=ot.exports;y()(ot,{VBtn:w["a"],VRow:P["a"]});var st=n("45ea"),ct=n("e376"),ut=n("c626"),lt={components:{lazyComponent:it,recursiveComment:st["a"]},props:["userData","postData","toast","renderer"],name:"blog-comment",data:function(){return{visible:!1,chip:!1,comment:"",nickname:"",commentLeft:!1,loading:!1,currentPage:0,totalPages:1,commentCount:0,commentList:[],replyToComment:void 0,hasUnsavedDraft:!1,commentToDelete:{id:0,show:!1},removeTokens:{},cachedDraft:{},userMeta:{},userMetaLoaded:!1,showPreview:!1,globalAddLock:{}}},methods:Object(d["a"])(Object(d["a"])({},Object(tt["d"])(["setCommentDraft","removeCommentDraft"])),{},{getCommentDraft:function(t){return this.$store.state.commentDraft[t]},setVisible:function(){this.visible=!0},formatDate:function(t){return h["a"].formatDate(t)},hightlightLanguage:function(){window.hljs&&(window.hljs.initHighlighting.called=!1,window.hljs.initHighlighting())},addComment:function(){var t=this;this.isValid&&!this.loading&&(this.loading=!0,h["a"].fetchJSONWithSuccess(h["a"].apiFor("comment","add"),"POST",this.addPostForm).then(f["b"]).then((function(e){t.toast("Well, you placed a comment!","success"),t.loading=!1,t.removeTokens[e.commentId]=e.removeToken,t.cachedDraft[e.commentId]={nickname:t.nickname,comment:t.comment,replyTo:t.replyToComment},t.removeCommentDraft(t.postData.id),t.resetState(),t.addCommentById(e.commentId)})).catch((function(e){t.toast(e,"error"),t.loading=!1})))},resetState:function(){this.comment="",this.replyToComment=void 0,this.commentLeft=!1,this.showPreview=!1},cleanComments:function(){this.currentPage=0,this.totalPages=1,this.commentCount=0,this.commentList=[]},cleanUp:function(){this.cleanComments(),this.resetState()},deleteComment:function(t){var e=this;h["a"].fetchJSONWithSuccess(h["a"].apiFor("comment","delete"),"POST",Object(f["c"])({comment:t,removeToken:this.removeTokens[t]})).then((function(n){var a=e.commentList.length;if(e.commentList=e.commentList.filter((function(e){return e.id!==t})),a!==e.commentList.length&&--e.commentCount,e.commentCount<0&&(e.commentCount=e.commentList.length),e.removeTokens[t]=void 0,e.cachedDraft[t]){var r=e.cachedDraft[t],o=r.nickname,i=r.comment,s=r.replyTo;e.comment||(e.nickname=o,e.comment=i,e.replyToComment=s),e.cachedDraft[t]=void 0}})).catch((function(t){e.toast("Oops! Failed.","error")}))},onReplyComment:function(t){this.replyToComment=t},canDeleteComment:function(t){return!!this.removeTokens[t.id]||!!this.isLoggedIn&&(!t.author||(t.author.username==this.userData.username||(t.author.role?t.author.role<=this.userData.role:!!this.userData)))},loadNextPage:function(){var t=this;this.loading||this.currentPage>=this.totalPages||(this.loading=!0,h["a"].fetchJSON(h["a"].apiFor("comment","comments"),"GET",{p:this.postData.id,page:this.currentPage+1,limit:10}).then((function(t){return t.success?t:Promise.reject("Invalid postid")})).then((function(e){t.commentList=t.commentList.concat(e.result.map(f["b"]).map((function(t){return Object(d["a"])(Object(d["a"])({},t),{},{showReply:!1})}))),t.totalPages=e.pages,t.commentCount=e.total,++t.currentPage,t.loading=!1,t.renderScript(),t.$nextTick((function(){t.processComments(),t.hasUnsavedDraft=!1}))})).catch((function(e){t.toast(e,"error"),t.loading=!1})))},getComment:function(t){return this.commentDict[t]},getCommentOrNotFound:function(t){var e=this.getComment(t);return e||(this.loadNextPage(),{id:0,nickname:"Anoymous",content:"This comment is gone.",createdAt:new Date})},getCommentNickname:function(t){return t.nickname||Object(f["e"])("author","nickname")(t)},processComments:function(t){var e=this,n=t||this.$refs.comments.$el||this.$refs.comments,a=Array.from(n.querySelectorAll("a")).filter((function(t){return!!t.href})),r=["mohuety.com","roselia.moe","roselia.xyz","lisa.moe","d4dj.moe"].map((function(t){return new RegExp(t)}));a.filter((function(t){return!t.getAttribute("roselia-prevented")})).filter((function(t){return t.host!==location.host&&!r.some((function(e){return e.exec(t.host)}))})).forEach(function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.setAttribute("roselia-prevented",!0),n.addEventListener("click",(function(t){t.preventDefault(),e.renderer.context.askForAccess(n.host,"This link wish to visit an unknown host ".concat(n.host),"The link is ".concat(n.href," please make sure it is safe.")).then((function(){window.open(n.href)}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var o=n.querySelectorAll("img"),i=Array.from(o);i.forEach((function(t){t.classList.add("responsive-img")})),W.a.Materialbox.init(o),this.hightlightLanguage()},renderScript:function(){var t=this,e=this.renderer.enterCommentMode();this.commentList.filter((function(t){return t.author})).filter((function(t){return!t.rendered})).forEach((function(e){t.forceRenderScript(e)})),e()},forceRenderScript:function(t){Object.defineProperty(t,"id",{value:t.id,writable:!1}),t.author=new Proxy(t.author,{set:function(t,e,n){if("role"!==e)return Reflect.set(t,e,n)}});var e=this.renderer.pushContext(t,"comment");t.cleanedContent=this.renderer.cleanScript(t.content);var n=this.renderer.render(t.content);t.content=n,t.rendered=!0,this.renderer.injectEvents(),e()},onExit:function(t){this.hasUnsavedDraft&&this.setCommentDraft({commentId:t||this.postData.id,comment:{comment:this.comment,nickname:this.nickname}})},loadDraft:function(t){var e=this.getCommentDraft(t||this.postData.id);e&&(this.comment=e.comment||this.comment,this.nickname=e.nickname||this.nickname)},ensureUserMeta:function(){var t=this;this.userData||(this.userMetaLoaded=!1,this.userMeta={}),this.userMetaLoaded&&this.userMeta.username===this.userData.username||(this.userMetaLoaded=!1,h["a"].fetchJSONWithSuccess(h["a"].apiFor("user","user-meta"),"GET",{username:this.userData.username}).then((function(e){t.userMeta=Object(f["b"])(e),t.userMetaLoaded=!0,t.showPreview&&(t.showPreview=!1,t.$nextTick((function(){t.showPreview=!0})))})).catch((function(t){})))},switchPreviewMode:function(){var t=this;this.showPreview=!this.showPreview,this.showPreview&&(this.ensureUserMeta(),this.$nextTick((function(){t.processComments(t.$refs.previewComment.$el||t.$refs.previewComment)})))},highlightLanguage:function(){window.hljs&&(window.hljs.initHighlighting.called=!1,window.hljs.initHighlighting())},addCommentById:function(t){var e=this;this.globalAddLock[t]||(this.globalAddLock[t]=!0,h["a"].fetchJSONWithSuccess(h["a"].apiFor("comment","comment",t)).then((function(n){var a=Object(f["b"])(n);e.commentList=[a].concat(e.commentList),++e.commentCount,e.renderScript(),e.$nextTick((function(){e.processComments()})),e.globalAddLock[t]=!1})).catch((function(n){e.globalAddLock[t]=!1})))}}),computed:{commentPlaceholer:function(){return this.commentLeft?"It is fine to keep silent, dear ".concat(this.currentNickname,"."):"Say something."},currentNickname:function(){return this.userData&&this.userData.nickname||this.nickname},isValid:function(){return this.comment&&this.currentNickname},isLoggedIn:function(){return!!this.userData},addPostForm:function(){return Object(f["c"])({toPost:this.postData.id,content:this.comment,nickname:this.isLoggedIn?void 0:this.currentNickname,toComment:this.replyToComment||void 0})},canAddComment:function(){return!(!this.userData&&!this.postData.enableComment)},commentDict:function(){return this.commentList.reduce((function(t,e){return Object(d["a"])(Object(d["a"])({},t),{},Object(Q["a"])({},e.id,e))}),{})},atToNickname:function(){var t=this.getComment(this.replyToComment);return t&&this.getCommentNickname(t)},recursiveCommentList:function(){var t=this,e=this.commentDict,n=this.commentList.filter((function(t){return!t.replyTo})).concat(this.commentList.filter((function(t){return t.replyTo})).filter((function(t){return!e[t.replyTo]})).map((function(n){var a=Object(d["a"])(Object(d["a"])({},t.getCommentOrNotFound(n.replyTo)),{},{id:n.replyTo});return e[n.replyTo]=a})));return Object.entries(e).forEach((function(t){var n=Object(X["a"])(t,2),a=n[0],r=n[1];e[a]=Object(d["a"])(Object(d["a"])({},r),{},{replies:[]})})),this.commentList.forEach((function(t){t.replyTo&&e[t.replyTo].replies.push(e[t.id])})),n.sort((function(t,e){return e.id-t.id})),n.map((function(t){return e[t.id]}))},commentToDeleteList:function(){return[Object(d["a"])(Object(d["a"])({},this.commentDict[this.commentToDelete.id]),{},{replies:[]})]},currentCommentObject:function(){var t={content:Object(ct["markdown"])(this.comment),color:"",createdAt:new Date,replies:[],author:this.userData?Object(d["a"])({},this.userMetaLoaded?this.userMeta:this.userData):void 0,nickname:this.userData?void 0:this.nickname,id:0};return this.showPreview&&this.userData&&this.forceRenderScript(t),t}},watch:{comment:function(){this.commentLeft=!0,this.hasUnsavedDraft=!0},replyToComment:function(t){t&&(this.chip=!0,this.$vuetify.goTo(this.$refs.commentText))},chip:function(t){t||(this.replyToComment=void 0,this.$vuetify.goTo("#comment-"+this.replyToComment))},postData:function(t,e){this.onExit(e.id),this.cleanUp(),this.loadDraft(t.id)},userData:function(){this.ensureUserMeta()}},mounted:function(){var t=this;this.loadDraft(),ut["a"].globalBus&&(this.$once("destroyed",ut["a"].globalBus.addEventListener("comment_added",(function(e){var n=e["post_id"],a=e["comment_id"];n==t.postData.id&&t.addCommentById(a)}))),this.$once("destroyed",ut["a"].globalBus.addEventListener("comment_removed",(function(e){var n=e.id,a=t.commentList.length;n===t.replyToComment&&(t.replyToComment=void 0),t.commentList=t.commentList.filter((function(t){return t.id!==n})),a!==t.commentList.length&&--t.commentCount}))))},beforeDestroy:function(){this.onExit()}},dt=lt,ht=n("4ca6"),ft=n("169a"),mt=n("ce7e"),vt=n("490a"),pt=n("8654"),gt=n("a844"),bt=Object(g["a"])(dt,K,Z,!1,null,null,null),yt=bt.exports;y()(bt,{VBadge:ht["a"],VBtn:w["a"],VCard:C["a"],VCardActions:D["a"],VCardText:D["c"],VCardTitle:D["d"],VChip:x["a"],VCol:j["a"],VContainer:O["a"],VDialog:ft["a"],VDivider:mt["a"],VIcon:T["a"],VProgressCircular:vt["a"],VRow:P["a"],VSpacer:R["a"],VTextField:pt["a"],VTextarea:gt["a"]});var kt=n("2ef0"),wt=n("17d3"),Ct=n("13a9"),Dt=n("e2608"),xt=function(t){return"postDraft#".concat(t)},jt=function(t){return new Dt["a"](xt(t))},Ot=function(){var t;return function(e){return t=t||n.e("fire-bird").then(n.bind(null,"e376")).then((function(t){var e=t.markdown;return e})),t.then((function(t){return t(e)}))}}(),Tt={metaBelowImage:!1,blurMainImage:!1,disableSideNavigation:!1},_t={components:{BlogDigestNav:z,BlogComments:yt,GlobalEvents:wt["a"],RelativeDateTime:Ct["a"]},name:"blog-post",props:{p:Number,currentColorScheme:Boolean,userData:Object},data:function(){return{postData:{img:"",id:0,displayId:"",content:"<p>Loading, please wait...</p>",author:{nickname:""},darkTitle:!1,next:-1,prev:-1,secret:0,title:"Loading...",subtitle:"",tags:[""],date:(new Date).toDateString(),lastEdit:new Date},postDigest:[],preview:{show:!1,loading:!1,current:0,title:"",subtitle:"",attach:"",origin:"center center",img:"",cacheData:null,color:"secondary",x:0,y:0},cachedData:!1,toast:h["a"].getToastOption(),rsRendered:!1,share:{open:!1,shareId:""},extraDisplaySettings:Object(d["a"])({},Tt),loading:!1,nextMeta:null,prevMeta:null}},methods:{showToast:function(t,e){return h["a"].showToast.call(this,t,e)},changeToast:function(t){this.toast.show=t},getArguments:function(){return this.$route.query},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return h["a"].formatDate(t,e)},loadContent:function(t,e){var n=this;if(this.$emit("postUnload"),this.$emit("postDestroyed"),t=t||this.getPostNum(),e=e||this.$route,e&&e.params.data){var a=e.params.data;if("preview"===a.id||a.id==t)return this.postData=Object(d["a"])(Object(d["a"])({},this.notFoundData()),a),this.cachedData=!0,void this.processContent()}var r="post"!==e.name;r&&(t=this.resolvePostLink(e.params.postLink)),this.cachedData=!1,-1!==t?(this.loading=!0,h["a"].fetchJSON(h["a"].apiFor(r?"post-link":"post",t)).then((function(t){return n.loading=!1,t?(n.postData=Object(f["b"])(t),n.processContent()):Promise.reject(ReferenceError("NPE"))})).catch((function(t){n.loading=!1,n.postData=n.notFoundData()}))):this.postData=this.notFoundData()},processContent:function(){var t=this;if(this.resetExtraDisplaySettings(),this.postData.displayId&&(this.$route.params.changeRoute||this.$route.query.p&&!this.isShared)&&this.$router.replace({name:"postWithEternalLink",params:{postLink:this.postData.displayId.split("/"),doNotLoad:!0}}),Object.defineProperty(this.postData,"id",{value:this.postData.id,writable:!1}),!this.postData.rawContent){var e=this.postData.content.split("\n"),n=Object(I["a"])(e),a=n[0],r=n.slice(1),o=a.includes("---feature:roselia-dom");this.postData.inDomMode=o,this.postData.rawContent=o?r.join("\n"):this.postData.content,o?this.renderer.setDomUpdateCallback(this.afterContentMounted):this.renderer.setRenderUpdateCallback(this.processContent)}this.renderer.resetMounted();var i=this.renderer.pushContext(this.postData,"post");this.postData.inDomMode?(this.rsRendered=!0,this.postData.content="",this.$nextTick((function(){t.renderer.mount(t.postData.rawContent,t.$refs.rhodonite)}))):(this.rsRendered=!1,this.renderer.renderAsync(this.postData.rawContent||this.postData.content).then((function(e){t.postData.content=e,t.$nextTick((function(){t.renderer.injectEvents(),i()}))})).then((function(){return t.$nextTick(Object(V["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.afterContentMounted());case 1:case"end":return e.stop()}}),e)}))))}))),this.getAdjacentPostMeta()},afterContentMounted:function(){var t=this,e=this.$refs.content.querySelectorAll("img");Array.from(e).forEach((function(t){t.classList.add("responsive-img")})),W.a.Materialbox.init(e),this.setDigest();var n=Object(kt["escapeRegExp"])(location.host),a=["".concat(n,"/.*\\?p=(\\d+)"),"".concat(n,"(?:/.*)?/post/([\\s\\S]*)")].map((function(t){return new RegExp(t)})),r=Array.from(this.$refs.content.querySelectorAll("a")).filter((function(t){return!!t.href}));if(r.filter((function(t){return t.host===location.host})).forEach(function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(n){var r,o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.href,o=a[0].exec(r),i=a[1].exec(r),(o||i||n.pathname===location.pathname)&&(s=(o||i||["","preview"])[1],c=n.hash,n.addEventListener("click",(function(e){e.preventDefault(),c?t.$vuetify.goTo(document.getElementById(n.hash.substring(1)),{offset:200}):t.$router.push({name:o?"post":"postWithEternalLink",query:{p:o?s:void 0},params:{data:t.preview.current!=s||t.preview.loading?void 0:t.preview.cacheData,postLink:i?s:void 0}})}),!0),n.addEventListener("mouseover",function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preview.show=!0,t.preview.attach=n,!c){e.next=10;break}return t.preview.cacheData=null,t.preview.current=s,r=document.getElementById(n.hash.substring(1)),t.preview.title=r.innerText,t.preview.img="",-1!==n.hash.indexOf("ref")?t.preview.subtitle=r.parentElement.innerText:t.preview.subtitle="",e.abrupt("return");case 10:if(t.preview.current!==s||t.preview.loading||!t.preview.cacheData){e.next=13;break}return t.preview.current=s,e.abrupt("return");case 13:t.preview.current=s,t.preview.loading=!0,t.preview.img="",h["a"].fetchJSON(h["a"].apiFor(o?"post":"post-link",s)).then((function(e){if(!e)return t.preview.loading=!1,t.preview.title="Oops! :(",t.preview.subtitle="This is a secret",void(t.preview.img="");t.preview.cacheData=Object(f["b"])(e),t.preview.loading=!1,t.preview.title=e.title,t.preview.subtitle=e.subtitle,t.preview.img=e.img})).catch((function(e){t.preview.loading=!1,t.preview.cacheData=null,t.preview.title=":(",t.preview.subtitle=e.message,t.preview.img=""}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.addEventListener("mouseout",(function(e){t.preview.show=!1})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.highlightLanguage(),this.renderWithMathJax(),this.$emit("postLoaded"),this.postData.img){var o=this.postData.id,i=document.createElement("img");i.addEventListener("error",(function(e){o===t.postData.id&&(t.postData.img="")})),i.src=this.postData.img}},highlightLanguage:function(){window.hljs&&(window.hljs.initHighlighting.called=!1,window.hljs.initHighlighting())},renderWithMathJax:function(){window.MathJax&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,"output"])},getPostNum:function(){return this.getArguments().p||-1},notFoundData:function(){return{img:"",id:-1,content:"",next:-1,prev:-1,secret:0,title:"Page Not Found",subtitle:"Please check your post-id. Or try to login.",author:{nickname:""},darkTitle:!1,tags:[],created:new Date,lastEdit:new Date}},setDigest:function(){this.postDigest=Array.from(this.$refs.content.querySelectorAll("h1,h2,h3")).map((function(t,e){return t.classList.add("scrollspy"),t.classList.add("section"),t.id=t.id||"section-".concat(e),{hash:t.id,title:t.innerText,element:t}}))},getPostByShared:function(t){var e=this;h["a"].fetchJSON(h["a"].apiFor("post","get-shared",t)).then((function(t){if(!t)return Promise.reject("");e.postData=Object(d["a"])(Object(d["a"])({},e.notFoundData()),Object(f["b"])(t)),e.processContent()})).catch((function(t){e.postData=e.notFoundData()}))},sharePost:function(){var t=this;this.share.shareId="",this.postData.secret&&h["a"].fetchJSONWithSuccess(h["a"].apiFor("post","share"),"post",{pid:this.postData.id}).then((function(e){t.share.shareId=e})),this.share.open=!0},mouseMoveHandler:function(t){this.preview.show&&(this.preview.x=t.clientX+10,this.preview.y=t.clientY+10)},renderPreviewByServer:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("preview"===t.postData.id&&t.postData.markdownContent){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.prev=3,e.next=6,h["a"].fetchJSONWithSuccess(h["a"].apiFor("post","render-markdown"),"POST",{markdown:t.postData.markdownContent});case 6:n=e.sent,t.$emit("postUnload"),t.$emit("postDestroyed"),t.postData.content=n,t.postData.serverRendered=!0,t.processContent();case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[3,,12,15]])})))()},getAdjacentPostMeta:function(){var t=this;this.prevMeta&&this.prevMeta.id===this.postData.prev||(this.prevMeta=null,this.postData.prev>0&&h["a"].fetchJSONWithSuccess(h["a"].apiFor("post","meta","id",this.postData.prev)).then((function(e){t.prevMeta=e}))),this.nextMeta&&this.nextMeta.id===this.postData.next||(this.nextMeta=null,this.postData.next>0&&h["a"].fetchJSONWithSuccess(h["a"].apiFor("post","meta","id",this.postData.next)).then((function(e){t.nextMeta=e})))},resetExtraDisplaySettings:function(){this.extraDisplaySettings=Object(d["a"])({},Tt)},resolvePostLink:function(t){return Array.isArray(t)?t.join("/"):t},setUpLivePreview:function(t){var e=this,n=jt(t);n.addChangeListener(function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return e.postData=Object(d["a"])(Object(d["a"])({},e.notFoundData()),{},{title:"This Post is Not Ready",content:"Please just write something and save draft.",subtitle:"Please make sure such draft exists."}),t.abrupt("return");case 3:if(!n.markdown){t.next=9;break}return t.next=6,Ot(n.data.content);case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=n.data.content;case 10:a=t.t0,e.$emit("postUnload"),e.postData=Object(d["a"])(Object(d["a"])(Object(d["a"])({},e.notFoundData()),n.data),{},{id:"preview",content:a,markdownContent:n.markdown?n.data.content:void 0,prev:-1,next:-1}),e.processContent();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!0)}},computed:{hasDigest:function(){return!this.extraDisplaySettings.disableSideNavigation&&this.$vuetify.breakpoint.smAndUp&&this.postDigest.length>0},isTokenExpired:function(){return h["a"].isTokenExpired(this.userData&&this.userData.token)},titleClass:function(){return"".concat(["white","black"][+this.postData.darkTitle],"--text")},isEditable:function(){return!(!this.postData.author||!this.userData)&&this.userData.role>=this.postData.author.role},isPostFound:function(){return this.postData.id>0},isShared:function(){return!!this.$route.params.shareId},sharePath:function(){if(!this.postData.secret||!this.share.shareId)return location.href;var t=this.$router.resolve({name:"sharedPost",params:{shareId:this.share.shareId}}).href,e=document.createElement("a");return e.href=t,e.href},shouldDisplayAdjacentMeta:function(){return this.$vuetify.breakpoint.mdAndUp}},mounted:function(){var t=this;if(this.renderer=G["b"].createRenderer(this),this.$route.params.shareId?this.getPostByShared(this.$route.params.shareId):this.$route.params.previewPostId?this.setUpLivePreview(this.$route.params.previewPostId):this.loadContent(),!window.MathJax){var e=document.createElement("script");e.async=!0,e.src="https://cdn.bootcss.com/mathjax/2.7.3/latest.js?config=TeX-MML-AM_CHTML";var n=document.createElement("script");n.type="text/x-mathjax-config",n.innerHTML="MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});",document.body.appendChild(n),document.body.appendChild(e)}var a=function(e){-1!==e&&t.$router.push({name:"post",query:{p:e}})};Object(m["d"])({"Utilities.ShowNext":function(){a(this.postData.prev)},"Utilities.ShowPrevious":function(){a(this.postData.next)},edit:function(){this.$router.push({name:"edit",query:{post:this.postData.id}})},delete:function(){this.$router.push({name:"edit",params:{deletePost:!0,title:this.postData.title},query:{post:this.postData.id}})}},this),ut["a"].globalBus&&this.$once("destroyed",ut["a"].globalBus.addEventListener("post_edited",(function(e){var n=e.id;n==t.postData.id&&t.loadContent()})))},beforeRouteUpdate:function(t,e,n){return t.params.doNotLoad||t.query.p===e.query.p&&this.resolvePostLink(t.params.postLink)==this.resolvePostLink(e.params.postLink)?n():(this.$vuetify.goTo(0),this.$emit("postUnload"),this.loadContent(t.query.p,t),void n())},destroyed:function(){this.$emit("postUnload"),this.$emit("postDestroyed"),Object(m["c"])(),this.renderer&&this.renderer.destroy()},watch:{userData:function(){!this.userData&&this.postData.secret&&(this.postData=this.notFoundData()),-1===this.postData.id&&this.loadContent()},"window.MathJax":function(){this.renderWithMathJax()}}},Et=_t,St=(n("6801"),n("0798")),Lt=n("e449"),Pt=n("8e36"),Mt=n("0789"),Rt=Object(g["a"])(Et,$,U,!1,null,"631cf8a4",null),At=Rt.exports;y()(Rt,{VAlert:St["a"],VAvatar:k["a"],VBtn:w["a"],VCard:C["a"],VCardActions:D["a"],VCardText:D["c"],VCardTitle:D["d"],VChip:x["a"],VCol:j["a"],VContainer:O["a"],VDialog:ft["a"],VDivider:mt["a"],VIcon:T["a"],VImg:_["a"],VMenu:Lt["a"],VParallax:L["a"],VProgressLinear:Pt["a"],VRow:P["a"],VSlideXTransition:Mt["f"],VSpacer:R["a"],VTextField:pt["a"]});var Nt=function(){return n.e("ringing-bloom").then(n.bind(null,"be31"))},$t=function(){return n.e("ringing-bloom").then(n.bind(null,"d891"))},Ut=function(){return n.e("ringing-bloom").then(n.bind(null,"6d1a"))},Vt=function(){return n.e("fire-bird").then(n.bind(null,"741b"))},It=function(){return n.e("fire-bird").then(n.bind(null,"fdab"))},Ft=function(){return n.e("fire-bird").then(n.bind(null,"8f70"))},Bt=function(){return n.e("fire-bird").then(n.bind(null,"e143"))},Ht=function(){return n.e("fire-bird").then(n.bind(null,"d396"))},Wt=function(){return n.e("fire-bird").then(n.bind(null,"b29f"))},qt=function(){return n.e("fire-bird").then(n.bind(null,"895d"))},Jt=function(){return n.e("fire-bird").then(n.bind(null,"3a39"))},Yt=function(){return n.e("fire-bird").then(n.bind(null,"03a5"))},zt=function(){return n.e("fire-bird").then(n.bind(null,"b998"))},Gt=function(){return n.e("fire-bird").then(n.bind(null,"ab33"))},Kt=function(){return n.e("fire-bird").then(n.bind(null,"4c9e"))},Zt=function(){return n.e("fire-bird").then(n.bind(null,"fad0"))},Xt=function(){return n.e("fire-bird").then(n.bind(null,"894a"))},Qt=function(){return n.e("fire-bird").then(n.bind(null,"4962"))};a["default"].use(r["a"]),a["default"].use(i.a);e["a"]=new r["a"]({mode:"history",base:c.a.urlPrefix,routes:[{path:"/hello",name:"helloWorld",component:It},{path:"/",name:"index",component:N,meta:{title:c.a.title}},{path:"/login",name:"login",component:Nt,meta:{title:"Login"}},{path:"/post",name:"post",component:At,children:[{path:"shared/:shareId",name:"sharedPost",component:At},{path:"live-preview/:previewPostId",name:"postLivePreview",component:At},{path:":postLink+",name:"postWithEternalLink",component:At}]},{path:"/edit",alias:"/add",name:"edit",component:Vt},{path:"/userspace",alias:"/me",component:Ft,meta:{title:"Console"},children:[{path:"change-password",name:"changePassword",component:Bt,meta:{title:"Change Password"}},{path:"remote-login",name:"remoteLogin",component:Ht,meta:{title:"Remote Login"}},{path:"user-management",name:"userManagement",component:Wt,meta:{title:"Manage Users"}},{path:"token-refresh",name:"tokenRefresh",component:Jt,meta:{title:"Refresh Tokens"}},{path:"account-settings",name:"setNickname",component:Yt,meta:{title:"Account Settings"}},{path:"oauth-accounts",name:"oauthAccounts",component:zt,meta:{title:"OAuth Accounts"}},{path:"2-step-auth",name:"twoStepAuth",component:Gt,meta:{title:"Two Factor Authentication"}},{path:"system-monitor",name:"systemMonitor",component:Kt,meta:{title:"System Monitor"}},{path:"manage-drafts",name:"manageDrafts",component:Zt,meta:{title:"Draft Management"}},{path:"manage-images",name:"manageImages",component:Xt,meta:{title:"Uploaded Image Management"}},{path:"about",name:"about",component:Qt},{path:"/",name:"userspace",component:qt,meta:{title:"Roselia-Blog Console"}}]},{path:"/timeline",name:"timeline",component:Ut,meta:{title:"Timeline"},children:[{name:"userTimeline",path:":username",component:Ut}]},{path:"*",name:"notFound",alias:"/404",component:$t,meta:{title:"404 Not Found"}}]})},a49b:function(t,e){var n="Somainer's Blog",a="Do what you want to do, be who you want to be.",r="https://roselia.moe/blog/api",o="/blog",i={primary:"#0288d1",secondary:"#6292E9",accent:"#E08696",error:"#FB5458",warning:"#FE9952",info:"#95CAEE",success:"#61BF99"};t.exports={title:n,motto:a,apiBase:r,theme:i,enableRoseliaScript:!0,enableAskYukina:!0,footerName:"Somainer",urlPrefix:o,images:{indexBannerImage:o+"/static/img/bg_n3.jpg",postBannerImage:o+"/static/img/nest.png",lazyloadImage:o+"/static/img/observe.jpg",timelineBannerImage:o+"/static/img/bg_n0.png"}}},a5e0:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n("e2608"),r=new a["a"]("loginData")},b7fa:function(t,e,n){"use strict";var a=n("43ba"),r=n.n(a);r.a},c626:function(t,e,n){"use strict";n("99af"),n("4de4"),n("4160"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d");var a=n("3835"),r=n("d4ec"),o=n("bee2"),i=n("8055"),s=n.n(i),c=n("90b9"),u=n("a5e0"),l=function(){function t(e){var n=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r["a"])(this,t);var i=c["a"].apiFor("socket"),u=new URL(i,location.href);u.pathname="/api/socket";var l=new URL(i,location.href);this.connection=s()(u.href,{path:l.pathname,host:l.host,reconnection:!0,reconnectionAttempts:5,transportOptions:{polling:{extraHeaders:{Authorization:"Bearer ".concat(e)}}}}),o?t.storedHandlers.forEach((function(t){var e=Object(a["a"])(t,2),r=e[0],o=e[1];return n.addListenerUnchecked(r,o)})):t.storedHandlers=[],this.connection.once("reject",(function(){n.dispose()}))}return Object(o["a"])(t,[{key:"addListenerUnchecked",value:function(t,e){this.connection.on(t,e)}},{key:"addEventListener",value:function(e,n){var a=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.addListenerUnchecked(e,n),r&&t.storedHandlers.push([e,n]),function(){a.removeEventListener(e,n)}}},{key:"addEventListenerOnce",value:function(t,e){this.connection.once(t,e)}},{key:"removeEventListener",value:function(e,n){this.connection.off(e,n),t.storedHandlers=t.storedHandlers.filter((function(t){var r=Object(a["a"])(t,2),o=r[0],i=r[1];return o!==e&&("undefined"===typeof n||i!==n)}))}},{key:"emitEvent",value:function(t){for(var e,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];(e=this.connection).emit.apply(e,[t].concat(a))}},{key:"dispose",value:function(){this.connection.close()}},{key:"isConnected",value:function(){return this.connection.connected}}]),t}();l.storedHandlers=[];var d=function(){function t(){Object(r["a"])(this,t),this.restorePrevious=!0,this.subscriber=[]}return Object(o["a"])(t,[{key:"subscribe",value:function(t){this.globalBus?t(this.globalBus):this.subscriber.push(t)}},{key:"dispose",value:function(){var t;null===(t=this.globalBus)||void 0===t||t.dispose(),this.globalBus=void 0}},{key:"handleInfoChange",value:function(t){var e=this;t?(this.globalBus=new l(t.token,this.restorePrevious),this.subscriber.forEach((function(t){return t(e.globalBus)})),this.subscriber=[]):this.dispose()}},{key:"tryConnect",value:function(){var t;(null===(t=this.globalBus)||void 0===t?void 0:t.isConnected)||this.handleInfoChange(u["a"].getPayload())}}]),t}(),h=new d;h.tryConnect(),u["a"].addChangeListener((function(t){return h.handleInfoChange(t)})),e["a"]=h},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a,r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"black-shout"}},[n("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]}),n("theme-listener",{model:{value:t.preferredLight,callback:function(e){t.preferredLight=e},expression:"preferredLight"}}),n("v-app",{attrs:{dark:t.isNight}},[n("v-content",[n("v-slide-x-transition",{attrs:{"hide-on-leave":""}},[n("router-view",{attrs:{currentColorScheme:!t.isNight,userData:t.userData},on:{forceSwitchToLight:t.switchToLight,forceSwitchToDark:t.switchToDark}})],1)],1),n("go-top-btn"),n("notification-hub")],1),n("vue-progress-bar")],1)},i=[],s=r["default"].extend({mounted:function(){this.checkScheme()},methods:{setState:function(t){this.$emit("change",t)},checkScheme:function(){var t=this,e=matchMedia("(prefers-color-scheme: dark)"),n=matchMedia("(prefers-color-scheme: light)");e.matches||n.matches?(this.setState(n.matches),e.addEventListener("change",(function(e){return t.setState(!e.matches)})),n.addEventListener("change",(function(e){return t.setState(e.matches)}))):this.setState(void 0)}},model:{prop:"scheme",event:"change"},props:{scheme:Boolean},render:function(t){return t()}}),c=n("f704"),u=n("a5e0"),l=n("c626"),d=(n("99af"),n("4ec9"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("5530")),h=(n("96cf"),n("1da1")),f=n("d4ec"),m=n("bee2"),v=n("262e"),p=n("2caf"),g=n("9ab4"),b=n("2fe1"),y=n("4bb5"),k=n("2db4"),w=n("8336"),C=n("0fd9"),D=n("62ad"),x=n("2fa4"),j=n("132d"),O=function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!("Notification"in window)){t.next=9;break}if("granted"===Notification.permission){t.next=4;break}return t.next=4,Notification.requestPermission();case 4:if("granted"!==Notification.permission){t.next=8;break}return t.abrupt("return",new Notification(e,n));case 8:return t.abrupt("return",Promise.reject(new Error("User rejected.")));case 9:return t.abrupt("return",Promise.reject(new Error("Notification is not supported.")));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),T=n("2f62"),_=n("f9da"),E=a=function(t){Object(v["a"])(n,t);var e=Object(p["a"])(n);function n(){return Object(f["a"])(this,n),e.apply(this,arguments)}return Object(m["a"])(n,[{key:"notify",value:function(t){this.addNotification(t)}},{key:"popFirst",value:function(){this.popFirstNotification()}},{key:"render",value:function(){var t=this,e=arguments[0],n=this.currentToast;if(!n)return e("div");var a=this.notifications;return e("div",[e("v-snackbar",{attrs:{right:!0,bottom:!0,vertical:!0,"multi-line":!0,color:n.color,value:n.show,timeout:0}},[n.message,e("v-row",[e("v-col",[e("v-btn",{attrs:{text:!0},on:{click:this.clearNotifications}},[e("v-icon",["delete_sweep"])])]),e("v-spacer"),e("v-col",[e("v-btn",{attrs:{text:!0},on:{click:function(){n.show=!1,t.popFirst()}}},[a.length>1?e("span",[e("v-icon",["navigate_next"]),"(",a.length-1,"+)"]):e("v-icon",["close"])])])])])])}},{key:"mounted",value:function(){var t=this,e=this.$createElement;r["default"].prototype.$notify=this.notify,l["a"].subscribe((function(n){n.addEventListener("disconnect",(function(){t.notify({color:"warning",message:e("div",["Your connection has been closed.",e("v-btn",{attrs:{color:"primary"},on:{click:function(){l["a"].tryConnect(),t.popFirst()}}},["Connect"])])})})),n.addEventListener("post_commented",(function(n){var a=Object(c["b"])(n),r=a.postId,o=a.title,i=a.byName,s={name:"post",query:{p:r}};t.notify({color:"info",message:e("div",[i," has commented on your post:",e("router-link",{attrs:{to:s}},[o])])}),O("New Comment",{image:_["a"].avatar,icon:_["a"].avatar,badge:"/favicon.png",body:"".concat(i," has commented on your post: ").concat(o,".")}).then((function(e){e.addEventListener("click",(function(){t.$router.push(s)}))}))}),!0),n.addEventListener("user_login",(function(e){var n=e.ip,a=e.browser,r=e.os;t.notify({color:"warning",message:"You have logged in a ".concat(r," ").concat(a," device on ip: ").concat(n,".")})}),!0),n.addEventListener("warn_message",(function(e){var n=e.message;t.notify({color:"warning",message:n})}),!0),n.addEventListener("inbox_message",(function(n){t.currentChatingWith!==n.from&&t.notify({color:"info",message:e("div",[e("v-btn",{attrs:{icon:!0},on:{click:function(){return t.setChatingWith(n.from)}}},[e("v-icon",["reply"])]),"@",n.from,": ",n.content])}),t.currentChatingWith===n.from&&document.hasFocus()||O("New Message from @".concat(n.from),{body:"".concat(n.content),badge:"/favicon.png",tag:"".concat(Math.random().toString(36))}).then((function(e){e.addEventListener("click",(function(){t.setChatingWith(n.from)})),a.GetUserMeta(n.from).then((function(a){O("New Message from ".concat(a.nickname),{renotify:!0,image:a.avatar,icon:a.avatar,badge:e.badge,body:e.body,tag:e.tag}).then((function(e){e.addEventListener("click",(function(){t.setChatingWith(n.from)}))}))}))})),t.addChatHistory({username:n.from,chat:n})}),!0)}))}},{key:"currentToast",get:function(){return this.firstNotification}}],[{key:"GetUserMeta",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.UserMetaCache.has(e)){t.next=2;break}return t.abrupt("return",this.UserMetaCache.get(e));case 2:return t.next=4,Object(_["b"])({username:e});case 4:return n=t.sent,this.UserMetaCache.set(e,n),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(r["default"]);E.UserMetaCache=new Map,Object(g["a"])([y["b"]],E.prototype,"addChatHistory",void 0),Object(g["a"])([y["b"]],E.prototype,"setChatingWith",void 0),Object(g["a"])([y["c"]],E.prototype,"currentChatingWith",void 0),E=a=Object(g["a"])([Object(b["b"])({components:{VSnackbar:k["a"],VBtn:w["a"],VRow:C["a"],VCol:D["a"],VSpacer:x["a"],VIcon:j["a"]},computed:Object(d["a"])(Object(d["a"])({},Object(T["c"])(["firstNotification"])),Object(T["e"])(["notifications"])),methods:Object(d["a"])({},Object(T["d"])(["clearNotifications","popFirstNotification","addNotification"]))})],E);var S=E,L=(n("5dac"),r["default"].extend({name:"App",components:{"theme-listener":s,NotificationHub:S},mounted:function(){this.$Progress.finish(),this.$watch("$vuetify.theme.currentTheme",(function(t){document.body.style.setProperty("--themed-text-color",Object(c["f"])(t.primary,"#000000","#ffffff","#ffffff"))}),{immediate:!0,deep:!0})},created:function(){var t=this;this.$Progress.start(),this.$router.beforeEach((function(e,n,a){if(void 0!==e.meta.progress){var r=e.meta.progress;t.$Progress.parseMeta(r)}t.$Progress.start(),a()})),this.$router.afterEach((function(e,n){t.$Progress.finish()})),u["a"].addChangeListener((function(e){t.userData=e,t.$store.commit("setUserData",e),e&&t.$store.dispatch("ensureUserMeta")}),!0)},methods:{switchToLight:function(t){this.forceLight=!!t},switchToDark:function(t){this.forceDark=!!t}},data:function(){return{forceLight:!1,forceDark:!1,forceTitle:"",preferredLight:void 0,userData:u["a"].getPayload()}},computed:{isNight:function(){if(this.forceDark||this.forceLight)return this.forceDark||!this.forceLight;if("undefined"!==typeof this.preferredLight)return!this.preferredLight;var t=(new Date).getHours(),e=t>6&&t<18;return e}},watch:{isNight:{handler:function(t){this.$vuetify.theme.dark=!!t},immediate:!0}}})),P=L,M=(n("034f"),n("2877")),R=n("6544"),A=n.n(R),N=n("7496"),$=n("a75b"),U=n("0789"),V=Object(M["a"])(P,o,i,!1,null,null,null),I=V.exports;A()(V,{VApp:N["a"],VContent:$["a"],VSlideXTransition:U["f"]});var F=n("a18c"),B=(n("5d41"),n("c760"),n("f309")),H=n("25a2"),W=n("a49b"),q=n.n(W);r["default"].use(B["a"]);var J=new B["a"]({theme:{themes:{light:q.a.theme,dark:q.a.theme},options:{customProperties:!0}},customProperties:!0,lang:{locales:{zhHans:H["a"]},current:"zh-Hans"},icons:{values:{brand:new Proxy({},{get:function(t,e){return Reflect.has(t,e)?Reflect.get(t,e):"string"===typeof e?"fab fa-".concat(e):void 0}})},iconfont:"md"}}),Y=(n("fb6a"),n("3835")),z=n("4f96"),G=n("2909"),K=n("ade3"),Z=n("0fc3");r["default"].use(T["a"]);var X=new T["a"].Store({state:{commentDraft:{},notifications:[],chatHistory:{},userData:void 0,currentUser:void 0,currentChatingWith:void 0},mutations:{setCommentDraft:function(t,e){t.commentDraft=Object(d["a"])(Object(d["a"])({},t.commentDraft),{},Object(K["a"])({},e.commentId,e.comment))},removeCommentDraft:function(t,e){t.commentDraft=Object(Z["l"])(t.commentDraft,[e])},addNotification:function(t,e){t.notifications=[Object(d["a"])(Object(d["a"])({},e),{},{show:!0})].concat(Object(G["a"])(t.notifications))},popFirstNotification:function(t){var e=Object(z["a"])(t.notifications),n=e.slice(1);t.notifications=n},clearNotifications:function(t){t.notifications=[]},addChatHistory:function(t,e){var n=e.username,a=e.chat;n=n.toLowerCase(),t.chatHistory=Object(d["a"])(Object(d["a"])({},t.chatHistory),{},Object(K["a"])({},n,(t.chatHistory[n]||[]).concat(a)))},setUserMeta:function(t,e){t.currentUser=e},setUserData:function(t,e){t.userData=e},setChatingWith:function(t,e){t.currentChatingWith=e}},actions:{ensureUserMeta:function(t){return Object(h["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.state.currentUser){e.next=2;break}return e.abrupt("return",t.state.currentUser);case 2:if(t.state.userData){e.next=4;break}return e.abrupt("return",void 0);case 4:return n=t.state.userData.username,e.next=7,Object(_["b"])({username:n});case 7:return a=e.sent,t.commit("setUserMeta",a),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))()}},getters:{firstNotification:function(t){var e=Object(Y["a"])(t.notifications,1),n=e[0];return n},chatHistoryOf:function(t){return function(e){return t.chatHistory[e.toLowerCase()]||[]}}}}),Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{color:t.color,top:"",right:"",timeout:6e3},model:{value:t.showSelf,callback:function(e){t.showSelf=e},expression:"showSelf"}},[t._v(" "+t._s(t.text)+" "),n("v-btn",{attrs:{text:""},on:{click:function(e){t.showSelf=!1}}},[t._v(" Close ")])],1)},tt=[],et={name:"toast",props:["show","text","color"],model:{prop:"show",event:"showChange"},computed:{showSelf:{get:function(){return this.show},set:function(t){this.$emit("showChange",t)}}}},nt=et,at=Object(M["a"])(nt,Q,tt,!1,null,"2c18f844",null),rt=at.exports;A()(at,{VBtn:w["a"],VSnackbar:k["a"]});var ot=n("4bdc"),it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{staticClass:"oneness",attrs:{height:"auto"}},[n("v-row",{attrs:{justify:"center",wrap:""}},[n("v-col",{staticClass:"themed-text text-center lighten-2 py-3",attrs:{cols:"12"}},[t._v(" "+t._s(t.year)+"  "),n("strong",[t._v(t._s(t.name))])])],1)],1)},st=[],ct={name:"blog-footer",data:function(){return{year:(new Date).getFullYear(),title:q.a.title,motto:q.a.motto,name:q.a.footerName}}},ut=ct,lt=(n("38c8"),n("553a")),dt=Object(M["a"])(ut,it,st,!1,null,"1787f854",null),ht=dt.exports;A()(dt,{VCol:D["a"],VFooter:lt["a"],VRow:C["a"]});var ft=n("26b9"),mt=n.n(ft),vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{directives:[{name:"scroll",rawName:"v-scroll",value:t.recordScroll,expression:"recordScroll"},{name:"resize",rawName:"v-resize",value:t.recordHeight,expression:"recordHeight"}]},[n("v-fab-transition",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],staticClass:"fixed-action-btn",style:{bottom:t.$vuetify.breakpoint.smOnly?"64px":""},attrs:{color:"secondary",fab:"",fixed:"",bottom:"",right:""},on:{click:t.goTop}},[n("v-icon",[t._v("keyboard_arrow_up")])],1)],1)],1)},pt=[],gt=n("9d93"),bt={name:"gotop-button",directives:gt["default"],data:function(){return{height:0,offsetTop:0}},methods:{recordHeight:function(){this.height=window.innerHeight},recordScroll:function(){this.offsetTop=window.pageYOffset||document.documentElement.scrollTop},goTop:function(){this.$vuetify.goTo(0)}},mounted:function(){this.recordHeight(),this.recordScroll()},computed:{showButton:function(){return this.offsetTop>=this.height}}},yt=bt,kt=n("a722"),wt=n("269a"),Ct=n.n(wt),Dt=n("dc22"),xt=n("f977"),jt=Object(M["a"])(yt,vt,pt,!1,null,"0451dc4d",null),Ot=jt.exports;A()(jt,{VBtn:w["a"],VFabTransition:U["c"],VIcon:j["a"],VLayout:kt["a"]}),Ct()(jt,{Resize:Dt["a"],Scroll:xt["b"]});n("15f5");var Tt=n("85fe"),_t=n("90b9"),Et=function(t){if(t&&t.token)if(_t["a"].isTokenExpired(t.token))_t["a"].refreshToken();else{var e=_t["a"].getTokenExpiryTime(t.token),n=e.getTime()-(new Date).getTime();setTimeout(_t["a"].refreshToken,n)}};u["a"].addChangeListener(Et),u["a"].isEmpty()||Et(u["a"].getPayload()),r["default"].prototype.config=q.a,r["default"].use(mt.a,{color:q.a.theme.secondary,failedColor:q.a.theme.error,thickness:"4px"}),r["default"].directive("observe-visibility",Tt["a"]),r["default"].component("toast",rt),r["default"].component("nav-bar",ot["a"]),r["default"].component("blog-footer",ht),r["default"].component("go-top-btn",Ot),r["default"].directive("focus",{update:function(t,e){var n=e.value;n&&t.focus()}}),r["default"].config.productionTip=!1;e["default"]=new r["default"]({router:F["a"],store:X,vuetify:J,render:function(t){return t(I)}}).$mount("#black-shout")},d0e9:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return f}));n("99af"),n("4de4"),n("5db7"),n("a15b"),n("d81d"),n("45fc"),n("73d9"),n("b0c0"),n("4fad"),n("c1f9"),n("07ac"),n("4d63"),n("ac1f"),n("25f0"),n("8a79"),n("1276"),n("2ca0"),n("498a");var a=n("2909"),r=n("3835"),o=n("53ca"),i=n("0fc3"),s=function(t){return t.nodeType===Node.TEXT_NODE},c=function(t){return t.nodeType===Node.ELEMENT_NODE},u=function(t){return"object"===Object(o["a"])(t)&&i["i"](t.value)&&i["i"](t.type)},l=function(t){return'"'.concat(i["b"](t),'"')},d=function(t){return"string"===t.type?l(t.value):t.value},h=function(t,e){e=e||["(?:r|R|roselia|Roselia){{","}}"];var n=t.split(new RegExp(e.join("\\s*?([\\s\\S]+?)\\s*?"),"gm")).map((function(t,e){if(1&e){var n=t.trim(),a=/^([a-zA-Z_$]+[a-zA-Z_0-9]*){([\s\S]+)}/.exec(n);if(a){var o=Object(r["a"])(a,3),i=(o[0],o[1]),s=o[2];n="".concat(i,"(").concat(l(s),")")}return n.startsWith("//")?n="":n.endsWith(";")&&(n="((".concat(n.substring(0,n.length-1),"), '')")),{type:"roselia",value:n}}return{type:"string",value:t}})).filter((function(t){return!!t.value}));return n.length?n:[{type:"string",value:""}]},f=function(t){var e=document.createElement("div");return e.innerHTML=t,g(m(e))};function m(t){if(s(t))return{tag:"text",props:{textContent:h(t.textContent||"")},children:[]};if(c(t)){var e=Object(a["a"])(t.attributes).map((function(t){return[t.name,t.value]})).filter((function(t){var e=Object(r["a"])(t,2),n=e[0],a=e[1];return!!a&&(!!n.startsWith("on")||i["i"](a))})).map((function(t){var e=Object(r["a"])(t,2),n=e[0],a=e[1];if(i["i"](a)){var o=h(decodeURIComponent(a));return"class"===n?["className",o]:[n,o]}return[n,a]})),n=Object.fromEntries(e),o=Object(a["a"])(t.childNodes).flatMap((function(t){return s(t)?h(t.textContent||""):[m(t)]}));return{tag:t.tagName.toLowerCase(),props:n,children:o}}return{tag:"text",props:{textContent:t.textContent||""},children:[]}}var v=function(t){return"(".concat(t.map(d).join("+"),")")},p=function t(e){var n=Object.entries(e).map((function(e){var n=Object(r["a"])(e,2),a=n[0],o=n[1];return i["i"](o)?[a,o]:i["c"](o)?[a,v(o)]:[a,t(o)]}));return"{".concat(n.map((function(t){return t.join(": ")})).join(", "),"}")};function g(t){if("text"===t.tag){var e=t.props.textContent;return i["i"](e)?l(e):i["c"](e)?1===e.length?l(e[0].value):"(".concat(e.map(d).join("+"),")"):""}var n=p(t.props),a="[".concat(t.children.map((function(t){return u(t)?"string"===t.type?l(t.value):"__r(() => { return (".concat(t.value,"); }, null, [])"):g(t)})).join(", "),"]"),r=Object.values(t.props).some((function(t){return i["c"](t)&&t.some((function(t){return"string"!==t.type}))})),o="__r('".concat(t.tag,"', ").concat(n,", ").concat(a,")");return r?"__r(() => { return ".concat(o," }, null, [])"):o}},d569:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"d",(function(){return g})),n.d(e,"c",(function(){return b}));n("7db0"),n("d81d"),n("5d41"),n("c760");var a=n("5530"),r=(n("96cf"),n("1da1")),o=n("7c2c"),i=Object(o["a"])("get","luis/run-command"),s=Object(o["a"])("get","luis/ask-yukina"),c=n("f704"),u=n("a18c"),l=function(t){return Object(c["h"])(t.map((function(t){return[t.type,t.entity]})))};function d(t){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!(e in p)){t.next=4;break}return p[e]({}),t.abrupt("return",!0);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("Fallback to default.");case 9:return t.next=11,i({command:e});case 11:if(n=t.sent,a=n.topScoringIntent.intent,r=l(n.entities),r.Password&&(o=n.entities.find((function(t){return"Password"===t.type})),r.Password=e.substring(o.startIndex,o.endIndex+1)),!(a in p)){t.next=18;break}return p[a](r),t.abrupt("return",!0);case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[0,6]])}))),h.apply(this,arguments)}var f=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s({question:e});case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m={login:function(t){var e=t.Username,n=t.Password;u["a"].push({name:"login",params:{credential:{username:e,password:n}}})},newPost:function(t){var e=t.PostID;u["a"].push({name:"edit",query:{post:e}})},search:function(t){var e=t.PostTag;u["a"].push({name:"index",query:{tag:e}})},showTimeline:function(t){var e=t.Username;u["a"].push({name:e?"userTimeline":"timeline",params:{username:e}})},"Utilities.GoBack":function(){u["a"].go(-1)},logout:function(){u["a"].push({name:"login",params:{logout:!0}})}},v={},p=Object(c["g"])(new Proxy(m,{get:function(t,e){return Reflect.get(v,e)||Reflect.get(t,e)},has:function(t,e){return Reflect.has(v,e)||Reflect.has(t,e)}})),g=function(t,e){v=Object(a["a"])(Object(a["a"])({},v),Object(c["g"])(t,e))},b=function(){v={}}},e2608:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("4de4"),n("4160"),n("159b");var a=n("5530"),r=n("d4ec"),o=n("bee2"),i=function(){function t(e){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:localStorage;Object(r["a"])(this,t),this.changeListeners=[],this.key=e,this.storage=a,this.removeHandler=this.addStorageEventListener((function(){return n.onStorageChanged()}))}return Object(o["a"])(t,[{key:"onStorageChanged",value:function(){var t=this.payload;this.changeListeners.forEach((function(e){return e(t)}))}},{key:"addChangeListener",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.changeListeners.push(t),n&&t(this.payload),function(){e.changeListeners=e.changeListeners.filter((function(e){return e!==t}))}}},{key:"getItem",value:function(t){var e=this.payload;return e&&e[t]}},{key:"getPayload",value:function(){return this.payload}},{key:"setPayload",value:function(t){this.payload=t}},{key:"updatePayload",value:function(t){this.setPayload(Object(a["a"])(Object(a["a"])({},t),this.payload))}},{key:"clear",value:function(){this.storage.removeItem(this.key),this.onStorageChanged()}},{key:"destroy",value:function(){this.removeHandler()}},{key:"addStorageEventListener",value:function(t){var e=this,n=function(n){n.key===e.key&&t(e.payload)};return addEventListener("storage",n),function(){removeEventListener("storage",n)}}},{key:"isEmpty",value:function(){return!this.payload}},{key:"payload",get:function(){return JSON.parse(this.storage.getItem(this.key)||"null")},set:function(t){this.storage.setItem(this.key,JSON.stringify(t)),this.onStorageChanged()}}]),t}()},e376:function(t,e,n){"use strict";n.r(e),n.d(e,"markdown",(function(){return i})),n.d(e,"markdownAsync",(function(){return s}));n("d3b7"),n("ac1f"),n("466d"),n("96cf");var a=n("1da1"),r=n("0e54"),o=n.n(r);o.a.use({tokenizer:{del:function(t){var e=t.match(/^~((?:~~|[^~])+?)~(?!~)/);return!!e&&{type:"text",raw:e[0],text:'<span class="heimu">'.concat(e[1],"</span>")}},codespan:function(t){var e=t.match(/^((?:r|R|Roselia|roselia){{[\s\S]+}})/);if(e)return{type:"text",raw:e[0],text:e[0]};var n=t.match(/^([^rR])((?:r|R|Roselia|roselia){{[\s\S]+}})/);return!!n&&{type:"text",raw:n[1],text:n[1]}}}});var i=function(t){return o()(t)},s=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){o()(e,(function(e,n){return t(n)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ef5a:function(t,e,n){},f704:function(t,e,n){"use strict";n.d(e,"h",(function(){return d})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return v})),n.d(e,"e",(function(){return p})),n.d(e,"a",(function(){return g})),n.d(e,"f",(function(){return w})),n.d(e,"g",(function(){return C}));n("99af"),n("a15b"),n("d81d"),n("13d5"),n("4fad"),n("d3b7"),n("5d41"),n("ac1f"),n("25f0"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("2ca0"),n("10d1"),n("ddb0");var a=n("53ca"),r=n("2909"),o=n("ade3"),i=n("5530"),s=n("3835"),c=function(t){return t.replace(/([A-Z])/g,"_$1").toLowerCase()},u=function(t){return t.replace(/_([a-zA-Z])/g,(function(t,e){return e.toUpperCase()}))},l=function(t){return function(e){return Object.entries(e).map((function(e){var n=Object(s["a"])(e,2),a=n[0],r=n[1];return t(a,r)}))}},d=function(t){return t.reduce((function(t,e){return Object(i["a"])(Object(i["a"])({},t),{},Object(o["a"])({},e[0],e[1]))}),{})};function h(t){return function(e){return Object.assign.apply(Object,[{}].concat(Object(r["a"])(Object.entries(e).map((function(e){var n=Object(s["a"])(e,2),a=n[0],r=n[1];return Object(o["a"])({},a,t(r))})))))}}var f=function t(e){return function(n){return n instanceof Array?n.map(t(e)):n&&"object"===Object(a["a"])(n)?d(l((function(n,a){return[e(n),t(e)(a)]}))(n)):n}},m=f(u),v=f(c),p=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return"undefined"===typeof t?void 0:t[e]}),t)}},g=function(t,e){return t===e||!(!t||!e)&&t.toLowerCase()===e.toLowerCase()},b=function(t,e,n){return(299*t+587*e+114*n)/1e3},y=function(t){return t.match(/\d+/g).map((function(t){return parseInt(t,10)}))},k=function(t){if(t){var e,n=t.toLowerCase();if(n.startsWith("rgb")){var a=y(n);e=b(a[0],a[1],a[2])}else{var r=n.substring(1);if(3===r.length&&(r=r.split("").map((function(t){return t+t})).join("")),6!==r.length)return;var o=r.replace(/(..)(?=.)/g,"$1-").split("-").map((function(t){return parseInt(t,16)}));e=b(o[0],o[1],o[2])}return e>=128}};function w(t,e,n,a){var r=k(t);return"undefined"===typeof r?a:r?e:n}function C(t,e){var n=new WeakMap;return new Proxy(t,{get:function(t,a){var r=Reflect.get(t,a);return"function"===typeof r?(n.has(r)||n.set(r,r.bind(e||t)),n.get(r)):r}})}},f9da:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var a=n("7c2c"),r=Object(a["a"])("get","user/user-meta"),o={id:0,username:"Yukina",role:0,nickname:"Yukina (Bot)",avatar:"https://img.lisa.moe/images/2019/04/15/GQ6GLDt_.jpg"}}});